<br/>
<b>Scheduled jobs</b>
<div ng-controller="etlScheduleController as vm">
	<div class="panel panel-default">
		<div class="panel-heading" style="display: inline-flex;">
			<div class="input-group ">
				<span class="input-group-addon" id="basic-addon1">
					<svg style="width:14px;height:14px" viewBox="0 0 24 24">
						<path fill="#000000" d="M3,2H21V2H21V4H20.92L15,9.92V22.91L9,16.91V9.91L3.09,4H3V2M11,16.08L13,18.08V9H13.09L18.09,4H5.92L10.92,9H11V16.08Z" />
					</svg>
				</span>
				<input type="text" class="form-control" ng-model="scheduleFilter.ScheduleName" placeholder="Filter" aria-label="Username" aria-describedby="basic-addon1">
				<button type="button" class="btn btn-primary pull-right" ng-click="vm.showAddScheduleJobModal = true">New</button>
			</div>
		</div>
		<div class="panel-body text-container">
			<div class="row">
				<div class="col-md-12">

					<table class="table">
						<thead>
							<tr>
								<th scope="col" ng-click="sortType = 'ScheduleName'; sortReverse = !sortReverse">
										Schedule name
										<span ng-show="sortType == 'ScheduleName' && !sortReverse">▾</span>
										<span ng-show="sortType == 'ScheduleName' && sortReverse">▴</span>
								</th>
								<th scope="col" ng-click="sortType = 'Description'; sortReverse = !sortReverse">
										Description
										<span ng-show="sortType == 'Description' && !sortReverse">▾</span>
										<span ng-show="sortType == 'Description' && sortReverse">▴</span>
								</th>
								<th scope="col" ng-click="sortType = 'JobName'; sortReverse = !sortReverse">
										Job name
										<span ng-show="sortType == 'JobName' && !sortReverse">▾</span>
										<span ng-show="sortType == 'JobName' && sortReverse">▴</span>
								</th>
								<th scope="col" ng-click="sortType = 'Tenant'; sortReverse = !sortReverse">
										Tenant
										<span ng-show="sortType == 'Tenant' && !sortReverse">▾</span>
										<span ng-show="sortType == 'Tenant' && sortReverse">▴</span>
								</th>
								<th scope="col" ng-click="sortType = 'DailyFrequencyStart'; sortReverse = !sortReverse">
										Daily frequency
										<span ng-show="sortType == 'DailyFrequencyStart' && !sortReverse">▾</span>
										<span ng-show="sortType == 'DailyFrequencyStart' && sortReverse">▴</span>
								</th>
								<th scope="col" ng-click="sortType = 'Enabled'; sortReverse = !sortReverse">
										Enabled
										<span ng-show="sortType == 'Enabled' && !sortReverse">▾</span>
										<span ng-show="sortType == 'Enabled' && sortReverse">▴</span>
								</th>
								<th scope="col">Actions</th>
							</tr>
						</thead>

						<tbody ng-repeat="job in vm.schedules | filter: scheduleFilter | orderBy:sortType:sortReverse ">
							<tr>
								<td>
									<!-- {{job}} -->
									{{job.ScheduleName}}
								</td>
								<td>
									{{job.Description}}
								</td>
								<td>
									{{job.JobName}}
								</td>
								<td>
									{{job.Tenant}}
								</td>
								<td>
									<span ng-if="job.DailyFrequencyMinute">Occurs every {{job.DailyFrequencyMinute}} minute(s) between {{job.DailyFrequencyStart | date: 'shortTime'}} and {{job.DailyFrequencyEnd | date: 'shortTime'}}</span>
									<span ng-if="!job.DailyFrequencyMinute">Occurs every day between {{job.DailyFrequencyStart  | date: 'shortTime'}} and {{job.DailyFrequencyEnd  | date: 'shortTime'}}</span>
								</td>
								<td>
									<span ng-click="job.Enabled = !job.Enabled">
										<button ng-cloak ng-if="!job.Enabled" type="button" class="btn btn-default">
											<svg style="width:24px;height:24px" viewBox="0 0 24 24">
												<path fill="#000000" d="M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M19,5V19H5V5H19Z" />
											</svg>
										</button>
										<button ng-cloak ng-if="job.Enabled" type="button" class="btn btn-success">
											<svg style="width:24px;height:24px" viewBox="0 0 24 24">
												<path fill="#fff" d="M19,19H5V5H15V3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V11H19M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z" />
											</svg>
										</button>
									</span>
								</td>
								<td>
									<button type="button" class="btn btn-default" data-toggle="modal" data-target="#exampleModal2" ng-click="vm.scheduleToEdit = job">
										<svg style="width:24px;height:24px" viewBox="0 0 24 24">
											<path fill="#000000" d="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z" />
										</svg>
									</button>

									<button type="button" class="btn btn-danger">
										<svg style="width:24px;height:24px" viewBox="0 0 24 24">
											<path fill="#000000" d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z" />
										</svg>
									</button>

								</td>
							</tr>
						</tbody>

					</table>
					<div class="custom-modal" ng-if="vm.showAddScheduleJobModal">
						<div class="modal-content">
							<div class="modal-header">
								<h5 class="modal-title">New Schedule</h5>
								<button type="button" class="close" ng-click="vm.showAddScheduleJobModal = false" aria-label="Close">
									<span aria-hidden="true">&times;</span>
								</button>
							</div>
							<div class="modal-body">
								<etl-schedule-modal ng-cloak job="" callback="vm.addScheduleJob"></etl-schedule-modal>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
