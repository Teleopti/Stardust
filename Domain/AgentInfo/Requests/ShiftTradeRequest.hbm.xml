<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
                   assembly="Teleopti.Ccc.Domain"
                   namespace="Teleopti.Ccc.Domain.AgentInfo.Requests"
                   default-access="field.camelcase-underscore">

  <joined-subclass name="ShiftTradeRequest"
         extends="Request">
    <key column="Request" foreign-key="FK_ShiftTradeRequest_Request"/>

    <property name="shiftTradeStatus"
         not-null="true"
              access="field"/>

    <bag name="ShiftTradeSwapDetails" table="ShiftTradeSwapDetail" cascade="all-delete-orphan"
            inverse="true">
      <key column="Parent" foreign-key="FK_ShiftTradeSwapDetail_ShiftTradeRequest"/>
      <one-to-many  class="Teleopti.Ccc.Domain.AgentInfo.Requests.ShiftTradeSwapDetail"/>
    </bag>    

	  <many-to-one name="Offer"
				 class="Teleopti.Ccc.Domain.AgentInfo.Requests.ShiftExchangeOffer"
				 not-null="false" foreign-key="FK_ShiftExchangeOffer_Request" lazy="false" cascade="save-update"/>
  </joined-subclass>
</hibernate-mapping>