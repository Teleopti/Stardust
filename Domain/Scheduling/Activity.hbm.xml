<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
									 assembly="Teleopti.Ccc.Domain"
									 namespace="Teleopti.Ccc.Domain.Scheduling"
									 default-access="field.camelcase-underscore">
	<class name="Activity" discriminator-value="0">
		<!--IEntity-->
		<id name="Id"
						type="guid"
			 access="nosetter.camelcase-underscore"
						unsaved-value="null">
			<generator class="guid.comb" />
		</id>
		<discriminator column="IsMaster" type="string"/>
		<version name="Version"
						 unsaved-value ="null"/>
		<many-to-one name="UpdatedBy"
								 class="Teleopti.Ccc.Domain.Common.Person"
								 not-null="true"
								 foreign-key="FK_Activity_Person_UpdatedBy" />
		<property name="UpdatedOn"
							type="UtcDateTime"
							not-null="true"/>
		<!--IEntity-->

		<component name="Description" class="Teleopti.Interfaces.Domain.Description, Teleopti.Ccc.Domain">
			<property name="Name"
					not-null="true"
					type="string"
					length="50"/>
			<property name="ShortName"
					not-null="false"
					type="string"
					length="25"/>
		</component>
		<property name="DisplayColor"
							type="Teleopti.Ccc.Infrastructure.NHibernateConfiguration.ColorNumber, Teleopti.Ccc.Infrastructure"
							not-null="true" />
		
		<property name="InContractTime"
					type="boolean"
					not-null="true" />
		<property name="InWorkTime"
					type="boolean"
					not-null="true" />
		<property name="InPaidTime"
					type="boolean"
					not-null="true" />
    <property name="PayrollCode"
          not-null="false"
          type="string"
          length="20"/>
		<many-to-one name="BusinessUnit"
					 class="Teleopti.Ccc.Domain.Common.BusinessUnit"
						access="nosetter.camelcase-underscore"
					 not-null="true" foreign-key="FK_Activity_BusinessUnit"/>
		<property name="IsDeleted"
					type="boolean"
					not-null="true"/>
		<property name="InReadyTime"
						type="boolean"
						not-null="true" />
		<property name="RequiresSkill"
						type="boolean"
						not-null="true" />
    <property name="RequiresSeat"
						type="boolean"
						not-null="true" />
    <property name="AllowOverwrite"
			  type="boolean"
			  not-null="true"/>
    <property name="IsOutboundActivity"
			  type="boolean"
			  not-null="true"/>
			<property name="ReportLevelDetail" not-null="false"></property>
		<subclass name="MasterActivity" discriminator-value="1" proxy="MasterActivity">
			<bag name="ActivityCollection" table="MasterActivityCollection" cascade="none">
				<key column="MasterActivity" foreign-key="FK_MasterActivity_Master"/>
				<many-to-many class="Teleopti.Ccc.Domain.Scheduling.Activity" column="Activity" foreign-key="FK_MasterActivity_Activity"/>
			</bag>
		</subclass>
		
		<filter name="businessUnitFilter"
				condition=":businessUnitParameter = BusinessUnit" />
		<filter name="deletedFlagFilter"
			condition="IsDeleted = 0" />
	</class>
</hibernate-mapping>
