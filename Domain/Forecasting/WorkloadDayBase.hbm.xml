<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
                   assembly="Teleopti.Ccc.Domain"
                   namespace="Teleopti.Ccc.Domain.Forecasting"
                   default-access="field.camelcase-underscore">
	<class name="WorkloadDayBase" abstract="true">
		<!--IEntity-->
		<id name="Id"
				type="guid"
			 access="nosetter.camelcase-underscore"
				unsaved-value="null">
			<generator class="guid.comb" />
		</id>

		<!--IEntity-->
		
    <property name ="CurrentDate"
              column="WorkloadDate"
		  type="Teleopti.Ccc.Infrastructure.NHibernateConfiguration.DateOnlyMappingType, Teleopti.Ccc.Infrastructure"
		  not-null="false"/>

    <set name="OpenHourList">
			<key column ="Parent" foreign-key="FK_OpenHourList_WorkloadDayBase">
				<column name="Parent" unique-key="openHourListUnique"/>
			</key>
			<composite-element class="Teleopti.Ccc.Domain.InterfaceLegacy.Domain.TimePeriod, Teleopti.Ccc.Domain" >
				<nested-composite-element class="Teleopti.Ccc.Domain.InterfaceLegacy.Domain.MinMax`1[System.TimeSpan], Teleopti.Ccc.Domain"
										  name="period" access="field">
					<property name="Minimum" 
							unique-key="openHourListUnique"
							not-null="true"
							type="TimeSpan"/>
					<property name="Maximum"
							unique-key="openHourListUnique"
							not-null="true"
							type="TimeSpan"/>
				</nested-composite-element>
			</composite-element>
		</set>


    <set name="TaskPeriodList" 
		    cascade="all-delete-orphan"
		    inverse="true"
         lazy="false">
			<key column ="Parent" />
            <one-to-many class="Teleopti.Ccc.Domain.Forecasting.Template.TemplateTaskPeriod" />
		</set>
		
		<many-to-one name="Workload"
		 class="Workload"
		 not-null="true"/>
	</class>
</hibernate-mapping>
