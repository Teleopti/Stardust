<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
                   assembly="Teleopti.Ccc.Domain"
                   namespace="Teleopti.Ccc.Domain.Forecasting"
                   default-access="field.camelcase-underscore">
	<class name="MultisitePeriod">
		<!--IEntity-->
		<id name="Id"
					type="guid"
			 access="nosetter.camelcase-underscore"
					unsaved-value="null">
			<generator class="guid.comb" />
		</id>
    <many-to-one class="MultisiteDay"
                 name="Parent"
                 not-null="true" foreign-key="FK_MultisitePeriod_MultisiteDay"/>
		<!--IEntity-->

    <component name="Period" class="Teleopti.Interfaces.Domain.DateTimePeriod, Teleopti.Interfaces">
      <component name="period" access="field">
        <property name="Minimum"
				  column="StartDateTime"
					  not-null="true"
					  type="UtcDateTime" />
        <property name="Maximum"
				column="EndDateTime"
				  not-null="true"
					  type="UtcDateTime"  />
      </component>
    </component>

    <map name="Distribution"
              table="MultisitePeriodDistribution"
	            cascade="all-delete-orphan"
              lazy="false">
      <key column="Parent" foreign-key="FK_MultisitePeriodDistribution_MultisitePeriod"/>
      <index-many-to-many column="ChildSkill" class="Teleopti.Ccc.Domain.Forecasting.ChildSkill" foreign-key="FK_MultisitePeriodDistribution_ChildSkill"/>
        <composite-element class="Teleopti.Interfaces.Domain.Percent, Teleopti.Interfaces">
          <property name="Value"
							  not-null="true"
							  type="Double" />
        </composite-element>
    </map>
	</class>

</hibernate-mapping>
