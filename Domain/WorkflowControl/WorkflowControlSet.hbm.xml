<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
                   assembly="Teleopti.Ccc.Domain"
                   namespace="Teleopti.Ccc.Domain.WorkflowControl"
                   default-access="field.camelcase-underscore">
    <class name="WorkflowControlSet">
        <!--IEntity-->
        <id name="Id"
            type="guid"
            access="nosetter.camelcase-underscore"
            unsaved-value="null">
            <generator class="guid.comb" />
        </id>
        <version name="Version"
                 unsaved-value ="null" />
        <many-to-one name="UpdatedBy"
                     class="Teleopti.Ccc.Domain.Common.Person"
                     not-null="true"
                     foreign-key="FK_WorkflowControlSet_Person_UpdatedBy" />
        <property name="UpdatedOn"
                  type="UtcDateTime"
                  not-null="true" />
        <!--IEntity-->

        <property name="Name"
                  not-null="true"
                  type="string"
                  length="50" />

        <list name="AbsenceRequestOpenPeriods" cascade="all-delete-orphan" inverse="true" lazy="false">
            <key column="Parent" />
            <index type="Byte" column ="OrderIndex" />
            <one-to-many class="AbsenceRequestOpenPeriod" />
        </list>
        <many-to-one name="AllowedPreferenceActivity"
                     class="Teleopti.Ccc.Domain.Scheduling.Activity"
                     not-null="false"
                     foreign-key="FK_WorkflowControlSet_Activity_AllowedPreferenceActivity" />
        <many-to-one name="BusinessUnit"
                     class="Teleopti.Ccc.Domain.Common.BusinessUnit"
                     access="nosetter.camelcase-underscore"
                     foreign-key="FK_WorkflowControlSet_BusinessUnit"
                     not-null="true" />
        <property name="IsDeleted"
                  type="boolean"
                  not-null="true" />
        <property name="SchedulePublishedToDate"></property>
        <property name="preferencePeriodFromDate"
                  access="field"
                  type="Teleopti.Ccc.Infrastructure.NHibernateConfiguration.DateOnlyMappingType, Teleopti.Ccc.Infrastructure"
                  not-null="true" />
        <property name="preferencePeriodToDate"
                  access="field"
                  type="Teleopti.Ccc.Infrastructure.NHibernateConfiguration.DateOnlyMappingType, Teleopti.Ccc.Infrastructure"
                  not-null="true" />
        <property name="preferenceInputFromDate"
                  access="field"
                  type="Teleopti.Ccc.Infrastructure.NHibernateConfiguration.DateOnlyMappingType, Teleopti.Ccc.Infrastructure"
                  not-null="true" />
        <property name="preferenceInputToDate"
                  access="field"
                  type="Teleopti.Ccc.Infrastructure.NHibernateConfiguration.DateOnlyMappingType, Teleopti.Ccc.Infrastructure"
                  not-null="true" />
        <property name="studentAvailabilityPeriodFromDate"
                  access="field"
                  type="Teleopti.Ccc.Infrastructure.NHibernateConfiguration.DateOnlyMappingType, Teleopti.Ccc.Infrastructure"
                  not-null="true" />
        <property name="studentAvailabilityPeriodToDate"
                  access="field"
                  type="Teleopti.Ccc.Infrastructure.NHibernateConfiguration.DateOnlyMappingType, Teleopti.Ccc.Infrastructure"
                  not-null="true" />
        <property name="studentAvailabilityInputFromDate"
                  access="field"
                  type="Teleopti.Ccc.Infrastructure.NHibernateConfiguration.DateOnlyMappingType, Teleopti.Ccc.Infrastructure"
                  not-null="true" />
        <property name="studentAvailabilityInputToDate"
                  access="field"
                  type="Teleopti.Ccc.Infrastructure.NHibernateConfiguration.DateOnlyMappingType, Teleopti.Ccc.Infrastructure"
                  not-null="true" />
        <property name="WriteProtection"></property>
        <property name="ShiftTradeTargetTimeFlexibility"></property>

        <property name="fairnessTypeAsInt"
                  access="field"
                  column="FairnessType"
                  type="int"
                  not-null="true" />

        <set name="MustMatchSkills"
             table="WorkflowControlSetSkills">
            <key column="WorkflowControlSet" foreign-key="FK_WorkflowControlSetSkills_WorkflowControlSet" />
            <many-to-many column="Skill"
                          class="Teleopti.Ccc.Domain.Forecasting.Skill" foreign-key="FK_WorkflowControlSetSkills_Skill" />
        </set>

        <set name="AllowedPreferenceAbsences"
             table="WorkflowControlSetAllowedAbsences">
            <key column="WorkflowControlSet" foreign-key="FK_WorkflowControlSetAllowedAbsences_WorkflowControlSet" />
            <many-to-many column="Absence"
                          class="Teleopti.Ccc.Domain.Scheduling.Absence" foreign-key="FK_WorkflowControlSetAllowedAbsences_Absence" />
        </set>

        <set name="AllowedAbsencesForReport"
             table="WorkflowControlSetAllowedAbsencesForReport">
            <key column="WorkflowControlSet" foreign-key="FK_WorkflowControlSetAllowedAbsencesForReport_WorkflowControlSet" />
            <many-to-many column="Absence"
                          class="Teleopti.Ccc.Domain.Scheduling.Absence" foreign-key="FK_WorkflowControlSetAllowedAbsencesReport_Absence" />
        </set>

        <set name="AllowedPreferenceShiftCategories"
             table="WorkflowControlSetAllowedShiftCategories">
            <key column="WorkflowControlSet" foreign-key="FK_WorkflowControlSetAllowedShiftCategories_WorkflowControlSet" />
            <many-to-many column="ShiftCategory"
                          class="Teleopti.Ccc.Domain.Scheduling.ShiftCategory" foreign-key="FK_WorkflowControlSetAllowedShiftCategories_ShiftCategory" />
        </set>

        <set name="AllowedPreferenceDayOffs"
             table="WorkflowControlSetAllowedDayOffs">
            <key column="WorkflowControlSet" foreign-key="FK_WorkflowControlSetAllowedDayOffs_WorkflowControlSet" />
            <many-to-many column="DayOffTemplate"
                          class="Teleopti.Ccc.Domain.Scheduling.DayOffTemplate" foreign-key="FK_WorkflowControlSetAllowedDayOffs_DayOff" />
        </set>

        <component name="ShiftTradeOpenPeriodDaysForward">
            <property name="Minimum"
                      type="int"
                      not-null="true"
                      column="ShiftTradeOpenPeriodDaysForwardMinimum" />
            <property name="Maximum"
                      type="int"
                      not-null="true"
                      column="ShiftTradeOpenPeriodDaysForwardMaximum" />
        </component>

        <property name="AutoGrantShiftTradeRequest" type="bool" not-null="true" />

        <property name="AnonymousTrading" type="bool" not-null="true" />

        <property name="AbsenceRequestWaitlistEnabled" type="bool" not-null="true" />

        <property name="AbsenceRequestWaitlistProcessOrder" not-null="true" />

        <property name="AbsenceRequestCancellationThreshold" type="int" not-null="false" />

        <property name="AbsenceRequestExpiredThreshold" type="int" not-null="false" />

        <property name="AbsenceProbabilityEnabled" type="bool" not-null="true" />

        <property name="AutoGrantOvertimeRequest" type="bool" not-null="true" />

        <property name="CheckStaffingForOvertimeRequest" type="bool" not-null="true" />

        <property name="LockTrading" type="bool" not-null="true" />

        <property name="OvertimeProbabilityEnabled" type="bool" not-null="true" />

        <filter name="businessUnitFilter"
                condition=":businessUnitParameter = BusinessUnit" />
        <filter name="deletedFlagFilter"
                condition="IsDeleted = 0" />
    </class>
</hibernate-mapping>