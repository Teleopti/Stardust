<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" 
                   assembly="Teleopti.Ccc.Domain" 
                   namespace="Teleopti.Ccc.Domain.WorkflowControl"
                   default-access="field.camelcase-underscore">
  <class name="AbsenceRequestOpenPeriod" abstract="true">
    <!--IUnique-->
    <id name="Id"
		  access="nosetter.camelcase-underscore"
            type="guid"
            unsaved-value="null">
      <generator class="guid.comb" />
    </id>
    <!--IUnique-->

    <discriminator column="PeriodType" type="string" not-null="true"/>
    <many-to-one class="Teleopti.Ccc.Domain.Scheduling.Absence"
                 name="Absence"
                 not-null="true" 
                 foreign-key="FK_AbsenceRequestOpenPeriod_Absence"/>

    <property name="OrderIndex" access="readonly" not-null="true"/>

    <many-to-one name="Parent"
                 class="WorkflowControlSet"
                 not-null ="true"
                 foreign-key="FK_AbsenceRequestOpenPeriod_WorkflowControlSet"/>

    <component name="OpenForRequestsPeriod" class="Teleopti.Interfaces.Domain.DateOnlyPeriod, Teleopti.Interfaces">
      <component class ="Teleopti.Interfaces.Domain.MinMax`1[Teleopti.Interfaces.Domain.DateOnly, Teleopti.Interfaces], Teleopti.Interfaces" name="period" access="field">
        <property name="Minimum" column="OpenMinimum" not-null="true" type="Teleopti.Ccc.Infrastructure.NHibernateConfiguration.DateOnlyMappingType, Teleopti.Ccc.Infrastructure"/>
        <property name="Maximum" column="OpenMaximum" not-null="true" type="Teleopti.Ccc.Infrastructure.NHibernateConfiguration.DateOnlyMappingType, Teleopti.Ccc.Infrastructure"/>
      </component>
    </component>


    <property name="PersonAccountValidator" type="int" not-null ="true" />
    <property name="StaffingThresholdValidator" type="int" not-null ="true" />
    <property name="AbsenceRequestProcess" type="int" not-null ="true" />
  </class>
         
</hibernate-mapping>
