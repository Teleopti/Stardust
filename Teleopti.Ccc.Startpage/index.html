<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Teleopti WFM</title>
	<!-- css -->
	<link href="favicon.ico" rel="shortcut icon" type="image/x-icon" />
	<link href="assets/css/main.min.css" rel="stylesheet">
	<link href="assets/css/banner.css" rel="stylesheet">
	<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
	<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
	<!--[if lt IE 9]>
		<script src="assets/vendor/html5shiv/dist/html5shiv.js"></script>
		<script src="assets/vendor/respond/dest/respond.min.js"></script>
	<![endif]-->
</head>
<body>
	<header>
		<div class="container">
			<div id="header">
				<div class="row">
					<div id="logo" class="col-md-3">
						<a href=""><img src="assets/img/teleopti_logo.png" /></a>
					</div>
				</div>
			</div>
		</div>
		<script>
			window.subDir = "$(TELEOPTIWFM_URL)";

			function setCookieFromQueryString() {
				var date = new Date();
				date.setTime(date.getTime() + (30 * 60 * 1000));
				var expires = "; expires=" + date.toUTCString();

				var query = window.location.search.substring(1);
				var vars = query.split('&');

				if (vars.length === 1 && vars[0] === '') {
					return;
				}
				for (var i = 0; i < vars.length; i++) {
					var pair = vars[i].split('=');
					document.cookie = decodeURIComponent(pair[0]) + "=" + decodeURIComponent(pair[1]) + expires + "; path=/";
				}
			}

			window.onload = function () {
				document.getElementById("launcher").addEventListener("click", function (e) {
					e.preventDefault();
					window.location.href = subDir + "/Client/Teleopti.Ccc.SmartClientPortal.Shell.application?" + window.location.search.substring(1);
					return false;
				});

				var xmlhttp = new XMLHttpRequest();
				xmlhttp.onreadystatechange = function () {
					if (xmlhttp.readyState == 4) {
						if (xmlhttp.status == 200) {
							if (xmlhttp.responseText.length > 0) {
								var result = JSON.parse(xmlhttp.responseText);

								if (result.IsEnabled === true) {
									document.getElementById("webwfm").style.visibility = "visible";
									document.getElementById("webwfm").style.display = "block";
								} else {
									console.log(result.IsEnabled, 'false');
									document.getElementById("webwfm").style.display = "none";
									document.getElementById("webwfm").style.visibility = "hidden";
								}

							} else {
								console.log('fail', result);
							}
						}
					}
				};
				xmlhttp.open("GET", "Web/ToggleHandler/IsEnabled?toggle=Wfm_MinimumScaffolding_32659", true);
				xmlhttp.setRequestHeader("Accept", "application/json");
				xmlhttp.send();

				setCookieFromQueryString();
			};

		</script>
	</header>
	<div class="container">
		<!-- Blocks -->
		<div class="client-applications row">
			<div class="col-md-3">
				<a class="block blue addSubDir" href="/Web/MyTime">
					<span>Agents</span>
				</a>
			</div>
			<div class="col-md-3">
				<a id="webteamschedule" class="block green addSubDir" href="/Web/Wfm/#/teams">
					<span>Team Leaders</span>
				</a>
			</div>
			<div class="col-md-3">
				<a id="webrta" class="block pink addSubDir" href="/Web/Wfm/#/rta">
					<span>Real-time Analysts</span>
				</a>
			</div>
			<div class="col-md-3" style="overflow:hidden;">
				<a class="block orange" href="javascript:void(0);" id="launcher">
					<span>Resource Planners</span>
					<a class="wfm-block-overlay addSubDir" style="visibility: hidden" id="webwfm" href="/Web/wfm">
						<span>Web</span>
						<p>
							Thank you for joining our pilot project.
							Your input and feedback is vital to us to ensure we develop functionality that makes a difference. Click here to access the pilot features.
							<br />
							<br />
							If you only want to access our standard functionality, click the box as normal.
							Any feedback, no matter how large or small, is appreciated. Thanks once again!
						</p>
					</a>
				</a>

			</div>
		</div>
		<!-- bottom links -->
		<div class="row">
			<div class="col-md-12">
				<ul class="tools-services">
					<li class="rta-service"><a href="/RTA/TeleoptiRtaService.svc" class="addSubDir">RTA Web Service</a></li>
					<li class="sdk-service"><a href="/SDK/TeleoptiCCCSdkService.svc" class="addSubDir">SDK Web Service</a></li>
				</ul>
			</div>
		</div>
		<div class="row">
			<div class="col-md-12" style="margin-top: 30px;">
				<span id="versionText" class="pull-right">Version:&nbsp<span id="versionNumber" class="pull-right">#VERSION#</span></span>
			</div>
		</div>
	</div>
	<a href="/" style="display: none;" id="realPath"></a>
	<script>
		function fixSubDir() {
			window.subDir = window.subDir.replace("$(TELEOPTIWFM_URL)", "/TeleoptiWFM");
			var linksToFix = document.getElementsByClassName("addSubDir");
			var realPath = document.getElementById("realPath").href;

			var i;
			for (i = 0; i < linksToFix.length; i++) {
				linksToFix[i].href = window.subDir + linksToFix[i].href.replace(realPath, "/");
			}
		}
		fixSubDir();
	</script>
</body>
</html>