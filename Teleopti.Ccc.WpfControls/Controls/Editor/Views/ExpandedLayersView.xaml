<!--DataContext: ExpandedLayersViewModel
	Description: Show a part of a LayerViewModelCollection (ie: Absences, MainShift, Layers before 12:00 etc)
	And decide if they should be in editmode/expanded etc (GroupOfLayersViewModel)
	-->

<UserControl x:Class="Teleopti.Ccc.WpfControls.Controls.Editor.Views.ExpandedLayersView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:Layers="clr-namespace:Teleopti.Ccc.WpfControls.Controls.Layers"
    xmlns:Commands="clr-namespace:Teleopti.Ccc.WinCode.Common.Commands;assembly=Teleopti.Ccc.WinCode"
    xmlns:Converters="clr-namespace:Teleopti.Ccc.WpfControls.Converters"
    xmlns:UserTexts="clr-namespace:Teleopti.Ccc.UserTexts;assembly=Teleopti.Ccc.UserTexts"
	Commands:CreateCommandBinding.Command="{Binding Path=ToggleEditModeCommand}">
	<UserControl.Resources>
		<ResourceDictionary>
            <Converters:VisibilityConverter x:Key="visibilityConverter"/>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="..\..\..\Resources\Common.xaml"/>
                <ResourceDictionary Source="..\..\..\Resources\Icons.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
	</UserControl.Resources>

	<Grid>
		<Grid.RowDefinitions>
			<RowDefinition />
			<RowDefinition />
		</Grid.RowDefinitions>
	
		<!--Normal view Shows the VisualLayers (created from projection by the LayerViewModelCollection-->
		<Layers:LayerListBox Period="{Binding Path=Period}" 
						 ItemsSource="{Binding Path=Layers.VisualLayers}"
						 Background="{StaticResource RaptorStandardLightGradientBrush}"
                         Offset="0"
						 VerticalAlignment="Stretch"
					     Height="{Binding Path=LayerHeight}"/>

        <!-- The expanded layers -->
        <Layers:ExpandedLayersExpandedView
                                Period="{Binding Path=Period}" 
                                Offset="1"
                                Grid.Row="1"
								VerticalAlignment="Stretch"
								Visibility="{Binding Path=EditMode,Converter={StaticResource visibilityConverter}, FallbackValue=Visible}"/>
                
                
                <Button Content="{x:Static UserTexts:Resources.Show}"
				        Command="{Binding Path=ToggleEditModeCommand.Command}" 
				        HorizontalAlignment="Left" 
				        VerticalAlignment="Top">
			
		</Button>

	</Grid>
</UserControl>
