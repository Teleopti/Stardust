<!DOCTYPE html>
<html ng-app="wfm">

<head lang="en">
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>WFM</title>
	<link rel="stylesheet" href="vendor/MaterialDesignIcons/css/materialdesignicons.min.css">
</head>

<body ng-show="isAuthenticated" ng-controller="MainController as main">
	<div class="layout-container">
		<div id="materialcontainer" class="container content">
			<div ui-view></div>
			<wfm-notice notices="$parent.wfmNotices"></wfm-notice>
		</div>
	</div>
	<script type="text/javascript">
		var materialcontainer = document.getElementById('materialcontainer');
		if (materialcontainer) {
			materialcontainer.style["margin-top"] = '0';
			materialcontainer.style.height = '100vh';
		}

		function ahAhAhAhStayingAlive() {
			var request = new XMLHttpRequest();
			request.open('GET', '../api/Global/User/CurrentUser', true);
			request.setRequestHeader("Accept", "application/json");
			request.onload = function () {
				if (request.status >= 200 && request.status < 400) {
					return true;
				} else {
					errorStayingAlive();
				}
			};
			request.send();
		}

		window.onerror = function (errorMessage, url, line) {
			var req = new XMLHttpRequest();
			req.open('POST', '../api/Logging/LogError', true);
			req.setRequestHeader("Content-type", "application/json");
			req.send(JSON.stringify({
				Message: errorMessage,
				Url: url,
				LineNumber: line,
				ParentUrl: document.location.href,
				UserAgent: navigator.userAgent
			}));
		};
	</script>

	<link id="themeDependencies" rel="stylesheet" href="dist/dependencies.css">
	<link id="themeStyleguide" rel="stylesheet" href="">
	<link id="themeAnt" rel="stylesheet" href="">
	<ng2-bootstrap></ng2-bootstrap>
	<!-- build:template
	<% if (environment === 'dev') { %>
	<script src="dist/resources/modules.js"></script>
	<script src="dist/templates.js"></script>
	<script src="dist/main.js"></script>
	<script src="dist/ng2/runtime.js"></script>
	<script src="dist/ng2/polyfills.js"></script>
	<script src="dist/ng2/styles.js"></script>
	<script src="dist/ng2/vendor.js"></script>
	<script src="dist/ng2/main.js"></script>
	<% } else { %>
	<script src="dist/resources/modules.js"></script>
	<script src="dist/templates.js"></script>
	<script src="dist/mainForDesktop.js"></script>
	<script src="dist/ng2/runtime.js"></script>
	<script src="dist/ng2/polyfills.js"></script>
	<link rel="stylesheet" href="dist/ng2/styles.css">
	<script src="dist/ng2/main.js"></script>
	<% } %>
	/build -->
</body>

</html>