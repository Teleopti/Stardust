<!DOCTYPE html>
<html ng-app="wfm">
<head lang="en">
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>WFM</title>
	<link rel="stylesheet" href="vendor/MaterialDesignIcons/css/materialdesignicons.min.css">
	<link id="themeModules" rel="stylesheet" href="">
	<link id="themeStyle" rel="stylesheet" href="">
	<style>
		.loader{width:75px;height:75px;margin:5% auto 0;border:6px solid transparent;border-top:6px solid #09f;animation-name:spin;animation-duration:1s;animation-iteration-count:infinite;border-radius:50%;transform:rotate(0);overflow:hidden}@keyframes spin{from{transform:rotate(0)}to{transform:rotate(360deg)}}.backdrop{position:fixed;z-index:999999;left:0;right:0;bottom:0;top:0;background:#fff}
	</style>
</head>
<body ng-show="isAuthenticated" ng-cloak ng-controller="MainController as main">
	<div class="backdrop" ng-if="!main.styleIsFullyLoaded">
		<div class="loader"></div>
	</div>
	<div class="layout-container">
		<div id="materialcontainer" class="container content">
			<div ui-view></div>
			<wfm-notice notices="$parent.wfmNotices"></wfm-notice>
		</div>
	</div>
	<script type="text/javascript">
		var materialcontainer = document.getElementById('materialcontainer');
		if (materialcontainer) {
			materialcontainer.style["margin-top"] = '0';
			materialcontainer.style.height = '100vh';
		}

		function ahAhAhAhStayingAlive() {
			var request = new XMLHttpRequest();
			request.open('GET', '../api/Global/User/CurrentUser', true);
			request.setRequestHeader("Accept", "application/json");
		    request.onload = function() {
		        if (request.status >= 200 && request.status < 400) {
		            return true;
		        } else {
		            errorStayingAlive();
		        }
		    };
			request.send();
		}

		window.onerror = function(errorMessage, url, line) {
			var req = new XMLHttpRequest();
			req.open('POST', '../api/Logging/LogError', true);
			req.setRequestHeader("Content-type", "application/json");
			req.send(JSON.stringify({
				Message: errorMessage,
				Url: url,
				LineNumber: line,
				ParentUrl: document.location.href,
				UserAgent: navigator.userAgent
			}));
		};
	</script>
	<script src="dist/resources/modules.min.jss"></script>
	<script src="dist/templates.min.js"></script>
	<script src="dist/main.min.js"></script>
</body>

</html>
