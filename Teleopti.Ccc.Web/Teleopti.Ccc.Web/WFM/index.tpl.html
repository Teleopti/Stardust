<!DOCTYPE html>
<html ng-app="wfm">
<head lang="en">
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>WFM</title>
	<link rel="stylesheet" href="vendor/MaterialDesignIcons/css/materialdesignicons.min.css">
	<link id="themeModules" rel="stylesheet" href="dist/modules_classic.min.css">
	<link id="themeStyle" rel="stylesheet" href="dist/style_classic.min.css">
</head>
<body ng-show="isAuthenticated" ng-cloak>
<div id="nav" ng-include="'html/nav.html'" class="material-depth-1 navbar navbar-default navbar-static-top " role="navigation"></div>
<div class="layout-container">
	<div id="leftsidenav" class="sidenav material-depth-1 left" ng-class="{'is-hidden':toggleLeftSide}">
		<div ng-include="'html/left-sidenav.html'"></div>
	</div>


	<div id="lefttoogle" class="sidenav-toggle">
		<div class="sidenav-wrapper left">
			<input type="checkbox" id="nav-left" ng-model="toggleLeftSide"/>
			<label for="nav-left">
				<i class="mdi" ng-class=" {'mdi-menu':toggleLeftSide, 'mdi-close':!toggleLeftSide}"></i>
			</label>
		</div>
	</div>
	<div id="materialcontainer" class="container content">
		<div ui-view></div>
		<wfm-notice notices="wfmNotices"></wfm-notice>
	</div>

</div>
	<script type="text/javascript">
		function iAmCalledFromFatClient() {
			removeElements();
			expandMaterialContainer();
			changeToClassicTheme();
		};

		var removeElements = function() {
			var elementsToRemove = [
				document.getElementById('nav'),
				document.getElementById('leftsidenav'),
				document.getElementById('notice'),
				document.getElementById('lefttoogle')
			];

			elementsToRemove.forEach(function(elmt) {
				if (elmt) elmt.style.display = 'none';
			});
		};

		var expandMaterialContainer = function() {
			var materialcontainer = document.getElementById('materialcontainer');
			if (materialcontainer) {
				materialcontainer.style["margin-top"] = '0';
				materialcontainer.style.height = '100vh';
			}
		};

		var changeToClassicTheme = function() {
			if (typeof angular == null) {
				setTimeout(changeToClassicTheme, 2000);
			} else {
				angular.element(document.getElementById('darkTheme')).scope().toggleTheme('classic');
			}
		};

		function ahAhAhAhStayingAlive() {
			$.get('../Start/Url/Index')
				.success(function() {
					return true;
				}).error(function(xhr, ajaxOptions, thrownError) {
					console.log(xhr.Message + ': ' + xhr.ExceptionMessage);
				});
		}
		window.onerror = function(errorMessage, url, line) {
			var req = new XMLHttpRequest();
			req.open('POST', '../api/Logging/LogError', true);
			req.setRequestHeader("Content-type", "application/json");
			req.send(JSON.stringify({
				Message: errorMessage,
				Url: url,
				LineNumber: line,
				ParentUrl: document.location.href,
				UserAgent: navigator.userAgent
			}));
		};
	</script>
	<script src="dist/modules.js"></script>
	<script src="dist/templates.js"></script>
	<script src="dist/main.min.js"></script>
</body>

</html>
