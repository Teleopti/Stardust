<div class="con-row nav-row" ng-controller="SearchCtrl">
	<div class="con-flex nav-inline">
		<span class="brand" ui-sref="main">Teleopti WFM </span>

		<div class="navbar-left">
			<span ng-controller="BusinessUnitsController as businessunit">
				<span ng-if="businessunit.show">
					<md-select class="bu-select" name="business-unit-select" id="business-unit-select" ng-change="businessunit.changeBusinessUnit(businessunit.data.selectedBu)" ng-model="businessunit.data.selectedBu" placeholder="{{businessunit.data.selectedBu.Name}}">
						<!--<md-tooltip>{{'BusinessUnit' |translate}}</md-tooltip>-->
						<md-option ng-repeat="bu in businessunit.data.businessUnits" ng-value="bu">{{bu.Name}}</md-option>
					</md-select>
				</span>
			</span>
		</div>
	</div>
	<div class="con-flex split-1-2" ng-show="searchmode">
		<div >
			<input type="text" id="searchbar" ng-blur="delayFocus()" class="navbar-search" placeholder="{{'SearchThreeDots' | translate}}" ng-model="keyword" ng-change="searchKeyword()"/>
			<div class="search-results material-depth-2">
				<ul class="wfm-list">
					<div ng-repeat="gp in searchResultGroups">
						<li class="wfm-search-li" style="pointer-events:none;">
							<button ng-if="gp == 'Permission' " class="wfm-fab mini result-icon"><i class="mdi mdi-account-key"></i></button>
							<button ng-if="gp == 'Planning Period' " class="wfm-fab mini info result-icon"><i class="mdi mdi-calendar"></i></button>
							{{gp}}
						</li>
						<li ng-repeat="item in searchResult | filter:{ SearchGroup: gp }">
							<div ng-click="clickedItem(item);searchbarFocus();">
								{{item.Name}}
							</div>
						</li>
						<li ng-if="searchResult.length == 0"></li>
					</div>
				</ul>
			</div>
		</div>
	</div>
	<div class="con-flex"></div>

	<div class="nav-tools">
		<a ng-click="searchbarSetFocus()">
			<div class="panel-menu">
				<div class="context-menu card-context" ng-class="{'active-context material-depth-2':searchmode}">
					<i class="mdi mdi-magnify"></i>
				</div>
			</div>
			<md-tooltip>{{'SearchThreeDots'|translate}}</md-tooltip>
		</a>

		<a>
			<div class=" panel-menu">
				<div tabindex=0 class="context-menu card-context">
					<span class="nav-context-menu">
						<i class="mdi mdi-bell">
							<md-tooltip>{{'Notifications'|translate}}</md-tooltip>
						</i>

						<div class="nav-context-menu-left" style="visibility: hidden;">
							<div class="arrow-up"></div>
							<div class="context-content" >
								<div class="notification-list">
									<h4>{{'Notifications'|translate}}
									</h4>
									<div ng-controller="NotificationsController as vm">
										<ul class="notification-list wfm-simple-list">
											<li ng-repeat="alarm in vm.notificationResult">
												<i class="mdi mdi-alert-circle"></i>
												<b>{{alarm.JobCategory}}</b>
												<span class="pull-right">{{alarm.Timestamp | date:'HH:mm'}}</span>
												<div class="subtext">{{alarm.Status}}</div>
											</li>
										</ul>
									</div>
								</div>
							</div>
						</div>
					</span>
				</div>
			</div>
		</a>

		<a ng-show="vm.personalizeToggle" ng-controller="ThemesPickerController as vm">
			<div ng-include="'app/global/wfm-themes/themes-menu.html'"></div>
		</a>

		<span ng-controller="HelpController as vm">
			<a href="{{vm.helpUrl}}" target="_blank" ng-if="vm.displayHelp">
				<div class="panel-menu">
					<div tabindex=0 class="context-menu card-context">
						<i class="mdi mdi-help-circle"></i>
					</div>
				</div>
				<md-tooltip>{{'HelpLabel'|translate}}</md-tooltip>
			</a>
		</span>

		<a href="../Authentication/SignOut">
			<div class=" panel-menu">
				<div tabindex=0 class="context-menu card-context">
					<i class="mdi mdi-logout"></i>
				</div>
			</div>
			<md-tooltip>{{'LogOut'|translate}}</md-tooltip>
		</a>
	</div>
</div>
