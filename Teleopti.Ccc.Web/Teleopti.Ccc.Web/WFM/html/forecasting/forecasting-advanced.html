<div>
	<div class="row">
		<div class="col-lg-12">
			<button class="wfm-btn wfm-btn-default back" ng-click="back()">{{ 'Back' | translate }}</button>
			
		</div>
	</div>
	<div class="row">
		<div class="wfm-slide-tabs">
			<md-content class="md-padding">
				<md-tabs md-dynamic-height md-border-bottom>
					<md-tab label="{{ 'ForecastMethod' | translate }}">
						<md-content class="md-padding">
							<div ng-include="'first-forecast-tab.html'" ng-init="init()"></div>
						</md-content>
					</md-tab>
					<md-tab label="Outliers" ng-if="isQueueStatisticsEnabled">
						<md-content class="md-padding">
							<div ng-include="'second-forecast-tab.html'"></div>
						</md-content>
					</md-tab>
				</md-tabs>
			</md-content>
		</div>
	</div>
</div>

<div ng-cloak class="modal-box">
	<div ng-cloak ng-if="modalLaunch">
		<div class="modalbg">
			<div class="dialog">
				<div class="modal-header" translate>
					SelectForecastPeriodIntro
				</div>
				<div class="modal-inner-content">
					<div class="wfm-block forecast-period">
						<div class="wfm-datepicker-wrap">
							<div class="sub-header">
								{{'From' | translate}} <span class="startDate">{{period.startDate | date : format}}</span>
							</div>
							<datepicker ng-model="period.startDate" show-weeks="true" custom-class="setRangeClass(date, mode)" class="wfm-datepicker" ng-change="updateEndDate()"></datepicker>
						</div>
						<div class="wfm-datepicker-wrap">
							<div class="sub-header">
								{{'To' | translate}} <span class="endDate">{{period.endDate | date : format}}</span>
							</div>
							<datepicker ng-model="period.endDate" show-weeks="true" min-date="period.startDate" custom-class="setRangeClass(date, mode)" class="wfm-datepicker" ng-change="updateStartDate()"></datepicker>
						</div>
						<div class="alert-warning notice-spacer" ng-if="moreThanOneYear()"><i class='mdi mdi-alert'></i>Forecast period cannot be more than 1 year.</div>
					</div>
				</div>
				<div class="modal-footer">
					<aside>
						<a class="wfm-btn wfm-btn-invis-default" ng-click="cancelModal()">{{ 'Close' | translate }}</a>
						<a class="wfm-btn wfm-btn-invis-primary next-step-one-workload" ng-disabled="disableNextStepOneWorkload()" ng-class="{'wfm-btn-invis-disabled': disableNextStepOneWorkload()}" ng-click="nextStepOneWorkload(period)">{{ 'Forecast' | translate }}</a>
					</aside>
				</div>
			</div>
		</div>
	</div>
</div>


<script type="text/ng-template" id="first-forecast-tab.html">
	<div ng-if="evaluationLoading" class="wfm-block">
		<md-progress-linear md-mode="indeterminate"></md-progress-linear>
	</div>
	<div class="alert-warning notice-spacer" ng-show="noHistoricalDataForForecasting"><i class='mdi mdi-alert'></i> Warning: There is no historical data available for forecasting.</div>
	<div ng-if="!evaluationLoading && !noHistoricalDataForForecasting">
		<div class="wfm-block">
			<div class="row">
				<div class="col-lg-12">
					<p>
						This chart shows how well a <i>Forecast Method</i> matches last year's <i>Queue Statistics</i> for workload <b>{{workloadName}}</b>. Out of several tested forecast methods
						this one was the most accurate. <br>The chosen forecast method is based on a period of queue statistics prior to the timeframe in the chart and will be used in the upcoming
						forecast for workload <b>{{workloadName}}</b>.
					</p>
					<div class="row">
						<p>
							We use historical data from <b>{{ForecastMethodRecommended.PeriodUsedToEvaluateStart | date : shortDate}}</b> to <b>{{ForecastMethodRecommended.PeriodUsedToEvaluateEnd | date : shortDate}}</b>, and evaluate forecast methods on the period from <b>{{ForecastMethodRecommended.PeriodEvaluateOnStart | date : shortDate}}</b> to <b>{{ForecastMethodRecommended.PeriodEvaluateOnEnd | date : shortDate}}</b>.
						</p>
					</div>
				</div>
			</div>
		</div>

		<c3chart bindto-id="evaluationChart" chart-data="evaluationChartData" chart-columns="chartInfo.evaluationChartDataColumns" chart-x="chartInfo.dataX" show-subchart="true" style="margin-left:-13px;">
			<chart-axis>
				<chart-axis-x axis-id="date" axis-type="timeseries">
					<chart-axis-x-tick tick-format="%Y-%m-%d" />
				</chart-axis-x>
			</chart-axis>
			<chart-axis>
				<chart-axis-y axis-id="y" axis-position="outer-middle" axis-label="Number of Calls" />
			</chart-axis>
		</c3chart>
	</div>
</script>

<script type="text/ng-template" id="second-forecast-tab.html">
	<div ng-if="queueStatisticsLoading">
		<md-progress-linear md-mode="indeterminate"></md-progress-linear>
	</div>
	<div class="alert-warning notice-spacer" ng-show="noHistoricalDataForForecasting"><i class='mdi mdi-alert'></i> Warning: There is no historical data available for forecasting.</div>
	<div ng-if="!queueStatisticsLoading && !noHistoricalDataForForecasting">
		<c3chart bindto-id="queueStatisticsChart" chart-data="queueStatisticsChartData" chart-columns="chartInfo.queueStatisticsChartDataColumns" chart-x="chartInfo.dataX" show-subchart="true" style="margin-left:-13px;">
			<chart-axis>
				<chart-axis-x axis-id="date" axis-type="timeseries">
					<chart-axis-x-tick tick-format="%Y-%m-%d" />
				</chart-axis-x>
			</chart-axis>
			<chart-axis>
				<chart-axis-y axis-id="y" axis-position="outer-middle" axis-label="Number of Calls" />
			</chart-axis>
		</c3chart>
	</div>
</script>

