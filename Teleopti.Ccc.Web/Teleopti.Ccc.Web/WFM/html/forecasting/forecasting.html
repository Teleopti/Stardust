<div>
	<div class="alert-warning notice-spacer" ng-if="isForecastRunning"><i class='mdi mdi-alert'></i> Warning: Forecast is running.</div>
	<div class="row">
		<div class="col-lg-12">
			<h4>Overview</h4>
			<div class="forecast-create-fad">
				<button class="wfm-fab info forecast-create-button" ng-click="displayModal()">
					<i class="mdi mdi-plus"></i>
					<md-tooltip>
						Forecast for all
					</md-tooltip>
				</button>
			</div>
		</div>
	</div>
	<div class="material-block-content">
		<wfm-card-list>
			<wfm-card ng-repeat="workload in workloads">
				<card-header ng-click="getForecastResult(workload)">
					<div>
						<span><b>{{workload.Name}}</b></span>
						<md-progress-circular class="workload-spinner mini-spinner" md-mode="indeterminate" ng-if="workload.ShowProgress"></md-progress-circular>
						<span class="workload-indicator" ng-if="workload.IsSuccess"><md-tooltip>Success</md-tooltip><i class="mdi mdi-check"></i></span>
						<span class="workload-indicator" ng-if="workload.IsFailed"><md-tooltip>{{workload.Message}}</md-tooltip><i class="mdi mdi-close"></i></span>
						<span class="chevron pull-right"><i class="mdi mdi-chevron-right"></i></span>
					</div>
				</card-header>
				<card-body>
					<div ng-if="!workload.forecastResultLoaded" class="wfm-block">
						<md-progress-linear md-mode="indeterminate"></md-progress-linear>
					</div>
					<div ng-if="workload.forecastResultLoaded" class="wfm-block">
						<c3chart bindto-id="{{workload.ChartId}}" chart-data="workload.resultChartData" chart-columns="chartInfo.resultChartDataColumns" chart-x="chartInfo.dataX" show-subchart="true">
							<chart-axes values-x="date" y="vc" y2="vaht,vacw" />
							<chart-axis>
								<chart-axis-x axis-id="date" axis-type="timeseries">
									<chart-axis-x-tick tick-format="%Y-%m-%d" />
								</chart-axis-x>
							</chart-axis>
							<chart-axis>
								<chart-axis-y axis-id="y" axis-position="outer-middle" axis-label="Number of Calls" />
								<chart-axis-y axis-id="y2" axis-position="outer-middle" axis-label="Time Spent" />
							</chart-axis>
						</c3chart>
					</div>
					<div class="pull-right">
						<aside>
							<a class="wfm-btn wfm-btn-invis-default" ng-click="nextStepAdvanced(workload)">{{ 'Advanced' | translate }}</a>
						</aside>
					</div>
				</card-body>
			</wfm-card>
		</wfm-card-list>
	</div>
	<div class="clearfix"></div>
</div>

<div ng-cloak class="modal-box">
	<div ng-cloak ng-if="modalLaunch">
		<div class="modalbg">
			<div class="dialog">
				<div class="modal-header" translate>
					SelectForecastPeriodIntro
				</div>
				<div class="modal-inner-content">
					<div class="wfm-block forecast-period">
						<div class="wfm-datepicker-wrap">
							<div class="sub-header">
								{{'From' | translate}} <span class="startDate">{{period.startDate | date : format}}</span>
							</div>
							<datepicker ng-model="period.startDate" show-weeks="true" custom-class="setRangeClass(date, mode)" class="wfm-datepicker" ng-change="updateEndDate()"></datepicker>
						</div>
						<div class="wfm-datepicker-wrap">
							<div class="sub-header">
								{{'To' | translate}} <span class="endDate">{{period.endDate | date : format}}</span>
							</div>
							<datepicker ng-model="period.endDate" show-weeks="true" min-date="period.startDate" custom-class="setRangeClass(date, mode)" class="wfm-datepicker" ng-change="updateStartDate()"></datepicker>
						</div>
						<div class="alert-warning notice-spacer" ng-if="moreThanOneYear()"><i class='mdi mdi-alert'></i>Forecast period cannot be more than 1 year.</div>
					</div>
				</div>
				<div class="modal-footer">
					<aside>
						<a class="wfm-btn wfm-btn-invis-default" ng-click="cancelModal()">{{ 'Close' | translate }}</a>
						<a class="wfm-btn wfm-btn-invis-primary next-step-all" ng-disabled="disableNextStepAll()" ng-class="{'wfm-btn-invis-disabled': disableNextStepAll()}" ng-click="nextStepAll(period)">{{ 'Forecast' | translate }}</a>
					</aside>
				</div>
			</div>
		</div>
	</div>
</div>

