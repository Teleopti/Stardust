<div>
	<div class="alert-warning notice-spacer" ng-if="isForecastRunning"><i class='mdi mdi-alert'></i> Warning: Forecast is running.</div>
	<div class="row">
		<div class="col-lg-12">
			<h4>Overview</h4>
			<div class="forecast-create-fad">
				<button class="wfm-fab info forecast-create-button" ng-click="displayForecastingModal()">
					<i class="mdi mdi-pencil"></i>
					<md-tooltip>
						Forecast all
					</md-tooltip>
				</button>
			</div>
		</div>
	</div>
	<div class="material-block-content">
		<wfm-card-list>
			<wfm-card ng-repeat="workload in workloads">
				<card-header ng-click="getForecastResult(workload)">
					<div>
						<span><b>{{workload.Name}}</b></span>
						<md-progress-circular class="workload-spinner mini-spinner" md-mode="indeterminate" ng-if="workload.ShowProgress"></md-progress-circular>
						<span class="workload-indicator" ng-if="workload.IsSuccess"><md-tooltip>Success</md-tooltip><i class="mdi mdi-check"></i></span>
						<span class="workload-indicator" ng-if="workload.IsFailed"><md-tooltip>{{workload.Message}}</md-tooltip><i class="mdi mdi-close"></i></span>
						<span class="chevron pull-right"><i class="mdi mdi-chevron-right"></i></span>
					</div>
				</card-header>
				<card-body>
					

					<div ng-if="!workload.forecastResultLoaded" class="wfm-block">
						<md-progress-linear md-mode="indeterminate"></md-progress-linear>
					</div>
					<div ng-show="workload.forecastResultLoaded" class="wfm-block">
						<div id="{{workload.ChartId}}"></div>
					</div>
					<div class="modal-footer">
						<aside>
						<a class="wfm-btn wfm-btn-invis-default" ng-click="nextStepAdvanced(workload)">{{ 'Statistics' | translate }}
							<md-tooltip>
								View more numbers
							</md-tooltip>
						</a>
						<a class="wfm-btn wfm-btn-invis-default" ng-click="displayModal(workload)">
							Forecast
							<md-tooltip>
								Forecast this workload
							</md-tooltip>
						</a>
						</aside>
					</div>
					<div class="pull-right">
						<aside>
							<a class="wfm-btn wfm-btn-invis-default" ng-click="nextStepAdvanced(workload)">{{ 'Add campaign' | translate }}</a>
						</aside>
					</div>
				</card-body>
			</wfm-card>
		</wfm-card-list>
	</div>
	<div class="clearfix"></div>
</div>

<div ng-cloak class="modal-box">
	<div ng-cloak ng-if="modalForecastingLaunch">
		<div class="modalbg">
			<div class="dialog">
				<div class="modal-header" translate>
					SelectForecastPeriodIntro
				</div>
				<div class="modal-inner-content">
					<div class="wfm-block" ng-if="modalForecastingInfo.forecastForAll">
						<h4>Forecast all</h4>
					</div>
					<div class="wfm-block" ng-if="modalForecastingInfo.forecastForOneWorkload">
						<h4>Forecast workload: {{modalInfo.selectedWorkload.Name}}</h4>
					</div>
					<div class="wfm-block forecast-period">
						<div class="wfm-datepicker-wrap">
							<div class="sub-header">
								{{'From' | translate}} <span class="startDate">{{period.startDate | date : format}}</span>
							</div>
							<datepicker ng-model="period.startDate" show-weeks="true" custom-class="setRangeClass(date, mode)" class="wfm-datepicker" ng-change="updateEndDate()"></datepicker>
						</div>
						<div class="wfm-datepicker-wrap">
							<div class="sub-header">
								{{'To' | translate}} <span class="endDate">{{period.endDate | date : format}}</span>
							</div>
							<datepicker ng-model="period.endDate" show-weeks="true" min-date="period.startDate" custom-class="setRangeClass(date, mode)" class="wfm-datepicker" ng-change="updateStartDate()"></datepicker>
						</div>
						<div class="alert-warning notice-spacer" ng-if="moreThanOneYear()"><i class='mdi mdi-alert'></i>Forecast period cannot be more than 1 year.</div>
					</div>
				</div>
				<div class="modal-footer">
					<aside>
						<a class="wfm-btn wfm-btn-invis-default" ng-click="cancelForecastingModal()">{{ 'Close' | translate }}</a>
						<a class="wfm-btn wfm-btn-invis-primary do-forecast" ng-disabled="disableDoForecast()" ng-class="{'wfm-btn-invis-disabled': disableDoForecast()}" ng-click="doForecast(period)">{{ 'Forecast' | translate }}</a>
					</aside>
				</div>
			</div>
		</div>
	</div>
</div>

