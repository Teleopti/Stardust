<div class="rta-view prototype">
	<div class="view-header with-fab with-desc">
		<div class="view-title">
			<div class="pull-left">
				<h1><i class="mdi mdi-alarm"></i>Historical Overview</h1>
			</div>
			<div class="pull-left">
				<button class="wfm-btn wfm-btn-default">Monitor Organization</button>
				<button class="wfm-btn wfm-btn-default">Monitor Agents</button>
				<button class="wfm-btn wfm-btn-primary non-pointer">Review History</button>
			</div>
		</div>
	</div>

	<div class="panel material-depth-1 con-padding">
		<div class="con-row">
			<div class="con-flex wfm-form organization-picker">
				<div class="form-input-wrap">
					<input type="text"
						   placeholder="{{'SelectSitesTeams'}}"
						   (click)="organizationPickerOpen = !organizationPickerOpen"
						   [value]="organizationPickerSelectionText"/>
				</div>

				<div style="position: relative">
					<div class="wfm-dropdown-panel panel material-depth-1 full-padding"
						 style="z-index: 999; position: absolute; width: 100%"
						 [hidden]="!organizationPickerOpen">

						<div class="form-input-wrap filter">
							<input type="text"
								   placeholder="{{'DataFilterThreeDots'}}"
								   [(ngModel)]="organizationPickerSearchTerm"/>
						</div>

						<div>
							<button class="wfm-btn wfm-btn-invis-primary"
									[ngClass]="organizationPickerClearEnabled ? 'wfm-btn-invis-primary' : 'wfm-btn-invis-disabled'"
									(click)="clearOrganizationSelection()">{{'ClearAll'}}
							</button>
							<button class="wfm-btn wfm-btn-invis-primary"
									(click)="closePicker($event)">{{'Close'}}
							</button>
						</div>
						<div *ngFor="let site of sites | search:'Name':organizationPickerSearchTerm">
							<div style="margin: 5px 0">
								<span (click)="site.isExpanded = !site.isExpanded">
									<i class="mdi"
									   [ngClass]="site?.isExpanded ? 'mdi-chevron-up' : 'mdi-chevron-down'"></i>
								</span>
								<input type="checkbox" id="{{site.Name}}" class="rta-checkbox" (click)="site.toggle()"/>
								<label for="{{site.Name}}" class="picker-label">{{site.Name}}</label>
							</div>
							<div style="margin-left: 50px;"
								 [hidden]="!site.isExpanded"
								 *ngFor="let team of site.Teams">
								<input type="checkbox" id="{{team.Name}}" class="rta-checkbox" (click)="team.toggle()"/>
								<label for="{{team.Name}}" class="picker-label">{{team.Name}}</label>
							</div>
						</div>

					</div>
				</div>
			</div>

			<div class="con-flex x3">
			</div>
		</div>
	</div>

	<style>
		.rta-view.prototype .wfm-table {
			table-layout: fixed;
		}

		.rta-view.prototype .cell-header {
			overflow: hidden;
			white-space: nowrap;
			/*font-weight: 700;*/
			width: 30px;
			font-size: 10px;
		}

		.rta-view.prototype .cell {
			overflow: hidden;
			white-space: nowrap;
			width: 30px;
		}

		.rta-view.prototype .cell.late-for-work {
			background-image: linear-gradient(225deg, orange, orange 5px, transparent 5px, transparent);
		}

		.rta-view.prototype .cell .label-red {
			background-color: #EE8F7D;
		}

		.rta-view.prototype .cell .label-orange {
			background-color: #FFC285;
		}

		.rta-view.prototype .cell .label-green {
			background-color: #C2E085;
		}

		.rta-view.prototype .cell.progress-thing {
			padding: 0;
		}

		.rta-view.prototype .cell.progress-thing.late-for-work {
			background-image: linear-gradient(225deg, orange, orange 5px, transparent 5px, transparent);
		}

		.rta-view.prototype .cell.progress-thing .progress-orange {
			background-color: #FFC285;
			height: 3px;
		}

		.rta-view.prototype .cell.progress-thing .progress-red {
			background-color: #EE8F7D;
			height: 3px;
		}

		.rta-view.prototype .cell.progress-thing .progress-green {
			background-color: #C2E085;
			height: 3px;
		}

		.rta-view.prototype .cell .orange-bar {
			background-color: #FFC285;
			height: 10px;
		}

		.rta-view.prototype .cell .red-bar {
			background-color: #EE8F7D;
			height: 10px;
		}

		.rta-view.prototype .cell .green-bar {
			background-color: #C2E085;
			height: 10px;
		}

		.rta-view.prototype .cell.label-thing {
			text-overflow: unset;
			padding-left: 4px;
			padding-top: 4px;
		}

		.rta-view.prototype .cell.label-thing.late-for-work {
			background-image: linear-gradient(225deg, orange, orange 5px, transparent 5px, transparent);
		}

		.rta-view.prototype .cell.smiley-thing {
			text-overflow: unset;
			padding-right: 3px;
			text-align: center;
		}

		.rta-view.prototype .cell.circle-thing {
			padding-left: 3px;
		}

		.rta-view.prototype .cell.circle-thing.late-for-work {
			background-image: linear-gradient(225deg, orange, orange 5px, transparent 5px, transparent);
		}

		.rta-view.prototype .cell .circle {
			font-size: 12px;
			width: 22px;
			height: 22px;
			border: 2px solid;
			border-radius: 50%;
			text-align: center;
			line-height: 19px;
			text-overflow: unset;
			color: #EE8F7D;
			font-size: 75%;
			font-weight: bold;
		}

		.rta-view.prototype .cell .circle-red {
			border-color: #EE8F7D;
			color: #EE8F7D;
		}

		.rta-view.prototype .cell .circle-orange {
			border-color: #FFC285;
			color: #FFC285;
		}

		.rta-view.prototype .cell .circle-green {
			border-color: #C2E085;
			color: #C2E085;
		}

		.rta-view.prototype .wfm-form .rta-checkbox {
			width: 20px;
			height: 20px;
			vertical-align: middle;
		}

		.rta-view.prototype .picker-label {
			margin-left: 8px;
		}

	</style>

	<div class="panel material-depth-1" *ngFor="let group of groupings" style="width: 1000px">
		<div class="card-panel-header-wrapper pointer" [ngStyle]="{'border-left': '10px solid ' + group.Color }"
			 (click)="openCard = !openCard">
			{{group.Name}}
		</div>
		<div class="card-panel-content-wrapper" [hidden]="!openCard">
			<table class="wfm-table">
				<thead>
				<tr>
					<th style="width: 8.5%">Agent</th>
					<th style="width: 12.5%">Site/Team</th>
					<!--<th style="width: 0px" *ngFor="let adherence of group.agentsAdherence[0].Adherence">-->
						<!--{{// adherence.Date}}-->
					<!--</th>-->
					<th style="width: 15%">Adherence</th>
					<th style="width: 15%">Late for work</th>
				</tr>
				</thead>
				<tbody>
				<tr *ngFor="let agent of group.agentsAdherence">
					<td>{{agent.Name}}</td>
					<td>{{agent.Team}}</td>
					<!--<td *ngFor="let percentage of agent.Adherence" class="cell label-thing {{percentage?.WasLateForWork ? 'late-for-work':''}}">-->
						<!--&lt;!&ndash;<div style="background-color: #f1f1f1; width: 75%; float:left; margin-top:5px;">&ndash;&gt;-->
							<!--&lt;!&ndash;<div xclass="red-bar" [ngStyle]="{'background-color': percentage.Color, 'height': '10px', 'width':percentage.AdherencePercentage+'%'}">&ndash;&gt;-->
							<!--&lt;!&ndash;</div>&ndash;&gt;-->
						<!--&lt;!&ndash;</div>&ndash;&gt;-->
						<!--<div class="label" [ngStyle]="{'background-color': percentage.Color}">{{percentage.AdherencePercentage}}</div>-->
						<!--&lt;!&ndash;<div style="width: 10%; margin-left: 6px; float:left;">{{percentage.AdherencePercentage}}%</div>&ndash;&gt;-->
					<!--</td>-->

					<td>
						<div style="background-color: #f1f1f1; width: 75%; float:left; margin-top:5px">
							<div [ngStyle]="{'background-color':agent.PeriodAdherence.Color, 'height':'10px', 'width':agent.PeriodAdherence.Value+'%'}">
							</div>
						</div>
						<div style="width: 10%; margin-left: 6px; float:left;">{{agent.PeriodAdherence.Value}}%</div>
					</td>
					<td>
						<span style="background-color: orange;" class="label pad">{{agent.LateForWork.Count}}</span>
						<span>{{agent.LateForWork.TotalMinutes}} minutes</span>
					</td>
				</tr>
				
				</tbody>
			</table>
		</div>
	</div>

</div>