<div class="view-header with-fab with-desc" ng-cloak>
	<div class="view-title">
		<div class="rta-title-wrapper">
			<h1><i class="mdi mdi-alarm"></i> {{'Agents'|translate}}</h1>
		</div>
		<div class="rta-top-buttons-wrapper">
			<span>
				<button class="wfm-btn wfm-btn-default" ng-click="goToOverview()">{{'Dashboard'|translate}}</button>
				<button class="wfm-btn wfm-btn-primary rta-default-cursor" ng-click="goToSelectItem()">{{'Details'|translate}}</button>
			</span>
		</div>
	</div>
	<div class="fab-wrapper pull-right">
		<button class="wfm-fab material-depth-1" ng-click="pause = !pause">
			<i ng-class="{'mdi mdi-play': pause, 'mdi mdi-pause': !pause}"></i>
			<md-tooltip>{{(pause ? 'Play' : 'Pause')|translate}}</md-tooltip>
		</button>
	</div>
</div>
<div class="con-row">
	<div class="con-flex">
		<span ng-if="pausedAt" class="h4">{{'PausedAt'|translate}} {{pausedAt}}</span>
	</div>
</div>

<div class="con-flex" style="padding-bottom:0">
	<div class="panel material-depth-1">
		<div class="con-row">
			<div class="con-flex">
				<div class="con-row">
					<span class="con-flex">
						<md-autocomplete id="skill-id"
										 ng-disabled="!skillsLoaded"
										 ng-attr-skillsLoaded="{{skillsLoaded}}"
										 class="autocomplete-skill"
										 md-input-id="skill-input"
										 md-selected-item="selectedSkill"
										 md-search-text="searchSkillText"
										 md-selected-item-change="selectedSkillChange(skill)"
										 md-items="skill in querySearch(searchSkillText, skills)"
										 md-item-text="skill.Name"
										 md-min-length="0"
										 placeholder="{{skillsLoaded ? 'SelectSkill' : 'LoadingSkills' | translate}}">
							<md-item-template>
								<span class="rta-skill-item" md-highlight-text="searchSkillText" md-highlight-flags="^i">{{skill.Name}}</span>
					</md-item-template>
					<md-not-found>
						{{'RepViewerNoMoreMatches'|translate}}
					</md-not-found>
					</md-autocomplete>
					</span>
					<span class="con-flex">
						<md-autocomplete id="skill-area-id"
										ng-disabled="!skillAreasLoaded"
										ng-attr-skillAreasLoaded="{{skillAreasLoaded}}"
										class="autocomplete-skillarea"
										md-input-id="skill-area-input"
										md-selected-item="selectedSkillArea"
										md-search-text="searchSkillAreaText"
										md-selected-item-change="selectedSkillAreaChange(skillArea)"
										md-items="skillArea in querySearch(searchSkillAreaText, skillAreas)"
										md-item-text="skillArea.Name"
										md-min-length="0"
										placeholder="{{skillAreasLoaded ? 'SelectSkillArea' : 'LoadingSkillAreas' | translate}}">
							<md-item-template>
								<span class="rta-skill-area-item" md-highlight-text="searchSkillText" md-highlight-flags="^i">{{skillArea.Name}}</span>
					</md-item-template>
					<md-not-found>
						{{'RepViewerNoMoreMatches'|translate}}
					</md-not-found>
					</md-autocomplete>
					</span>
					<span class="con-flex" ng-show="showOrgSelection">
						<md-input-container class="rta-md-input-container" id="organization">
							<label>Select organization</label>
							<md-select ng-model="teamsSelected" class="rta-md-select" multiple md-on-close="goToAgents()">
								<md-optgroup ng-repeat="site in sites" class="rta-option-group">
									<span ng-click="expandSite(site.Id)"><i class="mdi mdi-menu-down" id="col-{{site.Name}}"></i></span>
									<md-checkbox id="{{site.Name}}" ng-model="site.isChecked" ng-value="site.Id" ng-class="site.isMarked ? 'rta-marked-checkbox' : ''">{{site.Name}}</md-checkbox>
									<md-option id="{{team.Name}}" ng-show="isSiteToBeExpanded(site.Id)" ng-selected="teamChecked(site,team)" ng-value="team.Id" ng-repeat="team in site.Teams">{{team.Name}}</md-option>
								</md-optgroup>
							</md-select>
						</md-input-container>
					</span>
				</div>
			</div>
		</div>
	</div>



<div class="panel material-depth-1" ng-show="showOrgSelection">
	<div class="con-row">
		<div class="con-flex">
			<div class="sub-header" ng-show="showBreadcrumb">
				<div>
					<a class="rta-nav-link" href="{{goBackToRootWithUrl}}">{{'RealTimeAdherence'|translate}}</a> /
					<a class="rta-nav-link" ng-if="showPath" href="{{goBackToTeamsWithUrl}}">{{siteName}}</a>
					<span ng-if="!showPath">{{siteName}}</span>
					<span ng-if="showPath">/</span>
					<span>{{teamName}}</span>
				</div>
			</div>
		</div>
	</div>
	<div class="con-row" style="padding-top:10px">
		<div class="con-flex">
			<label class="input-prepend" for="filter-agents">
				<i class="mdi mdi-filter-outline"></i>
				<input id="filter-agents" ng-change="filterData()" ng-model="filterText" placeholder="{{'Search'|translate}}..." type="text">
			</label>
		</div>
		<div class="con-flex">
			<div class="wfm-switch panel-switch line-right">
				<input id="switch1" ng-model="agentsInAlarm" type="checkbox" ng-disabled="pause" />
				<label class="rta-agents-in-alarm-switch" for="switch1" ng-if="agents.length <= maxNumberOfAgents && !isLoading">
					<span class="wfm-switch-label">{{'InAlarm'|translate}}</span>
					<span class="wfm-switch-toggle" ng-class="pause ? 'rta-disabled-switch' : ''"></span>
				</label>
				<span ng-if="agents.length > maxNumberOfAgents">Agents in alarm</span>
			</div>
		</div>
	</div>
	<div class="con-row">
		<div class="con-flex agent-table-wrapper">
			<div class="grid" ng-style="getTableHeight()" ng-if="allGrid && !agentsInAlarm" ui-grid-auto-resize ui-grid-resize-columns ui-grid-disable-animation ui-grid="allGrid"></div>
			<div class="grid" ng-style="getTableHeight()" ng-if="inAlarmGrid && agentsInAlarm" ui-grid-auto-resize ui-grid-resize-columns ui-grid-disable-animation ui-grid="inAlarmGrid"></div>
		</div>
	</div>
	<wfm-right-panel ng-if="agentsInAlarm && !pause" panel-options="rightPanelOptions" style="min-height:400px">
		<h3><i class="mdi mdi-filter-outline"></i>Include agents in states:</h3>
		<div ng-repeat="state in states">
			<div class="wfm-checkbox">
				<label>
					<input type="checkbox" name="checkbox" id="{{state.Id}}" ng-model="state.Selected" />
					<span class="wfm-checkbox-toggle"></span>
					<span class="wfm-checkbox-label rta-deselect-state">{{state.Name}}</span>
				</label>
			</div>
		</div>
	</wfm-right-panel>
</div>
