<div class="permissions">
	<div class="view-header with-desc">
		<div class="view-title">
			<h1><i class="mdi mdi-account-key"></i><span> {{'ManagePermissions'|translate}}</span></h1>
			<p translate>ManagePermissionsIntro</p>
		</div>
	</div>
	<div class="con-row flex-element-fill">
		<div class="con-flex roles">
			<div class="panel material-depth-1">
				<div class="sub-header">
					<h2 translate>Roles</h2>
				</div>
				<form ng-submit="createRole(); reset()" class="full-padding">
					<label for="addRole" class="input-prepend">
						<i class="mdi mdi-plus">
							<md-tooltip>{{'AddRole'|translate}}</md-tooltip>
						</i>
						<input type="text" id="addRole" ng-model="roleName" placeholder="{{'CreateNewRole' | translate}}" class="role-input role"/>
					</label>
				</form>
				<form ng-submit="reset()" class="full-padding">
					<label for="filterRoles" class="input-prepend">
						<i class="mdi mdi-filter-outline"></i>
						<input type="text" id="filterRoles" name="filterRole" ng-model="searchRoles.DescriptionText" placeholder="{{'FilterRoles' | translate}}" />
						<md-tooltip>{{'FilterRoles'|translate}}</md-tooltip>
					</label>
				</form>
				<div class="search-role-results">
					<ul class="wfm-list">
						<li ng-repeat="role in roles | filter:searchRoles" ng-click="showRole(role)" ng-dblclick="doubleClickEdit(editing, role)" selection-model>
							<span ng-if="role.editing===false;" class="list-item-container" ng-class="{'text-truncation': role.editing===false}">{{role.DescriptionText}}</span>
							<span ng-if="role.editing===true;" ng-blur="cancelEdit(role)">
								<form ng-submit="submitRole(role, tempName)" name="editRoleForm" required>
									<input type="text" ng-blur="cancelEdit(role)" ng-model="tempName" placeholder="{{'Name' | translate}}" />
								</form>
							</span>
							<span ng-cloak ng-show="role.Id === selectedRole" ng-if="!role.editing" class="list-dot grow-out"><b class="mdi mdi-check list-mark"></b></span>
							<div ng-show="!role.editing" class="wfm-leave-behind" ng-class="{'hide-list-actions': role.editing===true, 'hide-list-actions-none': role.BuiltIn === true}">
								<span>
									<i ng-click="copyRole(role);" class="mdi mdi-content-copy">
										<md-tooltip>
											{{'Copy' | translate}}
										</md-tooltip>
									</i>
									<i ng-click="doubleClickEdit(editing, role)" class="mdi mdi-pencil">
										<md-tooltip>
											{{'Edit' | translate}}
										</md-tooltip>
									</i>
										<span ng-class="{'myRoleLock': role.IsMyRole}">
									<i ng-click="roleDeleteModal = true" class="mdi mdi-delete">
										</i>
										<md-tooltip ng-hide="role.IsMyRole">
											{{'Delete' | translate}}
										</md-tooltip>
										<md-tooltip ng-show="role.IsMyRole">
											{{'NotAllowed' | translate}}
										</md-tooltip>
									</span>
								</span>
							</div>

							<div ng-cloak class="modal-box">
								<div ng-cloak ng-show="roleDeleteModal">
									<div class="modalbg">
										<div class="dialog-mini">
											<div class="modal-inner-content">
												<h3>{{role.DescriptionText}}</h3> {{'AreYouSureYouWantToDelete'|translate}}
											</div>
											<div class="modal-actions">
												<aside>
													<button ng-click="roleDeleteModal=false" class="wfm-btn wfm-btn-invis-default">{{'Cancel'|translate}}</button>
													<button ng-click="removeRole(role)" class="wfm-btn wfm-btn-invis-primary">{{'Delete'|translate}}</button>
												</aside>
											</div>
										</div>
									</div>
								</div>
							</div>

						</li>
					</ul>
				</div>
			</div>
		</div>
		<div class="con-flex split-3-1 flex-element-fill flex-column" >
			<div class="panel material-depth-1 flex-element-fill flex-column">
				<div class="wfm-slide-tabs tabbed-panel  flex-element-fill flex-column">
					<md-tabs class="flex-element-fill flex-column" md-border-bottom>
						<md-tab label="{{'Functions' | translate}}" ng-show="roleDetails=='functionsAvailable'">
							<div class="functions-container full-padding flex-element-fill flex-column" ng-include="'app/permissions/functions/permissions.functions.html'" ng-controller="RoleFunctionsController"></div>
						</md-tab>
						<md-tab label="{{'Data' | translate}}" ng-show="roleDetails=='dataAvailable'">
							<div class="data-container full-padding flex-element-fill flex-column" ng-include="'app/permissions/data/permissions.data.html'" ng-controller="RoleDataController"></div>
						</md-tab>
					</md-tabs>
				</div>
			</div>
			</div>
	</div>
</div>

<div ng-cloak class="modal-box">
	<div ng-cloak ng-show="multiDeselectFunctionModal">
		<div class="modalbg">
			<div class="dialog-mini">
				<div class="modal-inner-content">
					{{'ConfirmToggleChildPermissions'|translate}}
				</div>
				<div class="modal-actions">
					<aside>
						<button ng-click="closemultiDeselectFunctionModal()" class="wfm-btn wfm-btn-invis-default">{{'Cancel'|translate}}</button>
						<button ng-click="deselectFunctionNodes()" class="wfm-btn wfm-btn-invis-primary">{{'Clear'|translate}}</button>
					</aside>
				</div>
			</div>
		</div>
	</div>
</div>

<div ng-cloak class="modal-box">
	<div ng-cloak ng-show="multiDeselectDataModal">
		<div class="modalbg">
			<div class="dialog-mini">
				<div class="modal-inner-content">
					{{'ConfirmToggleChildPermissions'|translate}}
				</div>
				<div class="modal-actions">
					<aside>
						<button ng-click="closemultiDeselectDataModal()" class="wfm-btn wfm-btn-invis-default">{{'Cancel'|translate}}</button>
						<button ng-click="deselectDataNodes()" class="wfm-btn wfm-btn-invis-primary">{{'Clear'|translate}}</button>
					</aside>
				</div>
			</div>
		</div>
	</div>
</div>
