<div class="view-header with-desc">
  <div class="view-title" ng-if="vm.selectedWorkload.Days.length > 1">
    <h1><i class="mdi mdi-chart-line"></i> {{vm.selectedWorkload.Name}} ({{vm.selectedWorkload.Scenario.Name}})</h1>
    <p>{{'ForecastWorkloadIntro'|translate}}</p>
  </div>
  <div ng-if="vm.selectedWorkload.Days.length < 1">
    <p>No forecast data found for {{vm.selectedWorkload.Name}}, try running a forecast on the selected skill with "{{vm.selectedWorkload.Scenario.Name}}" scenario</p>
    <a ui-sref="forecast"><!-- todo: fix missing data issue -->
      <button type="button" class="wfm-btn wfm-btn-primary" name="button">
        {{'BackToList'|translate}}
      </button>
    </a>
  </div>
</div>

<!--Override/Campaign-->
<form ng-submit="vm.applyCampaign()">
  <div class="con-row animate-show" ng-show="vm.campaignPanel" ng-cloak>
    <div class="con-flex">
      <div class="panel material-depth-1">
        <div class="sub-header">
          <h2>{{'Campaign' | translate}}</h2>
        </div>
        <div class="con-row">
          <div class="con-flex">
            <label for="filter" class="input-icon">
              <i class="mdi mdi-percent">
                <input type="number" required autofocus autocomplete="off" min="1" ng-model="vm.campaignPercentage" placeholder="{{'CampaignCallsPercentSign'|translate}}" >
              </i>
            </label>
          </div>
        </div>
        <div class="con-footer">
          <button class="wfm-btn wfm-btn-invis-default" ng-click="vm.modifyPanelHelper()">{{'Cancel'|translate}}</button>
          <button type="submit" class="wfm-btn wfm-btn-invis-primary">{{'Apply'|translate}}</button>
        </div>
      </div>
    </div>
  </div>
</form>

<form ng-submit="vm.applyOverride(form)" class="wfm-form">
  <div class="con-row animate-show" ng-show="vm.overridePanel" ng-cloak>
    <div class="con-flex">
      <div class="panel material-depth-1">
        <div class="sub-header">
          <h2>{{'AbsenceOverride'|translate}}</h2>
        </div>
        <div class="con-row">
          <div class="con-flex">
            <div class="form-input-wrap">
              <label for="nameId">{{'Calls'|translate}}:</label>
              <input type="number" ng-model="form.overrideTasksValue" name="" value="">
            </div>

            <div class="form-input-wrap">
              <label for="nameId">{{'TalkTime'|translate}}:</label>
              <input type="number" ng-model="form.overrideTalkTimeValue" name="" value="">
            </div>

            <div class="form-input-wrap">
              <label for="nameId">{{'ACW'|translate}}:</label>
              <input type="number" ng-model="form.overrideAfterCallWorkValue" name="" value="">
            </div>
          </div>
        </div>
        <div class="con-footer">
          <button class="wfm-btn wfm-btn-invis-default" ng-click="vm.modifyPanelHelper()">{{'Cancel'|translate}}</button>
          <button type="submit" class="wfm-btn wfm-btn-invis-primary">{{'Apply'|translate}}</button>
        </div>
      </div>
    </div>
  </div>
</form>


<!-- Chart -->
<div class="con-row" ng-if="vm.selectedWorkload.Days.length > 1">
  <div class="con-flex">
    <div class="panel material-depth-1">
      <div class="sub-header">
        <h2>{{'SelectToModify'|translate}}</h2>
        <div class="head-actions panel-menu">
          <div tabindex=0 class="context-menu card-context" ng-click="vm.loadChart(vm.selectedWorkload.ChartId, vm.selectedWorkload.Days)">
            <i class="mdi mdi-sync" ></i>
            <md-tooltip>{{'Refresh'|translate}}</md-tooltip>
          </div>
          <div tabindex=0 ng-show="vm.selectedDayCount.length/9 > 0" class="grow-out context-menu card-context wfm-badge-wrapper">
            <i class="mdi mdi-dots-vertical"></i>
            <wfm-badge badge-model="vm.selectedDayCount.length/9" status="'notice-success'"> </wfm-badge>
            <span class="context-menu-left">
              <ul class="wfm-list">
                <li ng-click="vm.modifyPanelHelper(true)">{{'AbsenceOverride'|translate}}</li>
                <li ng-click="vm.modifyPanelHelper(false)">{{'CreateCampaign'|translate}}</li>
                <li ng-click="vm.clearOverride()">{{'ClearOverride'|translate}}</li>
                <li ng-click="vm.clearCampaign()">{{'ClearCampaign'|translate}}</li>
                <li ng-click="vm.loadChart(vm.selectedWorkload.ChartId, vm.selectedWorkload.Days)">{{'ClearForecastChart'|translate}}</li>
              </ul>
            </span>
            <md-tooltip>{{ 'Modify' | translate }}</md-tooltip>
          </div>
        </div>
      </div>
      <div class="con-row">
        <div class="con-flex">
          <div ng-show="vm.isForecastRunning">
            <md-progress-linear md-mode="indeterminate"></md-progress-linear>
          </div>
        </div>
      </div>
      <div class="con-row" ng-hide="vm.isForecastRunning">
        <div class="con-flex" >
          <forecast-chart  chart-id="vm.selectedWorkload.ChartId" selectable="true" refresh="vm.loadChart" on-click="vm.pointClick" days="vm.selectedWorkload.Days"> </forecast-chart>
        </div>
      </div>
      <!-- <div class="con-footer">
        <button class="wfm-btn wfm-btn-invis-default">Compare</button>
        <button class="wfm-btn wfm-btn-invis-primary">Publish</button>
      </div> -->
    </div>
  </div>
</div>
