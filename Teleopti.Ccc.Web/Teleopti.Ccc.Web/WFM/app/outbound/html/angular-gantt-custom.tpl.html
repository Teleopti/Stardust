<div class="gantt unselectable" ng-cloak gantt-scroll-manager gantt-element-width-listener="ganttElementWidth">
	<gantt-side>
		<gantt-side-background>
		</gantt-side-background>
		<gantt-side-content>
		</gantt-side-content>
		<div gantt-resizer="gantt.side.$element" gantt-resizer-event-topic="side" gantt-resizer-enabled="{{$parent.gantt.options.value('allowSideResizing')}}" resizer-width="sideWidth" class="gantt-resizer">
			<div ng-show="$parent.gantt.options.value('allowSideResizing')" class="gantt-resizer-display"></div>
		</div>
	</gantt-side>
	<div style="height: 60px;">
		<gantt-scrollable-header scrollfix="+10">
			<gantt-header gantt-element-height-listener="$parent.ganttHeaderHeight">
				<gantt-header-columns>
					<div ng-repeat="header in gantt.columnsManager.visibleHeaders track by $index">
						<div class="gantt-header-row" ng-class="{'gantt-header-row-last': $last, 'gantt-header-row-first': $first}">
							<gantt-column-header ng-repeat="column in header"></gantt-column-header>
						</div>
					</div>
				</gantt-header-columns>
			</gantt-header>
		</gantt-scrollable-header>
	</div>
	<gantt-scrollable>
		<gantt-body>
			<gantt-body-background>
				<gantt-row-background ng-repeat="row in gantt.rowsManager.visibleRows track by row.model.id">					
				</gantt-row-background>
			</gantt-body-background>
			<gantt-body-foreground>
				<div class="gantt-current-date-line" ng-show="currentDate === 'line' && gantt.currentDateManager.position >= 0 && gantt.currentDateManager.position <= gantt.width" ng-style="{'left': gantt.currentDateManager.position + 'px' }"></div>
			</gantt-body-foreground>
			<gantt-body-columns>
				<gantt-column ng-repeat="column in gantt.columnsManager.visibleColumns" data-toggle="tooltip" title="{{column.date | sameDay| date : 'shortDate'}}" data-delay='0'>
					<gantt-time-frame ng-repeat="timeFrame in column.visibleTimeFrames"></gantt-time-frame>
				</gantt-column>
			</gantt-body-columns>
			<div ng-if="gantt.columnsManager.visibleColumns == 0" style="background-color: #808080"></div>
			<gantt-body-rows>
				<gantt-timespan ng-repeat="timespan in gantt.timespansManager.timespans track by timespan.model.id" ></gantt-timespan>
				<gantt-row ng-repeat="row in gantt.rowsManager.visibleRows track by row.model.id">				
					<gantt-task ng-if="!row.model.expansion" ng-repeat="task in row.visibleTasks track by task.model.id">
					</gantt-task>
					<div class="gantt-row-expansion" ng-if="row.model.expansion">
						<div class="loading" ng-show="row.model.isLoadingData || row.model.isRefreshingData">
							<md-progress-circular md-mode="indeterminate" style="z-index: 100;"></md-progress-circular>
						</div>
						<div class="clearfix text-center" style="height: 40px;">
							<p class="campaign-message overstaffed-color" ng-if="row.model.campaign.WarningInfo[0].TypeOfRule=='CampaignOverstaff'"><span class="campaign-warning-icon campaign-warning-icon-messagefix">!</span><span translate>CampaignOverstaff</span></p>
							<p class="campaign-message" ng-if="row.model.campaign.WarningInfo[0].TypeOfRule=='CampaignUnderSLA'"><span class="campaign-warning-icon campaign-warning-icon-messagefix">!</span><span translate>CampaignUnderSLA</span></p>
						</div>
						<div class="campaign-chart-wrapper relative" ng-if="!row.model.isLoadingData">
							<campaign-chart campaign="row.model.campaign" dictionary="row.model.campaign.translations" exclude-closed="row.model.campaign.manualPlanswitch"></campaign-chart>
							<campaign-commands-pane campaign="row.model.campaign" selected-dates="row.model.campaign.selectedDates" selected-dates-closed="row.model.campaign.selectedDatesClosed" is-loading="row.model.isRefreshingData" callbacks="row.model.callbacks"></campaign-commands-pane>
						</div>						
					</div>
				</gantt-row>
			</gantt-body-rows>
		</gantt-body>
	</gantt-scrollable>
	<!-- Plugins -->
	<ng-transclude></ng-transclude>
	<!--
	******* Inline templates *******
	You can specify your own templates by either changing the default ones below or by
	adding an attribute template-url="<url to your template>" on the specific element.
	-->
	<!-- Body template -->
	<script type="text/ng-template" id="template/ganttBody.tmpl.html">
		<div ng-transclude class="gantt-body" ng-style="{'width': gantt.width > 0 ? gantt.width +'px' : undefined}"></div>
	</script>
	<!-- Header template -->
	<script type="text/ng-template" id="template/ganttHeader.tmpl.html">
		<div ng-transclude class="gantt-header"
			 ng-show="gantt.columnsManager.columns.length > 0 && gantt.columnsManager.headers.length > 0"></div>
	</script>
	<!-- Side template -->
	<script type="text/ng-template" id="template/ganttSide.tmpl.html">
		<div ng-transclude class="gantt-side" style="width: auto;"></div>
	</script>
	<!-- Side content template-->
	<script type="text/ng-template" id="template/ganttSideContent.tmpl.html">
		<div class="gantt-side-content">
		</div>
	</script>
	<!-- Header columns template -->
	<script type="text/ng-template" id="template/ganttHeaderColumns.tmpl.html">
		<div ng-transclude class="gantt-header-columns"
			 gantt-horizontal-scroll-receiver></div>
	</script>
	<script type="text/ng-template" id="template/ganttColumnHeader.tmpl.html">
		<div class="gantt-column-header" ng-class="{'gantt-column-header-last': $last, 'gantt-column-header-first': $first, 'gantt-column-header-odd': $index % 2 == 1, 'gantt-column-header-even': $index % 2 == 0}">
			<gantt-column-header-content label-content="{{::column.label}}" label-unit="{{::column.unit}}"></gantt-column-header-content>
		</div>		
	</script>
	<!-- Body background template -->
	<script type="text/ng-template" id="template/ganttBodyBackground.tmpl.html">
		<div ng-transclude class="gantt-body-background"></div>
	</script>
	<!-- Body foreground template -->
	<script type="text/ng-template" id="template/ganttBodyForeground.tmpl.html">
		<div ng-transclude class="gantt-body-foreground"></div>
	</script>
	<!-- Body columns template -->
	<script type="text/ng-template" id="template/ganttBodyColumns.tmpl.html">
		<div ng-transclude class="gantt-body-columns"></div>
	</script>
	<script type="text/ng-template" id="template/ganttColumn.tmpl.html">
		<div ng-transclude class="gantt-column gantt-foreground-col" ng-class="{'gantt-column-last': $last, 'gantt-column-first': $first}"></div>
	</script>
	<script type="text/ng-template" id="template/ganttTimeFrame.tmpl.html">
		<div class="gantt-timeframe"></div>
	</script>
	<!-- Scrollable template -->
	<script type="text/ng-template" id="template/ganttScrollable.tmpl.html">
		<div ng-transclude class="gantt-scrollable" gantt-scroll-sender ng-style="getScrollableCss()"></div>
	</script>
	<script type="text/ng-template" id="template/ganttScrollableHeader.tmpl.html">
		<div ng-transclude class="gantt-scrollable-header" ng-style="getScrollableHeaderCss()"></div>
	</script>
	<!-- Rows template -->
	<script type="text/ng-template" id="template/ganttBodyRows.tmpl.html">
		<div ng-transclude class="gantt-body-rows"></div>
	</script>
	<!-- Timespan template -->
	<script type="text/ng-template" id="template/ganttTimespan.tmpl.html">
		<div class="gantt-timespan" ng-class="timespan.model.classes">
		</div>
	</script>
	<!-- Task template -->
	<script type="text/ng-template" id="template/ganttTask.tmpl.html">
		<div class="gantt-task" ng-class="task.model.classes">
			<gantt-task-background></gantt-task-background>
			<gantt-task-foreground></gantt-task-foreground>
			<gantt-task-content></gantt-task-content>
		</div>
	</script>
	<script type="text/ng-template" id="template/ganttTaskBackground.tmpl.html">
		<div class="gantt-task-background" ng-style="{'background-color': task.model.color}"></div>
	</script>
	<script type="text/ng-template" id="template/ganttTaskForeground.tmpl.html">
		<div class="gantt-task-foreground">
			<div ng-if="task.truncatedRight" class="gantt-task-truncated-right"><i class="mdi mdi-chevron-right"></i></div>
			<div ng-if="task.truncatedLeft" class="gantt-task-truncated-left"><i class="mdi mdi-chevron-left"></i></div>
		</div>
	</script>
	<!-- Task content template -->
	<script type="text/ng-template" id="template/ganttTaskContent.tmpl.html">
		<div class="gantt-task-content" ng-class="{'campaign-visualization-toggle' : !scope.isRefreshingGantt}" unselectable="on" ng-click="scope.campaignClicked($event, row.model, task.model)"><span unselectable="on" gantt-bind-compile-html="getTaskContent()" /></div>
	</script>

	<!-- Row background template -->
	<script type="text/ng-template" id="template/ganttRowBackground.tmpl.html">
		<div class="gantt-row gantt-row-height"
			 ng-class="row.model.classes"
			 ng-class-odd="'gantt-row-odd'"
			 ng-class-even="'gantt-row-even'"
			 ng-style="{'height': row.model.height}">
			<div class="gantt-row-background"
				 ng-style="{'background-color': row.model.color}"
				 ng-class="{'gantt-row-expanded' : row.model.expanded }">		
			</div>
		</div>
	</script>
	<!-- Row template -->
	<script type="text/ng-template" id="template/ganttRow.tmpl.html">
		<div class="gantt-row gantt-row-height"
			 ng-class="row.model.classes"
			 ng-class-odd="'gantt-row-odd'"
			 ng-class-even="'gantt-row-even'"
			 ng-style="{'height': row.model.height}">
			<div ng-transclude class="gantt-row-content"></div>
		</div>
	</script>
	<!-- Side background template -->
    <script type="text/ng-template" id="template/ganttSideBackground.tmpl.html">
		<div class="gantt-side-background">
			<div style="height:60px">
				<div class="gantt-side-background-header" ng-style="{height: $parent.ganttHeaderHeight + 'px'}">
					<div ng-show="$parent.ganttHeaderHeight" class="gantt-header-row gantt-side-header-row"></div>
				</div>
			</div>
			<div class="gantt-side-background-body" ng-style="getMaxHeightCss()">
				<div gantt-vertical-scroll-receiver>
					<div class="gantt-row gantt-row-height "
						 ng-class-odd="'gantt-row-odd'"
						 ng-class-even="'gantt-row-even'"						
						 ng-repeat="row in gantt.rowsManager.visibleRows track by row.model.id"
						 ng-style="{'height': row.model.height}">
												
						<div gantt-row-label class="gantt-row-label gantt-row-background"							
							 ng-style="{'background-color': row.model.color}"
							 ng-class="{'gnatt-row-expanded' : row.model.expanded}"
							 ng-if="!row.model.expansion"
							 >
						</div>
						<div class="gantt-row-background gantt-row-expansion" ng-if="row.model.expansion">
							<!--<md-button ng-click="row.model.collapse($event, $index)" aria-label="Back"><i class="mdi mdi-rewind mdi-rotate-90"></i></md-button>-->
						</div>
					</div>
				</div>
			</div>
		</div>
	</script>

	<!-- Tooltips template -->
    <script type="text/ng-template" id="plugins/tooltips/tooltip.tmpl.html">
		<div ng-cloak
			 class="gantt-task-info z-index-2000"
			 ng-show="displayed"
			 ng-class="isRightAligned ? 'gantt-task-infoArrowR' : 'gantt-task-infoArrow'"
			 ng-style="{top: taskRect.top + 'px', marginTop: -elementHeight - 8 + 'px'}">
			<div><strong>{{ task.model.campaignName }}</strong></div>
			<div class="gantt-task-info-content">				
				{{ task.model.from | sameDay | date:'shortDate' }} - {{ task.model.to | decreaseOneDay| date:'shortDate'  }}		
			</div>
		</div>
	</script>
	<!-- sideContentTable template -->
<script type="text/ng-template" id="plugins/table/sideContentTable.tmpl.html">
		<div class="gantt-side-content-table">
			<div class="gantt-table-column {{getClass()}}" ng-repeat="column in pluginScope.columns" ng-controller="TableColumnController">
				<div style="height:60px;">
					<div class="gantt-table-header" ng-style="{height: ganttHeaderHeight + 'px'}">
						<div ng-show="ganttHeaderHeight" class="gantt-row-label-header gantt-row-label gantt-table-row gantt-table-header-row">
							<span class="gantt-label-text" gantt-bind-compile-html="getHeaderContent()" />
						</div>
					</div>
				</div>
				<div class="gantt-table-content" ng-style="getMaxHeightCss()">
					<div gantt-vertical-scroll-receiver>
						<div class="gantt-table-row" ng-repeat="row in gantt.rowsManager.visibleRows track by row.model.id" ng-controller="TableColumnRowController"  >
							<div gantt-row-label class="gantt-row-label gantt-row-height enhanced-gantt-header" ng-class="row.model.ClassesEnhancedHeader" ng-style="{'height': row.model.height}">
								<div class="gantt-valign-container" ng-class="{'campaign-visualization-toggle' : !scope.isRefreshingGantt}" ng-click="scope.campaignClicked($event, row.model, task.model)">
									<div class="gantt-valign-content" ng-class="{'gantt-row-expansion' : row.model.expansion}">
										<span class="gantt-label-text" ng-class="row.model.campaignNameClass" gantt-bind-compile-html="getRowContent()"></span>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</script>
</div>
