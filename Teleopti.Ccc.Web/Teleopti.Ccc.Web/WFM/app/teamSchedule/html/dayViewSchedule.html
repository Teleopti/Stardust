<div class="view-header">
	<div class="view-title">
		<h1>
			<i class="mdi mdi-account-multiple"></i>
			<span ng-show="vm.searchEnabled" translate>DayView</span>
			<span ng-show="!vm.searchEnabled" translate>ModifySchedule</span>
		</h1>
	</div>
</div>

<div class="team-schedule panel wfm-block material-depth-1" ng-click="vm.showDatePicker && (vm.showDatePicker = false)" wait-for="vm.boostrap">
	<div class="teamschedule-header" layout="row">
		<div class="leftside-part">

			<favorite-search ng-if="vm.toggles.SaveFavoriteSearchesEnabled && vm.searchEnabled" 
							 apply-favorite="vm.applyFavorite(teamIds, searchTerm)" 
							 get-search="vm.getSearch()" 
							 on-init-async="vm.onFavoriteSearchInitDefer"></favorite-search>

			<organization-picker ng-if="vm.toggles.DisplayScheduleOnBusinessHierachyEnabled && vm.searchEnabled" 
								 date="vm.scheduleDate" 
								 class="organization-picker-container inline-block" 
								 on-init-async="vm.onSelectedTeamsInitDefer" 
								 on-pick="vm.onSelectedTeamsChanged(teams)"
								 preselected-team-ids="vm.selectedTeamIds"></organization-picker>

			<span class="people-search-container inline-block" ng-if="vm.searchEnabled">
				<wfm-multiple-search-input search-options="vm.searchOptions" search-callback="vm.onKeyWordInSearchInputChanged"></wfm-multiple-search-input>
			</span>

			<span class="datepicker-container" ng-click="$event.stopPropagation()">
				<team-schedule-datepicker selected-date="vm.scheduleDate" status="vm.showDatePicker" on-date-change="vm.onScheduleDateChanged()" class="inline-block"></team-schedule-datepicker>
			</span>

			<view-changer ng-if="vm.toggles.WeekViewEnabled && vm.searchEnabled" selected-date="vm.scheduleDate" keyword="vm.searchOptions.keyword" selected-team-ids="vm.selectedTeamIds"></view-changer>
		</div>

		<timezone-picker available-timezones="vm.availableTimezones" on-pick="vm.changeTimezone(timezone)" ng-if="vm.toggles.ViewScheduleOnTimezoneEnabled"></timezone-picker>

		<div class="warning-container" ng-if="vm.toggles.ShowValidationWarnings">
			<div id="show-warnings" class="wfm-switch inline-block">
				<input type="checkbox" id="validateWarning" ng-model="vm.cmdConfigurations.validateWarningToggle" ng-change="vm.checkValidationWarningForCurrentPage()"/>
				<label for="validateWarning">
					<span class="wfm-switch-label" translate>ShowWarnings</span>
					<span class="wfm-switch-toggle"></span>
				</label>
			</div>
		</div>

		<div class="rightside-part">
			<div class="wfm-switch" ng-if="vm.toggles.RemoveAbsenceEnabled && vm.searchEnabled">
				<input type="checkbox" id="switchAbsence" ng-model="vm.onlyLoadScheduleWithAbsence" ng-change="vm.toggleShowAbsenceOnly()"/>
				<label for="switchAbsence">
					<span class="wfm-switch-label" translate>ShowOnlyAbsence</span>
					<span class="wfm-switch-toggle"></span>
				</label>
			</div>

			<span class="settings-container inline-block cursor-pointer" ng-if="vm.toggles.ShowValidationWarnings && vm.toggles.FilterValidationWarningsEnabled" ng-click="vm.openSettingsPanel()">
				<i class="mdi mdi-settings"></i>
			</span>

			<teamschedule-command-menu class="teamschedule-command" configurations="vm.cmdConfigurations" trigger-command="vm.triggerCommand(label, needToOpenSidePanel)"></teamschedule-command-menu>
		</div>
	</div>
	<div class="con-row teamschedule-body relative">
		<div class="big-table-wrapper relative">
			<div class="alert-warning notice-spacer" ng-if="vm.total > 500">
				<i class='mdi mdi-alert'></i>{{'TooManyResultsForSearchKeywords'|translate}}
			</div>
			<md-progress-linear ng-if="vm.isLoading" md-mode="indeterminate"></md-progress-linear>
			<schedule-table ng-show="vm.scheduleFullyLoaded"
							select-mode="vm.scheduleTableSelectMode"
							selected-date="vm.scheduleDate"
							show-warnings="vm.cmdConfigurations.validateWarningToggle"
							cmd-configurations="vm.cmdConfigurations"
							selected-timezone="vm.currentTimezone"
							pagination-options="vm.paginationOptions"							
							/>
		</div>

		<teamschedule-command-container date="vm.scheduleDate"
										timezone="vm.currentTimezone"
										action-callback="vm.commonCommandCallback(trackId, personIds)"
										configurations="vm.cmdConfigurations" on-ready="vm.onCommandContainerReady()">
		</teamschedule-command-container>

		<md-sidenav class="md-sidenav-right md-whiteframe-z2" md-component-id="teamschedule-settings-container">
			<settings></settings>
		</md-sidenav>

	</div>

	<schedule-change-notifier on-notification="vm.onPersonScheduleChanged"
							  schedule-date="vm.scheduleDate" 
							  last-command-track-id="vm.lastCommandTrackId"
							  ng-if="vm.toggles.SeeScheduleChangesByOthers"></schedule-change-notifier>	

	<div class="con-footer teamschedule-footer">
		<div class="select-all inline-block" ng-show="vm.selectAllVisible()" ng-click="vm.selectAllForAllPages()">
			<a href="javascript: void(0);"> {{'SelectAllPeopleInEveryPage' | translate}}</a>
		</div>
		<div class="select-all inline-block" ng-show="vm.hasSelectedAllPeople()" ng-click="vm.unselectAllForAllPages()">
			<a href="javascript: void(0);"> {{'UnselectAllPeopleInEveryPage' | translate}}</a>
		</div>

		<div class="inline-block" ng-if="vm.paginationOptions.totalPages > 0">
			<md-select class="page-size-selector inline-block" ng-if="vm.toggles.SelectAgentsPerPageEnabled" ng-model="vm.paginationOptions.pageSize" ng-change="vm.onPageSizeSelectorChange()" aria-label="page size">
				<md-option ng-repeat="option in vm.agentsPerPageSelection" ng-value="option">{{option}}</md-option>
			</md-select>
			<wfm-pagination pagination-options="vm.paginationOptions" get-data-for-page-callback="vm.loadSchedules"></wfm-pagination>
		</div>
	</div>
</div>
