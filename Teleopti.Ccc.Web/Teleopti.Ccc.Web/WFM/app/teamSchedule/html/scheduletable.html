<table class="table" ng-if="vm.scheduleVm.Schedules.length > 0" id="team-schedule">
	<thead>
	<tr class="person">
		<th class="person-name-column">
			<div class="wfm-checkbox" ng-if="::vm.selectMode">
				<label>
					<input type="checkbox" ng-model="vm.toggleAllInCurrentPage" ng-change="vm.updateAllSelectionInCurrentPage(vm.toggleAllInCurrentPage)">
					<span class="wfm-checkbox-toggle"></span>
					<span class="wfm-checkbox-label person-name-text inline-block">{{'AgentName' | translate}}</span>
				</label>
			</div>
			<label><sort-agent class="pull-right" on-change="ctrl.onUpdate()"></sort-agent></label>
			<div ng-hide="::vm.selectMode" class="wfm-checkbox-label nowrap">{{'AgentName' | translate}}</div>
		</th>
		<th class="shift-category-cell-header"></th>
		<th id="time-line-container" class="schedule schedule-column">
			<time-line ng-if="vm.scheduleVm.Schedules.length > 0" times="vm.scheduleVm.TimeLine.HourPoints" schedule-count="vm.scheduleVm.Schedules.length"></time-line>
		</th>
		<th class="right-border-empty"></th>
		<th class="schedule-note-column"></th>
		<th class="contract-time-header contract-time-column">{{'ContractTime' | translate}}</th>
	</tr>
	</thead>
	<tbody>
	<tr ng-repeat="personSchedule in vm.scheduleVm.Schedules" ng-click="vm.togglePerson(personSchedule, $event)">
		<td class="person-name-column">
			<div class="wfm-checkbox" ng-show="::vm.selectMode">
				<label>
					<input type="checkbox" ng-model="personSchedule.IsSelected" ng-change="vm.updatePersonSelection(personSchedule)">
					<span class="wfm-checkbox-toggle"></span>
					<span class="wfm-checkbox-label person-name-text inline-block">{{::personSchedule.Name}} <span class="timezone-tip" ng-if="vm.selectedTimezone && personSchedule.Timezone.IanaId !== vm.selectedTimezone"><i class="mdi mdi-earth"></i></span></span>
				</label>
				<md-tooltip md-direction="right" ng-if="vm.selectedTimezone && personSchedule.Timezone.IanaId !== vm.selectedTimezone">
					{{::personSchedule.Timezone.DisplayName}}
				</md-tooltip>
			</div>

			<div class="person-name-text inline-block" ng-hide="::vm.selectMode">{{::personSchedule.Name}}</div>

			<span class="validate-warning" ng-if="vm.showWarnings">
				<span ng-if="vm.checkIsLoadedValidationForPerson(personSchedule.PersonId) &&
				vm.checkBusinessRulesWarningMessage(personSchedule.PersonId).length > 0">
					<span class="warning-icon"><i class="mdi mdi-account-alert"></i></span>
					<md-tooltip class="multiline-tooltip max-width-600" md-direction="right">
						<span ng-bind-html="::vm.checkBusinessRulesWarningMessage(personSchedule.PersonId) | br"></span>
					</md-tooltip>
				</span>
				<md-progress-circular md-mode="indeterminate" md-diameter="15" ng-if="!vm.checkIsLoadedValidationForPerson(personSchedule.PersonId)"></md-progress-circular>
			</span>
		</td>
		<td class="shift-category-cell" ng-click="personSchedule.ShiftCategory.Name && vm.modifyShiftCategoryForAgent($event, personSchedule)" ng-style="{cursor: (personSchedule.ShiftCategory.Name ? 'pointer' : 'default')}">
			<span id="name" class="inline-block" ng-if="::personSchedule.ShiftCategory.Name" ng-style="{background: personSchedule.ShiftCategory.DisplayColor, color: personSchedule.ShiftCategory.ContrastColor}">
					{{::personSchedule.ShiftCategory.ShortName}}
				</span>
			<md-tooltip md-direction="right" ng-if="::personSchedule.ShiftCategory.Name">{{::personSchedule.ShiftCategory.Name}}</md-tooltip>
		</td>
		<td class="schedule schedule-column">
			<div class="relative time-line-for">
				<span class="dayoff absolute" ng-repeat="dayOff in ::personSchedule.DayOffs" ng-if="personSchedule.DayOffs.length > 0 && dayOff.Length > 0"
						  ng-style="{left: dayOff.StartPosition + '%', width: dayOff.Length + '%'}">
						<md-tooltip ng-if="dayOff.DayOffName !=''">{{::dayOff.DayOffName}}</md-tooltip>
					</span>
				<div class="shift" ng-repeat="shift in ::personSchedule.Shifts">
					<div class="layer absolute floatleft selectable projection-layer" projection-name="{{::projection.Description}}" ng-repeat="projection in ::shift.Projections"
						 ng-style="{left: projection.StartPosition + '%', width: projection.Length + '%', backgroundColor: projection.Color}"
						 ng-class="{overtimeLight: projection.IsOvertime && projection.UseLighterBorder, overtimeDark: projection.IsOvertime && !projection.UseLighterBorder,
							 personAbsence:projection.ParentPersonAbsences !== null, noneSelected:vm.totalSelectedProjections() == 0 && !projection.IsOvertime,
							 hasSelected:vm.totalSelectedProjections() != 0 && !projection.IsOvertime, selected:projection.Selected, lighterBorder: projection.UseLighterBorder, unselectable: !vm.canToggleSelection(projection, vm.selectedDate),
							 sameTypeAsLast: projection.SameTypeAsLast}"
						 ng-click="vm.ToggleProjectionSelection(projection, vm.selectedDate)">
						<md-tooltip class="multiline-tooltip layer-summary">
							<div>{{::projection.Description}}</div>
							<div>{{::projection.TimeSpan()}}</div>
						</md-tooltip>
					</div>
				</div>
				<div ng-if="vm.hasHiddenScheduleAtStart(personSchedule)" class="start-ellipsis"><i class="mdi mdi-chevron-double-left white-color-text"></i></div>
				<div ng-if="vm.hasHiddenScheduleAtEnd(personSchedule)" class="end-ellipsis"><i class="mdi mdi-chevron-double-right"></i></div>
			</div>
		</td>
		<td class="right-border-empty"></td>
		<td class="schedule-note-column" ng-click="vm.editScheduleNote(personSchedule.PersonId)">
			<span ng-class="{noComment:!vm.getScheduleNoteForPerson(personSchedule.PersonId)}"><i class="mdi mdi-comment"></i></span>
			<md-tooltip class="multiline-tooltip max-width-600" md-direction="left" ng-if="vm.getScheduleNoteForPerson(personSchedule.PersonId) && vm.getScheduleNoteForPerson(personSchedule.PersonId).length > 0">
				{{vm.getScheduleNoteForPerson(personSchedule.PersonId)}}
			</md-tooltip>
		</td>
		<td class="contract-time contract-time-column">{{::personSchedule.ContractTime}}</td>
	</tr>
	</tbody>
</table>
<note-editor ng-if="vm.noteEditorInputOption && vm.noteEditorInputOption.showEditor" note-input-option="vm.noteEditorInputOption" tabindex="205"></note-editor>
