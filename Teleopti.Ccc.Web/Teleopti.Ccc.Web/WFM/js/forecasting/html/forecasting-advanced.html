<div class="view-header with-desc">
	<div class="view-title">
		<h1><i class="mdi mdi-chart-line"></i>
			{{ 'Statistics' | translate }}
			<span ng-if="!evaluationLoading && !noHistoricalDataForForecasting">- {{workloadName}}</span>
		</h1>
		<p>{{'StatisticsIntro'|translate}}</p>
	</div>
</div>

<div class="con-row">
	<div class="con-flex">
		<div class="panel material-depth-1">
			<div class="sub-header">
				<h2>{{ 'ForecastMethod' | translate }}</h2>
				<div class="head-actions panel-menu" ng-click="infoText = !infoText">
					<div tabindex=0 class="context-menu card-context">
						<i ng-if="infoText" class="mdi mdi-information"></i>
						<i ng-if="!infoText" class="mdi mdi-information-outline"></i>
					</div>
					<md-tooltip>{{'Information'|translate}}</md-tooltip>
				</div>
			</div>
			<div ng-include="'first-forecast-tab.html'" ng-init="init()"></div>
		</div>
	</div>
</div>

<div class="con-row">
	<div class="con-flex">
		<div class="panel material-depth-1">
			<div class="sub-header">
				<h2>{{'Outliers'|translate}}</h2>
			</div>
			<div ng-include="'second-forecast-tab.html'"></div>
		</div>
	</div>
</div>

<script type="text/ng-template" id="first-forecast-tab.html">
	<div class="con-row" ng-if="evaluationLoading && queueStatisticsLoading">
		<div class="con-flex">
			<p>{{'InitializingChartThreeDots'|translate}}</p>
			<md-progress-linear md-mode="indeterminate"></md-progress-linear>
		</div>
	</div>

	<div class="alert-warning notice-spacer" ng-show="noHistoricalDataForForecasting"><i class='mdi mdi-alert'></i> Warning: There is no historical data available for forecasting.</div>

	<div ng-if="!evaluationLoading && !noHistoricalDataForForecasting">
		<div class="con-row animate-show" ng-show="infoText">
			<div class="con-flex">
				<p>
					This chart shows how well a <i>Forecast Method</i> matches last years <i>Queue Statistics</i> for workload <b>{{workloadName}}</b>. Out of several tested forecast methods
					this one was the most accurate. <br>The chosen forecast method is based on a period of queue statistics prior to the timeframe in the chart and will be used in the upcoming
					forecast for workload <b>{{workloadName}}</b>.
					Historical data from <b>{{ForecastMethodRecommended.PeriodUsedToEvaluateStart | date : shortDate}}</b> to <b>{{ForecastMethodRecommended.PeriodUsedToEvaluateEnd | date : shortDate}}</b> is used to evaluate forecast methods on the period from <b>{{ForecastMethodRecommended.PeriodEvaluateOnStart | date : shortDate}}</b> to <b>{{ForecastMethodRecommended.PeriodEvaluateOnEnd | date : shortDate}}</b>.
				</p>
			</div>
		</div>
		<div class="con-row">
			<div class="con-flex">
				<c3chart class="wfm-chart" bindto-id="evaluationChart" chart-data="evaluationChartData" chart-columns="chartInfo.evaluationChartDataColumns" chart-x="chartInfo.dataX" show-subchart="true">
					<chart-axis>
						<chart-axis-x axis-id="date" axis-type="timeseries">
							<chart-axis-x-tick tick-format-function="tickFormat" />
						</chart-axis-x>
					</chart-axis>
					<chart-axis>
						<chart-axis-y axis-id="y" axis-position="outer-middle"/>
					</chart-axis>
				</c3chart>
			</div>
		</div>
	</div>
</script>

<script type="text/ng-template" id="second-forecast-tab.html">
	<div ng-if="queueStatisticsLoading" class="con-row">
		<div class="con-flex">
			<p>{{'InitializingChartThreeDots'|translate}}</p>
			<md-progress-linear md-mode="indeterminate"></md-progress-linear>
		</div>
	</div>

	<div class="alert-warning notice-spacer" ng-show="noHistoricalDataForForecasting"><i class='mdi mdi-alert'></i> {{'WarningNoHistor√≠calData'|translate}}</div>

	<div ng-if="!queueStatisticsLoading && !noHistoricalDataForForecasting">
		<div class="con-row">
			<div class="con-flex">
				<c3chart class="wfm-chart" bindto-id="queueStatisticsChart" chart-data="queueStatisticsChartData" chart-columns="chartInfo.queueStatisticsChartDataColumns" chart-x="chartInfo.dataX" show-subchart="true">
					<chart-axis>
						<chart-axis-x axis-id="date" axis-type="timeseries">
							<chart-axis-x-tick tick-format-function="tickFormat" /></chart-axis-x>
						</chart-axis>
						<chart-axis>
							<chart-axis-y axis-id="y" axis-position="outer-middle" /></chart-axis>
						</c3chart>
					</div>
				</div>
			</div>
		</script>
