
<div ui-view>
	<div class="view-header">
		<div class="view-title">
			<h1><i class="mdi mdi-compass-outline"></i> {{'Intraday'|translate}}</h1>
			<p class="con-flex">Here you monitor intraday values, start by selecting either a skill or your area</p>
		</div>
		<div class="fab-wrapper" ng-if="HasPermissionToModifySkillArea">
			<button class="skill-area-create wfm-fab  material-depth-1" ng-click="configMode()">
				<i class="mdi mdi-plus"></i>
				<md-tooltip>Add new area</md-tooltip>
			</button>
		</div>
	</div>

	<div class="con-row">
		<div class="con-flex">
			<div class="panel con-flex material-depth-1">
				<div class="con-row">
					<span class="con-flex">
						<md-autocomplete id="skill-id"
											  class="autocomplete-skill"
											  md-selected-item="selectedSkill"
											  md-search-text="searchSkillText"
											  md-selected-item-change="selectedSkillChange(skill)"
											  md-items="skill in querySearch(searchSkillText, skills)"
											  md-item-text="skill.Name"
											  md-min-length="0"
											  placeholder="Select skill">
							<md-item-template>
								<span md-highlight-text="searchSkillText" md-highlight-flags="^i">{{skill.Name}}</span>
							</md-item-template>
							<md-not-found>
								No skills matching "{{searchSkillText}}" were found.
							</md-not-found>
						</md-autocomplete>
					</span>
					<span class="con-flex ">
						<md-autocomplete id="skill-area-id"
											  class="autocomplete-skillarea"
											  md-input-id="skill-area-input"
											  md-selected-item="selectedSkillArea"
											  md-search-text="searchSkillAreaText"
											  md-selected-item-change="selectedSkillAreaChange(skillArea)"
											  md-items="skillArea in querySearch(searchSkillAreaText, skillAreas)"
											  md-item-text="skillArea.Name"
											  md-min-length="0"
											  placeholder="Select skill area">
							<md-item-template>
								<span md-highlight-text="searchSkillAreaText" md-highlight-flags="^i">{{skillArea.Name}}</span>
							</md-item-template>
							<md-not-found>
								No skill areas matching "{{searchSkillAreaText}}" were found.
							</md-not-found>
						</md-autocomplete>
					</span>
					<div class="hide-on-ie con-flex split-1-2"></div>
					<div class="line-right last-time">
						<span ng-show="selectedSkill.Name">
							<span class="cursor-pointer">
								{{latestStatsTime}} <i class="mdi mdi-clock"></i>
								<md-tooltip>Last updated</md-tooltip>
							</span>
						</span>

						<span ng-show="selectedSkillArea.Name">
							<span class="cursor-pointer">
								{{latestStatsTime}} <i class="mdi mdi-clock"></i>
								<md-tooltip>Last updated</md-tooltip>
							</span>
						</span>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="con-row intraday-monitor-item" ng-if="selectedSkillArea.Name">
		<div class="con-flex">
			<div class="panel material-depth-1">
				<div class="sub-header">
					<h2 class="skill-list-header"><b>{{ selectedSkillArea.Name }}</b> contains <b>{{selectedSkillArea.Skills.length}}</b> skills</h2>
					<div class="head-actions panel-menu">
						<div tabindex=0 class="context-menu card-context">
							<i class="skill-area-options mdi mdi-dots-vertical"></i>
							<span class="context-menu-left">
								<ul class="wfm-list">
									<li ng-click="showIncluded=!showIncluded">
										<i ng-hide="showIncluded" class="mdi mdi-eye"></i>
										<i ng-show="showIncluded" class="mdi mdi-eye-off"></i>
										included skills
									</li>
									<li ng-click='toggleModal()'><i class="skill-area-delete mdi mdi-delete"></i>Delete this area</li>
								</ul>
							</span>
						</div>
					</div>
				</div>
				<div ng-hide="showIncluded" class="animate-show con-row">
					<div class="con-flex">
						<div class="unrelated-filters" ng-repeat="skill in selectedSkillArea.Skills | orderBy : Name">
							<span class="pointer" ng-click="openSkillFromArea(skill)">
								<span class="filter-handle"></span>
								<span class="filter-chip">{{skill.Name}}</span>
								<span>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="con-row">
	<div class="con-flex" ng-show="!HasMonitorData">
		<div class="panel full-padding material-depth-1" ng-hide="!selectedSkillArea.Name && !selectedSkill.Name">
				<div class="wfm-slide-tabs tabbed-panel">
					<md-content class="md-padding">
						<md-tabs md-dynamic-height md-border-bottom md-selected="selectedIndex">
							<md-tab label="Incoming traffic">
								<md-content class="md-padding">
									<div class="con-row">
										<div class="con-flex">
											<h2>Incoming traffic</h2>
										</div>
									</div>
									<div class="con-row">
										<div class="con-flex">
											<c3chart bindto-id="chart3">
												<chart-column column-id="x"
																  column-values="period 10,period 20,period 30,period 40,period 50,period 60" />
												<chart-column column-id="data1"
																  column-name="Data 1"
																  column-color="red"
																  column-values="30,200,100,400,150,250"
																  column-type="line" />
												<chart-column column-id="data2"
																  column-name="Data 2"
																  column-color="green"
																  column-values="50,20,10,40,15,25"
																  column-type="line" />
												<chart-column column-id="data3"
																  column-name="Data 3"
																  column-color="#000000"
																  column-values="{{dataSet}}"
																  column-type="line" />
												<chart-axes values-x="x" y="data1,data3" y2="data2" />

												<chart-axis>
													<chart-axis-x axis-position="outer-center"
																	  axis-label="Number by 10"
																	  axis-type="category">
													</chart-axis-x>
													<chart-axis-y axis-id="y"
																	  axis-position="outer-right"
																	  axis-label="Calls"
																	  padding-top="100"
																	  padding-bottom="0"
																	  range-min="0" />
													<chart-axis-y axis-id="y2"
																	  axis-position="outer-right"
																	  axis-label="AHT"
																	  padding-top="10"
																	  padding-bottom="0"
																	  range-max="100"
																	  range-min="0" />
												</chart-axis>
											</c3chart>
										</div>
									</div>
								</md-content>
							</md-tab>
						</md-tabs>
					</md-content>
				</div>
			</div>
		</div>
	</div>

	<div class="con-row">
		<div class="con-flex">
			<div class="panel full-padding material-depth-1 " ng-show="!HasMonitorData" ng-hide="!selectedSkillArea.Name && !selectedSkill.Name">
				<i class="mdi mdi-alert"></i> <span class="text-warning">No data available for {{selectedItem.Name}}</span>
			</div>
		</div>

	<div ng-show="HasMonitorData" tabindex="0" class="con-flex panel material-depth-1 filter-boxes" ng-class="{'selected-card': showIncoming}" ng-click="toggleOthers(0, 'incoming')">
			<div class="sub-header">
				<h2>Incoming traffic</h2>
				<!--<div class="head-actions panel-menu">
																							 <div tabindex=0 class="context-menu card-context" ng-click="editRuleset(node)">
																							 <i class="filter-header mdi mdi-alert pointer"><md-tooltip>There are some issues</md-tooltip></i>
													  </div>
				</div>-->
			</div>
			<div class="con-row">
				<div class="con-flex">
					<table class="wfm-table wfm-filter-options">
						<thead>
							<tr>
								<th>Type</th>
								<th>Actual</th>
								<th>Forecasted</th>
								<th>Difference</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>Calls</td>
								<td class="number-cell">{{offeredCalls}}</td>
								<td class="number-cell">{{forecastedCalls}}</td>
								<td class="number-cell">{{forecastActualCallsDifference}}%</td>
							</tr>
							<tr>
								<td>AHT</td>
								<td class="number-cell">{{averageHandleTime}}</td>
								<td class="number-cell">{{forecastedAverageHandleTime}}</td>
								<td class="number-cell">{{forecastActualAverageHandleTimeDifference}}%</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</div>

		<div ng-cloak class="modal-box">
			<div ng-cloak ng-show="DeleteSkillAreaModal">
				<div class="modalbg">
					<div class="dialog-mini">
						<div class="modal-inner-content">
							Are you sure you want to permanently delete {{selectedSkillArea.Name}}?
						</div>
						<div class="modal-actions">
							<aside>
								<button ng-click="toggleModal()" class="wfm-btn wfm-btn-invis-default">{{'Cancel'|translate}}</button>
								<button ng-click='deleteSkillArea(selectedSkillArea)' class="skill-area-delete-confirm wfm-btn wfm-btn-invis-default">{{'Delete'|translate}}</button>
							</aside>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>


