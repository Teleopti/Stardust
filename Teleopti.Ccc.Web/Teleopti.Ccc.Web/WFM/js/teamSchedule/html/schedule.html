<div class="team-schedule">
	Team schedule
	<div ng-style="!vm.isSearchScheduleEnabled && {'border': 'solid red 1px' }">
		<span class="people-search-container" >
			<select ng-model="vm.selectedTeamId" ng-change="vm.onSelectedTeamIdChanged()" ng-if="!vm.isSearchScheduleEnabled">
				<option value="" disabled selected>Pick a team...</option>
				<option value="{{team.Id}}" ng-repeat="team in vm.teams|orderBy: 'Name'">
					{{team.Name}}
				</option>
			</select>

			<people-search-input search-options="vm.searchOptions" search-callback="vm.onKeyWordInSearchInputChanged"
								 ng-if="vm.isSearchScheduleEnabled" />
		</span>

		<span class="datepicker-container">
			<team-schedule-datepicker selected-date="vm.scheduleDate" on-date-change="vm.onScheduleDateChanged(date)" />
		</span>

		<select class="page-size-selector" ng-if="vm.isSelectAgentsPerPageEnabled"
				ng-model="vm.agentsPerPage" ng-options="option for option in vm.agentsPerPageSelection" ng-change="vm.selectorChanged()"></select>

		<button class="context-menu wfm-fab mini team-schedule-menu-btn" ng-if="vm.isMenuVisible()">
			<i class="mdi mdi-dots-vertical" style="color: #000000"></i>
			<div class="context-menu-left" style="z-index: 1000; text-transform: none;">
				<ul class="wfm-list">

					<li class="item" ng-if="cmd.active()" ng-repeat="cmd in vm.commands" ng-disabled="!(cmd.enabled())"
						ng-click="cmd.action()">
						<div>
							<span class="pull-left">{{cmd.label|translate}}</span>
							<span class="pull-right">{{cmd.shortcut}}</span>
						</div>
					</li>
				</ul>
			</div>
		</button>

		<span style="color: red" ng-show="!vm.isSearchScheduleEnabled">Only for test purpose, it will be removed later.</span>
	</div>

	<div class="row notice-spacer" ng-show="vm.selectAllVisible()" ng-click="vm.selectAllForAllPages()">
		<a href="javascript: void(0);"> {{'SelectAllMatchedPeople'|translate}}</a>
	</div>

	<div class="big-table-wrapper material-depth-1">
		<div class="alert-warning notice-spacer" ng-if="vm.total > 500" style="margin-bottom: 0">
			<i class='mdi mdi-alert'></i>{{'TooManyResultsForSearchKeywords'|translate}}
		</div>
		<md-progress-linear ng-if="vm.isLoading" md-mode="indeterminate"></md-progress-linear>
		<schedule-table schedule-vm="vm.groupScheduleVm" person-selection="vm.personIdSelectionDic" select-mode="vm.isAbsenceReportingEnabled"/>
	</div>

	<wfm-pagination pagination-options="vm.paginationOptions" get-data-for-page-callback="vm.loadSchedules"></wfm-pagination>

	<md-sidenav class="md-sidenav-right md-whiteframe-z2" md-component-id="report-absence">
		<add-absence ng-if="vm.isOpen()" default-date-time="vm.earliestStartTime" permissions="vm.permissions"
					 agent-id-list="vm.getSelectedPersonIdList()" actions-after-absence-apply="vm.afterActionCallback(result,successMessageTemplate,failMessageTemplate)"></add-absence>
	</md-sidenav>

	<div class="modal-box" ng-if="vm.showErrorDetails">
		<div class="modalbg">
			<div class="dialog">
				<div class="modal-header text-danger">
					{{vm.errorTitle}}
				</div>
				<div class="modal-inner-content">
					<ul class="wfm-simple-list" style="max-height: 430px">
						<li ng-repeat="error in vm.errorDetails">
							{{error.PersonName}}
							<div class="subtext text-danger" ng-repeat="msg in error.Message">{{msg}}</div>
						</li>
					</ul>
				</div>
				<div class="modal-footer">
					<aside>
						<a ng-click="vm.toggleErrorDetails()" class="wfm-btn wfm-btn-invis">{{'Back'|translate}}</a>
					</aside>
				</div>
			</div>
		</div>
	</div>
</div>