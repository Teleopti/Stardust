<div class="view-header">
	<div class="view-title">
		<h1 translate>TeamSchedule</h1>
	</div>
</div>

<div class="team-schedule panel material-depth-1">
	<div class="teamschedule-header">
		<span class="people-search-container">
			<people-search-input search-options="vm.searchOptions" search-callback="vm.onKeyWordInSearchInputChanged" />
		</span>

		<span class="datepicker-container">
			<team-schedule-datepicker selected-date="vm.scheduleDate" on-date-change="vm.onScheduleDateChanged()" />
		</span>

		<div class="wfm-switch" ng-if="vm.toggles.RemoveAbsenceEnabled">
			<input type="checkbox" id="switchAbsence" ng-model="vm.onlyLoadScheduleWithAbsence" ng-change="vm.toggleShowAbsenceOnly()"/>
			<label for="switchAbsence">
				<span class="wfm-switch-label" translate>ShowOnlyAbsence</span>
				<span class="wfm-switch-toggle"></span>
			</label>
		</div>
		<div id="scheduleContextMenuButton" tabindex=0 class="context-menu card-context" ng-if="vm.isMenuVisible()">
			<i class="mdi mdi-dots-vertical"></i>
			<span class="context-menu-left">
				<ul class="wfm-list">
					<li class="item" ng-if="cmd.visible()" ng-repeat="cmd in vm.commands" ng-disabled="!(cmd.clickable())"
						ng-click="cmd.action()">
						<div ng-attr-id="menuItem{{cmd.label}}">
							<span class="pull-left">{{cmd.label|translate}}</span>
							<span class="pull-right">{{cmd.shortcut}}</span>
						</div>
					</li>
				</ul>
			</span>
		</div>
	</div>
	<input class="scenario-test-trick" ng-show="false" value="vm.isScenarioTest">
	<div class="con-row teamschedule-body">
		<div class="big-table-wrapper">
			<div class="alert-warning notice-spacer" ng-if="vm.total > 500">
				<i class='mdi mdi-alert'></i>{{'TooManyResultsForSearchKeywords'|translate}}
			</div>
			<md-progress-linear ng-if="vm.isLoading" md-mode="indeterminate"></md-progress-linear>
			<schedule-table schedule-vm="vm.groupScheduleVm()" person-selection="vm.selectedPersonInfo()"
							selected-person-absences="vm.selectedPersonAbsences" select-mode="vm.toggles.AbsenceReportingEnabled" />
		</div>

		<md-sidenav class="md-sidenav-right md-whiteframe-z2" md-component-id="report-absence">
			<add-absence ng-if="vm.toggleCurrentSidenav()" default-date-time="vm.earliestStartTime" permissions="vm.permissions" actions-after-absence-apply="vm.afterActionCallback(result,personIds,successMessageTemplate,failMessageTemplate)"
						 agent-id-list="vm.getSelectedPersonIdList()"></add-absence>
		</md-sidenav>

		<md-sidenav class="md-sidenav-right md-whiteframe-z2" md-component-id="add-activity">
			<add-activity-panel ng-if="vm.toggleCurrentSidenav()" selected-agents="vm.getSelectedPersonIdList()" selected-date="vm.scheduleDate" default-start="vm.defaultNewActivityStart()" actions-after-activity-apply="vm.tempAfterAddActivityCallback()"></add-activity-panel>
		</md-sidenav>
		
	</div>

	<div class="con-footer" ng-if="vm.paginationOptions.totalPages > 0">
		<div class="notice-spacer" ng-show="vm.selectAllVisible()" ng-click="vm.selectAllForAllPages()">
			<a href="javascript: void(0);"> {{'SelectAllMatchedPeople'|translate}}</a>
		</div>
		<select class="page-size-selector" ng-if="vm.toggles.SelectAgentsPerPageEnabled"
				ng-model="vm.paginationOptions.pageSize" ng-options="option for option in vm.agentsPerPageSelection"
				ng-change="vm.selectorChanged()"></select>
		<wfm-pagination pagination-options="vm.paginationOptions" get-data-for-page-callback="vm.loadSchedules"></wfm-pagination>
	</div>

	<div class="modal-box" ng-if="vm.showErrorDetails">
		<div class="modalbg">
			<div class="dialog">
				<div class="modal-title text-danger">
					{{vm.errorTitle}}
				</div>
				<div class="modal-inner-content">
					<ul class="wfm-simple-list">
						<li ng-repeat="error in vm.errorDetails">
							{{error.PersonName}}
							<div class="subtext text-danger" ng-repeat="msg in error.Message">{{msg}}</div>
						</li>
					</ul>
				</div>
				<div class="modal-actions">
					<aside>
						<button ng-click="vm.toggleErrorDetails()" class="wfm-btn wfm-btn-invis-default">{{'Back'|translate}}</button>
					</aside>
				</div>
			</div>
		</div>
	</div>
</div>
