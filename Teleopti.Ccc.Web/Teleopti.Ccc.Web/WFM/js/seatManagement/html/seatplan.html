<div id="seatPlan" ui-view>

	<seat-plan-report ng-if="seatplan.isReportOpened" toggle="seatplan.isReportOpened = !seatplan.isReportOpened"
	                  selected-period="seatplan.reportPeriod"></seat-plan-report>

	<div class="row" ng-show="!seatplan.isReportOpened">

		<div class="col-sm-12 seat-plan-calendar">

			<div class="calendarProgress" ng-show="seatplan.isLoadingCalendar">
				<md-progress-circular md-mode="indeterminate"></md-progress-circular>
			</div>

			<datepicker ng-hide="seatplan.isLoadingCalendar" ng-model="seatplan.selectedDate"
			            on-change-of-month="seatplan.onChangeOfMonth(date)"
			            ng-change="seatplan.onChangeOfDate()" class="wfm-datepicker"
			            custom-class="seatplan.getDayClass(date,mode)">
			</datepicker>
		</div>

		<div class="planningDayDetail" ng-if="seatplan.selectedDate!=null">
			<button class="wfm-fab info pull-right" ng-click="seatplan.isReportOpened = !seatplan.isReportOpened; seatplan.reportPeriod = {StartDate:seatplan.selectedDate,EndDate:seatplan.selectedDate}">
				<i class="mdi mdi-file-document"></i>
				<md-tooltip>{{'GenerateReport' | translate}}</md-tooltip>
			</button>
			<h3>{{seatplan.getDateString(seatplan.selectedDate)}}</h3>
			<md-divider md-insert></md-divider>
			<p>{{seatplan.getToDayInfo()}}</p>
		</div>


		<div class="col-sm-12">
			<h3 class="planningPeriodTitle">{{ 'PlanningPeriodsFor' | translate }} {{seatplan.getSelectedMonthName()}} {{seatplan.selectedDate.year()}}</h3>

			<md-divider md-insert></md-divider>

			<div class="planningPeriodProgressBar" ng-show="seatplan.isLoadingPlanningPeriods">
				<md-progress-linear md-mode="indeterminate"></md-progress-linear>
			</div>

			<teleopti-card-list ng-hide="seatplan.isLoadingPlanningPeriods">
				<teleopti-card ng-repeat="period in seatplan.planningPeriods">
					<card-header>

						<span id="planningPeriodHeader">{{period.StartDate |  amDateFormat:"L"}} - {{period.EndDate | amDateFormat:"L"}}</span>

						<span style="float: right;"><i class="mdi mdi-chevron-down"></i></span>

					</card-header>
					<card-body>
						<button class="wfm-fab info period-report-btn" ng-click="seatplan.isReportOpened = !seatplan.isReportOpened; seatplan.reportPeriod = period">
							<i class="mdi mdi-file-document"></i>
							<md-tooltip>{{'GenerateReport' | translate}}</md-tooltip>
						</button>
						<seat-plan-init start={{period.StartDate}} end="{{period.EndDate}}" on-seat-plan-complete="seatplan.onSeatPlanComplete()"></seat-plan-init>
					</card-body>
				</teleopti-card>
			</teleopti-card-list>
		</div>
	</div>
</div>

<div class="clearfix"></div>

