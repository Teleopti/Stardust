<style>
	.container.content.material-depth-1.material-block.ng-scope {
		overflow: hidden;
	}
</style>


<div class="row seatPlanReport">
	<div class="seatPlanReportHeader material-depth-1">
		<button class="wfm-btn pull-left" ng-click="vm.toggle()">
			<i class="mdi mdi-reply"></i>
		</button>
		<button class="wfm-btn wfm-btn-invis-primary pull-left" ng-class="{'button-active':vm.isFilterOpened}" ng-click="vm.isFilterOpened = !vm.isFilterOpened">
			<i class="mdi mdi-filter"></i>
			Filter
		</button>
		<button class="wfm-fab info pull-right" ng-show="!vm.isFilterOpened" ng-print print-element-id="seatPlanReportContentScreen" is-loading-report="{{vm.isLoadingReport}}">
			<i class="mdi mdi-printer"></i>
		</button>
		<span class="blankForTurnOffFilterPanel1" ng-click="vm.isFilterOpened = false"></span>

		<div class="seatPlanReportFilter wfm-slide-tabs material-depth-2" ng-show="vm.isFilterOpened">
			<div class="header-bar">
				<button class="wfm-btn wfm-btn-invis-default" ng-class="{'button-active':vm.isDatePickerOpened}" ng-click="vm.toggleFilter('date')">Date</button>
				<button class="wfm-btn wfm-btn-invis-default" ng-class="{'button-active':vm.isTeamPickerOpened}" ng-click="vm.toggleFilter('team')">Team</button>
				<button class="wfm-btn wfm-btn-invis-default" ng-class="{'button-active':vm.isLocationPickerOpened}" ng-click="vm.toggleFilter('location')">Location</button>
			</div>

			<div class="filter-content">
				<div class="date-picker" ng-show="vm.isDatePickerOpened">
					<datepicker class="wfm-datepicker" ng-model="vm.selectedPeriod.StartDate" custom-class="vm.setRangeClass(date,mode)" max-date="vm.selectedPeriod.EndDate">
					</datepicker>
					<datepicker class="wfm-datepicker" ng-model="vm.selectedPeriod.EndDate" custom-class="vm.setRangeClass(date,mode)" min-date="vm.selectedPeriod.StartDate">
					</datepicker>
				</div>

				<div class="team-picker" ng-show="vm.isTeamPickerOpened">
					<div class="input-prepend">
						<i class="mdi mdi-filter-outline"></i>
						<input type="text" name="filterTeams" ng-model="searchTeams" placeholder="{{ 'FilterTeams' | translate }}" />
					</div>

					<div class="tree">
						<div ui-tree data-drag-enabled=" false">
							<ol ui-tree-nodes="" ng-model="vm.teams" id="tree-root-teams" class="tree-line" toggle-focus>
								<li ng-repeat="node in vm.teams | filter:searchTeams" ui-tree-node ng-include="'teams_renderer.html'"></li>
							</ol>
						</div>
					</div>
				</div>

				<div class="location-picker" ng-show="vm.isLocationPickerOpened">
					<div class="input-prepend">
						<i class="mdi mdi-filter-outline"></i>
						<input type="text" name="filterLocations" ng-model="searchLocations" placeholder="{{ 'FilterLocations' | translate }}" />
					</div>

					<div class="tree">
						<div ui-tree data-drag-enabled="false">
							<ol ui-tree-nodes="" ng-model="vm.locations" id="tree-root-locations" class="tree-line" toggle-focus>
								<li ng-repeat="node in vm.locations | filter:searchLocations" ui-tree-node ng-include=" 'locations_renderer.html' "></li>
							</ol>
						</div>
					</div>
				</div>

			</div>

			<div class="bottom-bar">
				<button class="wfm-btn wfm-btn-invis-primary pull-right" ng-click="vm.isFilterOpened=false;vm.applyFilter()">Apply</button>
				<button class="wfm-btn wfm-btn-invis-default pull-right" ng-click="vm.isFilterOpened=false">Cancel</button>
			</div>
		</div>
	</div>
	<span class="blankForTurnOffFilterPanel2" ng-click="vm.isFilterOpened = false"></span>
	<div class="seatPlanReportContent" ng-click="vm.isFilterOpened = false" id="seatPlanReportContentScreen" >
		<div ng-if="vm.isLoadingReport" class="report-spinner">
			<md-progress-circular md-mode="indeterminate"></md-progress-circular>
		</div>
		<h1 ng-if="!vm.isLoadingReport">{{ vm.seatBookings.length == 0 ? 'No report for selected period' : 'Seat Plan Report' }}</h1>
		<table ng-if="!vm.isLoadingReport">
			<tr ng-repeat-start="bookingByDate in vm.seatBookings" class="tr-date">
				<td></td>
				<td></td>
				<td></td>
				<td></td>
				<td>{{vm.getDisplayDateString(bookingByDate.Date.Date)}}</td>
			</tr>

			<tr ng-repeat-start="team in bookingByDate.Teams"></tr>

			<tr ng-show="$first">
				<th class="td-team">Team</th>
				<th class="td-agent">Agent</th>
				<th class="td-location">Location</th>
				<th class="td-seat">Seat</th>
				<th class="td-time">Time</th>
			</tr>

			<tr ng-repeat="booking in team.SeatBookings" ng-class="[$index % 2== 0 ? 'tr-color':'' ]">
				<td class="td-team">{{ $first ? team.Name : ''}}</td>
				<td class="td-agent">{{ booking.FirstName }}&nbsp;{{ booking.LastName }}</td>
				<td class="td-location">{{ booking.LocationPath }}</td>
				<td class="td-seat">{{ booking.SeatName }}</td>
				<td class="td-time">{{ vm.getDisplayTimeString(booking.StartDateTime,booking.EndDateTime) }}</td>
			</tr>

			<tr ng-repeat-end>
				<td><br/></td>
				<td></td>
				<td></td>
				<td></td>
				<td></td>
			</tr>
			<tr ng-repeat-end></tr>
		</table>
	
		<div class="report-paging material-depth-1 pull-right" ng-if="!vm.isLoadingReport && vm.totalPages !== 0">
			<i class="mdi mdi-skip-previous" ng-class="{'noclick':(vm.currentPage == 1)}" ng-click="vm.paging(1)"></i>
			<i class="mdi mdi-chevron-left" ng-class="{'noclick':(vm.currentPage == 1)}" ng-click="vm.paging(vm.currentPage - 1)"></i>
			<span class="current-page">{{vm.currentPage}}</span>
			<i class="mdi mdi-chevron-right" ng-class="{'noclick':(vm.currentPage == vm.totalPages)}" ng-click="vm.paging(vm.currentPage + 1)"></i>
			<i class="mdi mdi-skip-next" ng-class="{'noclick':(vm.currentPage == vm.totalPages)}" ng-click="vm.paging(vm.totalPages)"></i>
			<span>{{'Total Page: '+vm.totalPages}}</span>
		</div>
	</div>
</div>
