<div class="workspace">
    <h1>
      <i class="mdi mdi-elevation-rise"></i>Insights - {{reportName}}
    </h1>

    <div nz-row [nzGutter]="{ xs: 8, sm: 8, md: 8, lg: 8, xl: 8, xxl: 8 }" class="container">
      <div nz-col nzSpan="6">
        <button nz-button nzType="default" (click)="nav.gotoInsights()"><i nz-icon type="left" theme="outline"></i> Back</button>
      </div>
      <div nz-col nzSpan="18" *ngIf="!inEditing" class="report-action-panel">
        <button nz-button nzType="default" *ngIf="permission.CanEditReport" (click)="nav.editReport(reportId)" class="report-ction">
          <i nz-icon type="edit" theme="outline"></i> Edit
        </button>
        <button nz-button nzType="default" *ngIf="permission.CanEditReport" (click)="confirmCloneReport()" class="report-ction">
          <i nz-icon type="copy" theme="outline"></i> Save as new...
        </button>
        <button nz-button nzType="default" *ngIf="permission.CanDeleteReport" nz-popconfirm nzPlacement="bottomRight"
          nzTitle="Are you sure you want to delete this report?" nzOkText="ok" nzCancelText="cancel"
          (nzOnConfirm)="deleteReport(reportId)" class="report-ction">
          <i nz-icon type="delete" theme="outline"></i> Delete
        </button>
      </div>
      <div nz-col nzSpan="18" *ngIf="inEditing" class="report-action-panel">
        <button nz-button nzType="default" *ngIf="permission.CanEditReport" (click)="nav.viewReport(reportId)" class="report-ction">
          <i nz-icon type="undo" theme="outline"></i> Back to view mode
        </button>
      </div>
      <nz-modal [(nzVisible)]="isConfirmingClone" nzTitle="Clone report"
                (nzOnCancel)="cancelCloneReport()" (nzOnOk)="cloneReport(reportId)">
        <p>Please input name for new copy of report "{{reportName}}":</p>
        <div><input type="text" nz-input placeholder="New report name..." [(ngModel)]="newReportName"></div>
      </nz-modal>
    </div>
    <div style="text-align: center;"><nz-spin *ngIf="isProcessing"></nz-spin></div>
    <div class="panel con-flex material-depth-1">
      <div id="reportContainer" style="height:75vh;"></div>
    </div>
</div>