<section>
	<div class="view-header with-fab">
		<div class="view-title">
			<h1>
				<i class="mdi mdi-elevation-rise"></i>Insights - {{reportName}}
			</h1>
		</div>
	</div>
</section>

<section>
	<nz-alert
		[hidden]="!initialized || permission.CanViewReport"
		nzType="error"
		nzMessage="{{'NoPermissionToViewInsightsReport' | translate}}"
		nzShowIcon
		nzBanner>
	</nz-alert>
	<div [hidden]="initialized && !permission.CanViewReport" nz-row [nzGutter]="{ xs: 8, sm: 8, md: 8, lg: 8, xl: 8, xxl: 8 }" class="container">
		<div nz-col nzSpan="6">
			<button nz-button nzType="default" (click)="nav.gotoInsights()"><i nz-icon type="left" theme="outline"></i>{{'Back' | translate}}</button>
		</div>
		<div nz-col nzSpan="18" *ngIf="!inEditing" class="report-action-panel">
			<button nz-button nzType="default" [disabled]="!reportLoaded" (click)="printReport(reportId)" class="report-ction">
				<i nz-icon type="printer" theme="outline"></i>{{'Print' | translate}}
			</button>
			<button nz-button nzType="default" *ngIf="permission.CanEditReport" (click)="nav.editReport(reportId)" class="report-ction">
				<i nz-icon type="edit" theme="outline"></i>{{'Edit' | translate}}
			</button>
			<button nz-button nzType="default" *ngIf="permission.CanEditReport" (click)="confirmCloneReport()" class="report-ction">
				<i nz-icon type="copy" theme="outline"></i>{{'SaveAsNewWith3Dots' | translate}}
			</button>
			<button nz-button nzType="default" *ngIf="permission.CanDeleteReport" nz-popconfirm nzPlacement="bottomRight"
				nzTitle="{{'AreYouSureToDeleteThisReport' | translate}}" nzOkText="{{'Ok' | translate}}" nzCancelText="{{'Cancel' | translate}}"
				(nzOnConfirm)="deleteReport(reportId)" class="report-ction">
				<i nz-icon type="delete" theme="outline"></i>{{'Delete' | translate}}
			</button>
		</div>
		<div nz-col nzSpan="18" *ngIf="inEditing" class="report-action-panel">
			<button nz-button nzType="default" *ngIf="permission.CanEditReport" (click)="nav.viewReport(reportId)" class="report-ction">
				<i nz-icon type="undo" theme="outline"></i>{{'BackToViewMode' | translate}}
			</button>
		</div>
		<nz-modal [(nzVisible)]="isConfirmingClone" nzTitle="{{'SaveAsNewReport' | translate}}"
							(nzOnCancel)="cancelCloneReport()" (nzOnOk)="cloneReport(reportId)">
			<p>{{ 'InputNameForNewClonedReport' | translate : { repName: this.reportName } }}</p>
			<div><input type="text" nz-input placeholder="{{'NewReportNameWith3Dots' | translate}}" [(ngModel)]="newReportName"></div>
		</nz-modal>
	</div>
	<div style="text-align: center;"><nz-spin *ngIf="isProcessing"></nz-spin></div>
	<div [hidden]="initialized && !permission.CanViewReport" class="panel con-flex material-depth-1">
		<div id="reportContainer" style="height:75vh;"></div>
	</div>
</section>