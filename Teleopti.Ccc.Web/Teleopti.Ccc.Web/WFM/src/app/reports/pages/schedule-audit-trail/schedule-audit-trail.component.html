<div style="padding-bottom: 10px;" nz-row>
   <div nz-col>
      <h1>
         <i class="mdi mdi-database-search"></i> {{'ScheduleAuditTrailReport' | translate}}
      </h1>
   </div>
</div>

<form nz-form nzLayout="vertical" [formGroup]="searchForm" (ngSubmit)="submitForm()">
   <!-- <div nz-row> -->
   <!-- <div nz-col [nzXs]="24" [nzSm]="12"> -->
   <nz-form-item>
      <nz-form-label>{{'ScheduleDateColon' | translate}}</nz-form-label>
      <nz-form-control>
         <nz-range-picker formControlName="scheduleRange" [nzFormat]="dateformat"></nz-range-picker>
      </nz-form-control>
   </nz-form-item>
   <!-- </div> -->
   <!-- <div nz-col [nzXs]="24" [nzSm]="12"> -->
   <nz-form-item>
      <nz-form-label>{{'ChangeDateColon' | translate}}</nz-form-label>
      <nz-form-control>
         <nz-range-picker formControlName="changedRange" [nzFormat]="dateformat"></nz-range-picker>
      </nz-form-control>
   </nz-form-item>
   <!-- </div> -->
   <!-- </div> -->

   <!-- <div nz-row nzJustify="left"> -->
   <!-- <div nz-col [nzXs]="24" [nzSm]="9"> -->
   <nz-form-item>
      <nz-form-label>{{'ChangedBy' | translate}}</nz-form-label>
      <nz-form-control>
         <nz-select style="width: 200px;" nzShowSearch formControlName="auditTarget">
            <nz-option [nzLabel]="'Anyone' | translate" nzValue=""></nz-option>
            <ng-container *ngFor="let person of changedBy | async">
               <nz-option [nzLabel]="person.Name" [nzValue]="person.Id"></nz-option>
            </ng-container>
         </nz-select>
      </nz-form-control>
   </nz-form-item>
   <!-- </div> -->
   <!-- <div nz-col [nzXs]="24" [nzSm]="9"> -->
   <nz-form-item>
      <nz-form-label>{{'Teams' | translate}}</nz-form-label>
      <nz-form-control>
         <nz-tree-select style="width: 250px" [nzNodes]="orgTree" nzAllowClear nzShowSearch nzCheckable [nzPlaceHolder]="'SelectTeams' | translate"
            formControlName="orgSelection">
         </nz-tree-select>
      </nz-form-control>
   </nz-form-item>


   <!-- </div> -->
   <!-- </div> -->
   <nz-form-item>
      <nz-form-control>
         <button nz-button nzType="primary"><i nz-icon type="search"></i>{{'Search' | translate}}</button>
      </nz-form-control>
   </nz-form-item>
</form>

<nz-table #basicTable nzSize="middle" [nzData]="auditData" nzPageSize="100" nzHideOnSinglePage>
   <thead nzSingleSort>
      <tr>
         <th nzShowSort nzSortKey="ModifiedAt">{{'ModifiedAt' | translate}}</th>
         <th nzShowSort nzSortKey="ModifiedBy">{{'ModifiedBy' | translate}}</th>
         <th nzShowSort nzSortKey="ScheduledAgent">{{'ScheduledAgent' | translate}}</th>
         <th nzShowSort nzSortKey="ShiftType">{{'Type' | translate}}</th>
         <th nzShowSort nzSortKey="AuditType">{{'Action' | translate}}</th>
         <th nzShowSort nzSortKey="Detail">{{'Details' | translate}}</th>
         <th nzShowSort nzSortKey="ScheduleStart">{{'StartTime' | translate}}</th>
         <th nzShowSort nzSortKey="ScheduleEnd">{{'FullDayAbsenceReqEndTime' | translate}}</th>
         <th>
            <telop-table-options-menu enableCsvExport [data]="basicTable.data"></telop-table-options-menu>
         </th>
      </tr>
   </thead>
   <tbody>
      <tr *ngFor="let data of basicTable.data">
         <td>{{data.ModifiedAt}}</td>
         <td>{{data.ModifiedBy}}</td>
         <td>{{data.ScheduledAgent}}</td>
         <td>{{data.ShiftType}}</td>
         <td>{{data.AuditType}}</td>
         <td>{{data.Detail}}</td>
         <td>{{data.ScheduleStart}}</td>
         <td colspan="2">{{data.ScheduleEnd}}</td>
      </tr>
   </tbody>
</nz-table>