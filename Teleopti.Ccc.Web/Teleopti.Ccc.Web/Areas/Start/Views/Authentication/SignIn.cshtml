@using System.Web.Optimization
@using Teleopti.Ccc.UserTexts
@using Teleopti.Ccc.Web.Core.Startup.InitializeApplication
@section head {
	@Styles.Render(BundleScripts.SignInCss)
	@Scripts.Render(BundleScripts.SignInJs)

	<script type="text/javascript">
		var authentication;
		$(function () {
			Teleopti.Start.Authentication.Settings = {
				baseUrl: '@Url.Content("~/")'
			};
			authentication = new Teleopti.Start.Authentication.Init();
		});
	</script>
}
@{
	var signOutUrl = "authentication/SignOut";
	if (Request.RawUrl.EndsWith("/"))
	{
		signOutUrl = "../" + signOutUrl;
	}
}

<section id="page-signin">
	<div class="container" id="Login-container">
		<div id="Exception-div" class="alert alert-danger hide">
			<button type="button" class="close" data-dismiss="alert">×</button>
			<span id="Exception-message"></span>
		</div>
	    <div class="login-header">
	        <h1>Teleopti WFM</h1>
	    </div>
        <div id="view" class="login-form"></div>
		<div id="signin">
			<div id="Signin-error"
				 class="alert alert-warning"
				 data-bind="visible: HasErrorMessage, text: ErrorMessage"
				 data-nobusinessunitext="@Resources.NoAllowedBusinessUnitFoundInCurrentDatabase"
				 data-nodatasourcetext="@Resources.NoDatasource"
				 data-nopermissiontext="@Resources.InsufficientPermissionForWeb">
			</div>
			<div data-bind="if: ShowSignInAsAnotherUser">
				<a class="btn btn-primary" href="@signOutUrl">@Resources.SignInAsAnotherUser</a>
			</div>

			<img data-bind="visible: Ajax.Active" src="@Url.Content("~/Areas/Start/Content/Images/ajax-loader-small.gif")" alt="..." />
		</div>

		<div id="businessunit">
			<div id="BusinessUnit-error"
				 class="alert alert-warning"
				 data-bind="visible: HasErrors, text: ErrorMesg">
			</div>
			<div id="BusinessUnits" data-bind="visible: !HasErrors(), foreach: BusinessUnits" class="list-group">
				<a href="#" class="list-group-item" data-bind="text: Name, click: Select"></a>
			</div>
		</div>

		<div id="menu">
			<div data-bind="foreach: Applications" class="list-group">
				<a href="#" class="list-group-item" data-bind="attr: { href: Url }, text: Name"></a>
			</div>
		</div>
	</div>
</section>

