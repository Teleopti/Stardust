@using Teleopti.Ccc.UserTexts
@section head {
	<link href="@Url.Content("~/Content/bootstrap/bootstrap.css")" rel="stylesheet" type="text/css" />
	<link href="@Url.Content("~/Content/bootstrap/bootstrap-responsive.css")" rel="stylesheet" type="text/css" />
	<link href="@Url.Content("~/Areas/Start/Content/Css/Login.css")" rel="stylesheet" type="text/css" />
	
	<script src="@Url.Content("~/Content/bootstrap/bootstrap.js")"></script>
	<script src="@Url.Content("~/Content/Scripts/knockout-2.2.1.js")"></script>
	<script src="@Url.Content("~/Content/signals/signals.js")"></script>
	<script src="@Url.Content("~/Content/hasher/hasher.js")"></script>
	<script src="@Url.Content("~/Content/crossroads/crossroads.js")"></script>
    
	<script src="@Url.Content("~/Areas/Start/Content/Scripts/Teleopti.Start.Authentication.JQueryAjaxViewModel.js")"></script>
	<script src="@Url.Content("~/Areas/Start/Content/Scripts/Teleopti.Start.Authentication.AuthenticationState.js")"></script>
	<script src="@Url.Content("~/Areas/Start/Content/Scripts/Teleopti.Start.Authentication.Navigation.js")"></script>
	<script src="@Url.Content("~/Areas/Start/Content/Scripts/Teleopti.Start.Authentication.Settings.js")"></script>
	<script src="@Url.Content("~/Areas/Start/Content/Scripts/Teleopti.Start.Authentication.SignInView.js")"></script>
	<script src="@Url.Content("~/Areas/Start/Content/Scripts/Teleopti.Start.Authentication.SignInViewModel.js")"></script>
	<script src="@Url.Content("~/Areas/Start/Content/Scripts/Teleopti.Start.Authentication.DataSourceViewModel.js")"></script>
	<script src="@Url.Content("~/Areas/Start/Content/Scripts/Teleopti.Start.Authentication.BusinessUnitSelectionView.js")"></script>
	<script src="@Url.Content("~/Areas/Start/Content/Scripts/Teleopti.Start.Authentication.BusinessUnitSelectionViewModel.js")"></script>
	<script src="@Url.Content("~/Areas/Start/Content/Scripts/Teleopti.Start.Authentication.BusinessUnitViewModel.js")"></script>
	<script src="@Url.Content("~/Areas/Start/Content/Scripts/Teleopti.Start.Authentication.MenuView.js")"></script>
	<script src="@Url.Content("~/Areas/Start/Content/Scripts/Teleopti.Start.Authentication.MenuViewModel.js")"></script>
	<script src="@Url.Content("~/Areas/Start/Content/Scripts/Teleopti.Start.Authentication.ApplicationViewModel.js")"></script>
	<script src="@Url.Content("~/Areas/Start/Content/Scripts/Teleopti.Start.Authentication.ChangePasswordView.js")"></script>
	<script src="@Url.Content("~/Areas/Start/Content/Scripts/Teleopti.Start.Authentication.ChangePasswordViewModel.js")"></script>
    
	<script type="text/javascript">
		var authentication;
		$(function () {
			Teleopti.Start.Authentication.Settings = {
				baseUrl: '@Url.Content("~/")'
			};
			authentication = new Teleopti.Start.Authentication();
		});
	</script>
}

<section id="page-signin">
	<div class="container" id="Login-container">
		<div id="Exception-div" class="alert alert-error hide">
			<button type="button" class="close" data-dismiss="alert">×</button>
			<span id="Exception-message"></span>
		</div>
		<div class="login-logo">
			<img src="@Url.Content("~/Areas/Start/Content/Images/mobile_logo.png")"/>
		</div>
		
		<div id="view" class="login-form"></div>

		<div id="signin">

			<ul id="DataSources" data-bind="visible: DataSources().length > 0, foreach: DataSources" class="nav nav-tabs nav-stacked">
				<li data-bind="css: {'application': !IsWindows, 'windows': IsWindows, 'active': $parent.SelectedDataSource() == $data}">
					<a href="#" data-bind="click: $parent.SelectDataSource">
						<span data-bind="text: Name"></span>
						<span data-bind="if: IsWindows">@Resources.WindowsLogonWithBrackets</span>
					</a>
				</li>
			</ul>
			<form data-bind="submit: SignIn">
				<div data-bind="visible: DisplayUserNameAndPasswordBoxes">
					<div>
						<input type="text" id="Username-input" placeholder="@Resources.UserName" class="input-block-level" data-bind="value: UserName, valueUpdate: 'afterkeydown'" autocapitalize="off" autocorrect="off" />
					</div>
					<div>
						<input type="password" id="Password-input" placeholder="@Resources.Password" class="input-block-level" data-bind="value: Password, valueUpdate: 'afterkeydown'" />
					</div>
				</div>
				<div id="Signin-error" 
					 class="alert" 
					 data-bind="visible: HasErrorMessage, text: ErrorMessage"
					 data-nobusinessunitext="@Resources.NoAllowedBusinessUnitFoundInCurrentDatabase">
				</div>
			
				<button class="btn btn-primary" id="Login-button" type="submit" data-bind="enable: Ajax.Inactive">@Resources.LogOn</button>
				<img data-bind="visible: Ajax.Active" src="@Url.Content("~/Areas/Start/Content/Images/ajax-loader-small.gif")" alt="..." />
			</form>
		</div>
		
		<div id="businessunit">
			<ul id="BusinessUnits" data-bind="foreach: BusinessUnits" class="nav nav-tabs nav-stacked">
				<li><a href="#" data-bind="text: Name, click: Select"></a></li>
			</ul>
		</div>

		<div id="menu">
			<ul data-bind="foreach: Applications" class="nav nav-tabs nav-stacked">
				<li>
					<a href="#" data-bind="attr: {href: Url}, text: Name"></a>
				</li>
			</ul>
		</div>
		
		<div id="changepassword">
			<div id="PasswordAlreadyExpired" class="alert login-warning" data-bind="visible: MustChangePassword">
				<button type="button" class="close" data-dismiss="alert">×</button>
				<strong>@Resources.WarningWithExclamatory</strong> @Resources.YourPasswordHasAlreadyExpired 
			</div>
			<div id="PasswordExpireSoon" class="alert login-warning" data-bind="visible: !MustChangePassword()">
				<button type="button" class="close" data-dismiss="alert">×</button>
				<strong>@Resources.WarningWithExclamatory</strong> @Resources.YourPasswordWillExpireSoon
			</div>
			<div class="login-form">
				<input type="password" id="New-password" placeholder="@Resources.NewPassword" data-bind="value: NewPassword" class="input-block-level" />
				<input type="password" id="Confirm-new-password" placeholder="@Resources.ConfirmNewPassword" data-bind="value: ConfirmNewPassword" class="input-block-level" />
				
				<input type="password" id="Old-password" placeholder="@Resources.PasswordOld" data-bind="value: OldPassword" class="input-block-level" />
				<div id="Password-change-error" class="alert" data-bind="visible: ErrorMessage().length > 0, text: ErrorMessage"
					data-notmatch="@Resources.PasswordsDoNotMatch">
				</div>
				<button class="btn btn-primary" id="Change-password-button" data-bind="click: ApplyChangePassword">@Resources.Apply</button>
				<button class="btn btn-primary" id="Skip-button" data-bind="visible: !MustChangePassword(), click: SkipChangePassword">@Resources.Skip</button>
			</div>
		</div>
	</div>
</section>

