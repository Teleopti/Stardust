@using Teleopti.Ccc.UserTexts @{ Layout = null; }

<div class="request-add-container clearfix">
	<div class="request-add-body">
		<div class="posting-mask" data-bind="visible: IsPostingData">
			<img src='@Url.Content("~/Areas/MyTime/Content/Images/ajax-loader.gif")' alt="Saving..." />
		</div>
		<div class="form-group">
			<input type="text" class="request-new-subject form-control" placeholder="@Resources.Subject" data-bind="value: Subject"
			 maxlength="80" />
		</div>
		<div class="form-group">
			<textarea class="request-new-message form-control" placeholder="@Resources.Message" data-bind="value: Message, valueUpdate: 'afterkeydown', event:{change:checkMessageLength}"></textarea>
		</div>

		<div class="form-group" data-bind="visible: ShowAbsencesCombo">
			<label>
				@Resources.AbsenceType
			</label>
			<div class="row">
				<div class="col-md-3 col-sm-6 col-xs-12">
					<select class="request-new-absence request-absence input-sm form-control" data-bind="value: AbsenceId , enable: '@(Model.AbsenceTypes.Count > 0)' == 'True' ">
						@if (Model.AbsenceTypes.Count > 0)
						{
						foreach (var absenceType in Model.AbsenceTypes)
						{
						<option value="@Html.AttributeEncode(absenceType.Id)">@absenceType.Name</option>
						}
						}
						else { <option value="">@Resources.NoAbsenceTypesOpenForRequests</option> }
					</select>
				</div>
				<!-- ko if: ShowAbsenceAccount -->
				<!-- ko if: IsLoadingPersonalAccount() -->
				<div id="absence-personal-account-loading" class="col-md-4 col-sm-6 col-xs-12">
					<label>@Resources.Loading ...</label>
				</div>
				<!-- /ko -->
				<!-- ko if: !IsLoadingPersonalAccount() -->
				<div id="absence-personal-account" class="col-md-4 col-sm-6 col-xs-12">
					<div>
						<label>
							@Resources.Remaining:
						</label>
						<!-- ko if: AbsenceTrackedAsDay() -->
						<span class="remainingTime" data-bind="text: AbsenceRemaining() + ' @Resources.Days'"></span>
						<!-- /ko -->
						<!-- ko if: AbsenceTrackedAsHour() -->
						<span class="remainingTime" data-bind="text: AbsenceRemaining()"></span>
						<!-- /ko -->
					</div>
					<div>
						<label>
							@Resources.Used:
						</label>
						<!-- ko if: AbsenceTrackedAsDay() -->
						<span class="usedTime" data-bind="text: AbsenceUsed() + ' @Resources.Days'"></span>
						<!-- /ko -->
						<!-- ko if: AbsenceTrackedAsHour() -->
						<span class="usedTime" data-bind="text: AbsenceUsed()"></span>
						<!-- /ko -->
					</div>
				</div>
				<!-- /ko -->
				<!-- /ko -->
			</div>
		</div>
		<div class="row form-group">
			<div class="col-xs-6 col-sm-4 col-md-3 p-r-0">
				<span class="input-group">
					<input class="request-new-datefrom input-sm form-control" data-bind="datepicker: DateFrom, datepickerOptions: { autoHide: true, format: DateFormat(), weekStart: weekStart() }, enable: IsEditable() && IsDateInputEditable"
					 type="text" />
					<span class="input-group-btn">
						<button class="btn btn-sm" data-bind="datepicker: DateFrom, datepickerOptions: { autoHide: true, format: DateFormat(), weekStart: weekStart() }">
							<i class="glyphicon glyphicon-calendar"></i>
						</button>
					</span>
				</span>
			</div>
			<div class="col-xs-6 col-sm-4 col-md-3">
				<div class="bootstrap-timepicker">
					<div class="input-group">
						<input type="text" class="request-new-timefrom input-sm form-control" data-bind="timepicker: TimeFrom, timepickerOptions: { showMeridian: ShowMeridian, showInputs: false}, enable: IsEditable, visible: IsTimeInputVisible, scrollIntoViewWhenClick:'#Request-add-section'" />
						<span class="input-group-btn" data-bind="visible: IsTimeInputVisible">
							<button class="btn btn-sm right-align" data-bind="timepicker: TimeFrom, timepickerOptions: { showMeridian: ShowMeridian, showInputs: false}">
								<i class="glyphicon glyphicon-time"></i>
							</button>
						</span>
					</div>
				</div>
			</div>
		</div>
		<div class="row form-group">
			<div class="col-xs-6 col-sm-4 col-md-3 p-r-0">
				<span class="input-group">
					<input class="request-new-dateto input-sm form-control" data-bind="datepicker: DateTo, datepickerOptions: { autoHide: true, format: DateFormat(), weekStart: weekStart() }, enable: IsEditable() && IsDateInputEditable"
					 type="text" />
					<span class="input-group-btn">
						<button class="btn btn-sm" data-bind="datepicker: DateTo, datepickerOptions: { autoHide: true, format: DateFormat(), weekStart: weekStart() }">
							<i class="glyphicon glyphicon-calendar"></i>
						</button>
					</span>
				</span>
			</div>
			<div class="col-xs-6 col-sm-4 col-md-3">
				<div class="bootstrap-timepicker">
					<div class="input-group">
						<input type="text" class="request-new-timeto input-sm form-control" data-bind="timepicker: TimeTo, timepickerOptions: { showMeridian: ShowMeridian, showInputs: false}, enable: IsEditable, visible: IsTimeInputVisible, scrollIntoViewWhenClick:'#Request-add-section'" />
						<span class="input-group-btn" data-bind="visible: IsTimeInputVisible">
							<button class="btn btn-sm right-align" data-bind="timepicker: TimeTo, timepickerOptions: { showMeridian: ShowMeridian, showInputs: false}">
								<i class="glyphicon glyphicon-time"></i>
							</button>
						</span>
					</div>
				</div>
			</div>
		</div>
		<div>
			<label class="cursorpointer checkbox">
				<input type="checkbox" class="request-new-fullday" data-bind="checked: IsFullDay" /> 
				<span>@Resources.FullDay</span>
			</label>
		</div>
		<div class="request-new-error alert alert-danger" data-bind="visible: ShowError, html: ErrorMessage"></div>
		<div class="pull-right">
			<button class="request-new-cancel btn" data-bind="click: $parent.CancelAddingNewRequest">@Resources.Cancel</button>
			<button class="request-new-send btn btn-primary" data-bind="click: AddRequest, enable: !IsPostingData()">@Resources.Save</button>
		</div>
	</div>
</div>