<div class="realtimeadherenceagents container">
	<ul class="breadcrumb">
		<li><a data-bind="text: resources.RealTimeAdherence, attr:{href: rootURI}"></a></li>
		<li><a data-bind="text: siteName, attr:{href: siteURI}"></a></li>
		<li class="active" data-bind="text: teamName">Red</li>
	</ul>
	<div align="right">
		<form class="form-control">
			Filter: <input type="text" data-bind="value: filter, valueUpdate: 'input'" />
		</form>
	</div>
	<div class="panel panel-default">
		<table class="table table-stripped table-condensed rta-agents-details">
			<thead>
				<tr>
					<th data-bind="text: resources.AgentName"></th>
					<th data-bind="text: resources.Team"></th>
					<th data-bind="text: resources.State"></th>
					<th data-bind="text: resources.Activity"></th>
					<th data-bind="text: resources.NextActivity"></th>
					<th data-bind="text: resources.NextActivityStartTime"></th>
					<th data-bind="text: resources.Alarm"></th>
					<th data-bind="text: resources.TimeInAlarm"></th>
				</tr>
			</thead>
			<tbody data-bind="foreach: filteredAgents">
				<tr class="agent-state" data-bind="style:  { backgroundColor: AlarmColor, 'transition': 'background-color 2000ms linear', fontWeight: TextWeight, fontColor: TextColor}, click: $root.SelectAgent">
					<td class="agent-name" data-bind="text: Name"></td>
					<td data-bind="text: TeamName"></td>
					<td data-bind="text: State"></td>
					<td data-bind="text: Activity"></td>
					<td data-bind="text: NextActivity"></td>
					<td data-bind="text: NextActivityStartTime"></td>
					<td data-bind="text: Alarm"></td>
					<td data-bind="text: AlarmTime"></td>
				</tr>
				<!-- ko if: $root.changeScheduleAvailable-->
				<!-- ko if: Selected -->
				<tr class="person-menu">
					<td class="schedule-column" colspan="8">
						<div class="agent-menu">
							<div class="btn-group">
								<!-- ko if: $root.permissionAddActivity -->
								<a class="btn btn-sm change-schedule" data-bind="attr: { href: $root.urlForChangingSchedule($data)}"><i class="glyphicon glyphicon-pencil"></i> <span data-bind="    text: $root.Resources.ModifySchedule"></span></a>
								<!-- /ko -->
							</div>
							<!-- ko if: $root.agentAdherenceEnabled -->
							<div class="text-info " style="float: right; margin-right: 5px; line-height: 31px; position: relative"> 
								<span >Adherence Today:</span>
								<span data-bind="text: HistoricalAdherence"></span>
								<div style="position: absolute; color: gray; font-size: xx-small; right: 0px; bottom: -11px">
									<span>Time since last update: </span>
									<span data-bind="text: ElapsedTimeSinceAdherenceCalculation"></span>
								</div>
							</div>
							<!-- /ko -->
						</div>
					</td>
				</tr>
				<!-- /ko -->
				<!-- /ko -->
			</tbody>
		</table>
	</div>
</div>

<script id="layerTemplate" type="text/html">
	<!-- ko if: OverlapsTimeLine -->
	<div class="layer absolute floatleft" data-bind="
    style: {
        left: StartPixels() + 'px',
        width: LengthPixels() + 'px',
        backgroundColor: Color
    },
    attr: {
        'data-start-time': StartTime,
        'data-length-minutes': LengthMinutes(),
    },
    click: function () {
        return $root.SelectLayer($data, $parent.PersonId);
    },
    clickBubble: false
	">
		<!-- ko if: IsFullDayAbsence && $parent.Layers().length == 1 -->
		<!-- ko if: $root.DisplayDescriptions -->
		<span class="label label-default layer-description" data-bind="text: Description"></span>
		<!-- /ko -->
		<!-- /ko -->
	</div>
	<!-- /ko -->
</script>
