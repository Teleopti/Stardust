<?xml version="1.0" encoding="utf-8"?>
<configuration>
	
	<configSections>
		<section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net" />
	</configSections>

	<appSettings>
    <add key="databaseTimeout" value="1200"/>
    <add key="concurrentThreads" value="2"/>
    <add key="chunkTimeSpan" value="2"/>
    <add key="isolationLevel" value="ReadCommitted"/>
    <!--WISEMETA: value="[PM_INSTALL]"-->
    <add key="pmInstallation" value="False"/>
    <!--WISEMETA: value="[SQL_AUTH_STRING];Application Name=Teleopti.Analytics.Etl.Service;Initial Catalog=[DB_ANALYTICS]"-->
    <add key="datamartConnectionString" value="Data Source=$(DataSource);Integrated Security=True;Initial Catalog=$(AnalyticsDB)"/>
    <!--WISEMETA: value="[WEB_BROKER]"-->
    <add key="MessageBroker" value="http://localhost:54903/"/>
	<!--WISEMETA: value="Provider=MSOLAP.3;Integrated Security=SSPI;Persist Security Info=True;Data Source=[AS_SERVER_NAME];Initial Catalog=[AS_DATABASE];Client Cache Size=25;Auto Synch Period=10000"-->
    <add key="Cube" value="Provider=MSOLAP.3;Integrated Security=SSPI;Persist Security Info=True;Data Source=.;Initial Catalog=$(AnalyticsDB);Client Cache Size=25;Auto Synch Period=10000"/>
	<!--WISEMETA: value="[ETL]Service"-->
	<add key="nhibConfPath" value="$(SitePath)" />
  </appSettings>
  
	<log4net>
		<appender name="EventAppender" type="log4net.Appender.EventLogAppender" >
			<applicationName value="TeleoptiETLService" />
			<layout type="log4net.Layout.PatternLayout">
				<conversionPattern value="%date [%thread] %-5level %logger [%property{NDC}] - %message%newline" />
			</layout>
		</appender>
		<appender name="RollingLogFileAppender" type="log4net.Appender.RollingFileAppender">
			<file value="..\..\..\Logs\ETL.Service.log" />
			<rollingStyle value="Size" />
			<maxSizeRollBackups value="10" />
			<maximumFileSize value="200KB" />
			<staticLogFileName value="true" />
			<appendToFile value="true" />
			<layout type="log4net.Layout.PatternLayout">
			<param name="ConversionPattern" value="%d [%t] %-5p %c %m%n" />
			</layout>
		</appender>
		<root>
			<level value="ERROR" />
			<appender-ref ref="EventAppender" />
			<appender-ref ref="RollingLogFileAppender" />
		</root>
		<logger name="Teleopti.Analytics.Etl.Transformer.Job.JobStepBase">
			<level value="WARN" />
		</logger>
		<logger name="Teleopti.Analytics.Etl.ServiceLogic.EtlJobStarter">
			<level value="WARN" />
		</logger>
		<logger name="Teleopti.Analytics.Etl.ServiceLogic.EtlJobStarter">
			<level value="WARN" />
		</logger>

	</log4net>

	<system.serviceModel>
    <bindings>
      <wsHttpBinding>
        <binding name="WsHttpBinding_IPMService" sendTimeout="00:15:00"></binding>
      </wsHttpBinding>
    </bindings>
    <behaviors>
      <endpointBehaviors>
        <behavior name="behave">
          <clientCredentials>
            <windows allowedImpersonationLevel="Impersonation"/>
          </clientCredentials>
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <client>
      <!--WISEMETA: address="[PM_SERVICE]"-->
      <endpoint address="http://localhost:53396/PMService.svc"
                binding="wsHttpBinding"
                contract="Teleopti.Analytics.Etl.Interfaces.PerformanceManager.IPMService"
                bindingConfiguration="WsHttpBinding_IPMService"
                behaviorConfiguration="behave" />
    </client>
  </system.serviceModel>
</configuration>
