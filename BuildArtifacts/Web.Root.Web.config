<?xml version="1.0"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=152368
  -->
<configuration>
	<configSections>
		<sectionGroup name="common">
			<section name="logging" type="Common.Logging.ConfigurationSectionHandler, Common.Logging" />
		</sectionGroup>
		<section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net" />
		<sectionGroup name="elmah">
			<section name="security" requirePermission="false" type="Elmah.SecuritySectionHandler, Elmah" />
			<section name="errorLog" requirePermission="false" type="Elmah.ErrorLogSectionHandler, Elmah" />
			<section name="errorMail" requirePermission="false" type="Elmah.ErrorMailSectionHandler, Elmah" />
			<section name="errorFilter" requirePermission="false" type="Elmah.ErrorFilterSectionHandler, Elmah" />
		</sectionGroup>
		<section name="system.identityModel" type="System.IdentityModel.Configuration.SystemIdentityModelSection, System.IdentityModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
		<section name="system.identityModel.services" type="System.IdentityModel.Services.Configuration.SystemIdentityModelServicesSection, System.IdentityModel.Services, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
		<sectionGroup name="dotNetOpenAuth" type="DotNetOpenAuth.Configuration.DotNetOpenAuthSection, Teleopti.Ccc.Web.Auth">
			<section name="messaging" type="DotNetOpenAuth.Configuration.MessagingElement, Teleopti.Ccc.Web.Auth" requirePermission="false" allowLocation="true" />
			<section name="openid" type="DotNetOpenAuth.Configuration.OpenIdElement, Teleopti.Ccc.Web.Auth" requirePermission="false" allowLocation="true" />
		</sectionGroup>
	</configSections>

	<log4net>
		<root>
			<appender-ref ref="EventLogAppender" />
			<appender-ref ref="RollingFileAppender" />
			<appender-ref ref="aiAppender" />
			<level value="ERROR" />
		</root>
		<logger name="Teleopti">
			<level value="WARN" />
		</logger>
		<logger name="Hangfire.AutomaticRetryAttribute">
			<level value="WARN" />
		</logger>
		<logger name="DotNetOpenAuth.OpenId">
			<level value="OFF" />
		</logger>
		<logger name="DotNetOpenAuth.Messaging">
			<level value="OFF" />
		</logger>
		<logger name="NHibernate.Util.ADOExceptionReporter">
			<level value="OFF" />
		</logger>
		<logger name="Teleopti.Ccc.Domain.ApplicationLayer.ScheduleChangedEventHandlers.Analytics" additivity="False">
			<appender-ref ref="aiAppender" />
			<level value="INFO" />
		</logger>
		<!--<logger name="Teleopti.Requests">
			<level value="DEBUG" />
		</logger>-->
		<!--
		<logger name="Teleopti.Wfm.Adherence" additivity="False">
			<appender-ref ref="RollingFileAppender" />
			<level value="INFO" />
		</logger>
		<logger name="Teleopti.Ccc.Web.Areas.Rta" additivity="False">
			<appender-ref ref="RollingFileAppender" />
			<level value="INFO" />
		</logger>
		-->
		<!--$(TestLogConfiguration)-->
		<appender name="EventLogAppender" type="log4net.Appender.EventLogAppender" >
			<filter type="Teleopti.Ccc.Infrastructure.Hangfire.IgnoreNHibernateErrorsInHangfireWorkers, Teleopti.Ccc.Infrastructure">
			</filter>
			<filter type="Teleopti.Ccc.Infrastructure.Hangfire.IgnoreRetryWarningsFromSpecifiedPrimaryKeys, Teleopti.Ccc.Infrastructure">
			</filter>
			<applicationName value="TeleoptiWebApps" />
			<layout type="log4net.Layout.PatternLayout">
				<conversionPattern value="%date [%thread] %-5level %logger [%property{NDC}] - %message%newline" />
			</layout>
		</appender>
		<appender name="RollingFileAppender" type="log4net.Appender.RollingFileAppender">
			<file type="log4net.Util.PatternString" value="..\..\Logs\%property{logName}.log" />
			<appendToFile value="true" />
			<rollingStyle value="Size" />
			<maxSizeRollBackups value="3" />
			<maximumFileSize value="10MB" />
			<staticLogFileName value="true" />
			<layout type="log4net.Layout.PatternLayout">
				<conversionPattern value="%date [%thread] %-5level %logger [%property{NDC}] - %message%newline" />
			</layout>
		</appender>
		<appender name="aiAppender" type="Microsoft.ApplicationInsights.Log4NetAppender.ApplicationInsightsAppender, Microsoft.ApplicationInsights.Log4NetAppender">
			<layout type="log4net.Layout.PatternLayout">
				<conversionPattern value="%message%newline" />
			</layout>
		</appender>
	</log4net>
	<common>
		<logging>
			<factoryAdapter type="Common.Logging.Log4Net.Log4NetLoggerFactoryAdapter, Common.Logging.Log4Net1211">
				<arg key="configType" value="EXTERNAL" />
			</factoryAdapter>
		</logging>
	</common>

	<connectionStrings>
		<add name="Hangfire" connectionString="$(SQL_AUTH_STRING);Initial Catalog=$(DB_ANALYTICS);Application Name=Teleopti.Wfm.Web.Hangfire"/>
		<add name="Tenancy" connectionString="$(SQL_AUTH_STRING);Initial Catalog=$(DB_CCC7);Application Name=Teleopti.Tenancy"/>
		<add name="Toggle" connectionString="$(SQL_AUTH_STRING);Initial Catalog=$(DB_CCC7);Application Name=Teleopti.Toggle"/>
		<add name="MessageBroker" connectionString="$(SQL_AUTH_STRING);Initial Catalog=$(DB_ANALYTICS);Application Name=Teleopti.Web.Broker"/>
		<add name="RtaTracer" connectionString="$(SQL_AUTH_STRING);Initial Catalog=$(DB_ANALYTICS);Application Name=Teleopti.RtaTracer"/>
		<add name="ManagerConnectionString" connectionString="$(SQL_AUTH_STRING);Initial Catalog=$(DB_CCC7);Application Name=Teleopti.Stardust"/>
		<add name="SignalRBackplane" connectionString="$(SIGNALR_BACKPLANE)" />
	</connectionStrings>

	<appSettings>
		<!--put in config rather than code due to faster startup (no type scanning) -->
		<add key="owin:appStartup" value="Teleopti.Ccc.Web.Core.Startup.Startup, Teleopti.Ccc.Web" />
		<!-- -->
		<add key="webpages:Version" value="3.0.0.0"/>
		<add key="PreserveLoginUrl" value="true"/>
		<add key="ClientValidationEnabled" value="true"/>
		<add key="UnobtrusiveJavaScriptEnabled" value="true"/>
		<add key="MessageBroker" value="$(URL)"/>
		<add key="NumberOfDaysToShowNonPendingRequests" value="14" />
		<!--SignalRBackplaneType can be one of "sqlserver", "azureservicebus", "redis" or else, else means don't use backplane; SignalRBackplane in connectionStrings needs to be filled if needed. -->
		<add key="SignalRBackplaneType" value="$(SIGNALR_BACKPLANE_TYPE)" />
		<add key="SignalRBackplanePrefix" value="$(SIGNALR_BACKPLANE_PREFIX)"/>
		<add key="DefaultIdentityProvider" value="$(DEFAULT_IDENTITY_PROVIDER)" />
		<add key="MatrixWebSiteUrl" value="$(MATRIX_WEB_SITE_URL)"/>
		<add key="FeatureToggle" value="bin/FeatureFlags/toggles.txt"/>
		<add key="StatsBatchSize" value="20"/>
		<add key="ValidationSettings:UnobtrusiveValidationMode" value="None" />
		<add key="ReportServer" value="$(URL)"/>
		<!-- if the dbtimeoutforreports is increased also increase the "<httpRuntime  executionTimeout="to a value 5 seconds more than dbtimeoutforreports " 
		<httpRuntime is present further down in the config file-->
		<add key="DbTimeoutForReports" value="600" />
		<!--
		TOGGLEMODE
		ALL: All toggles on (except those explicitly set to false)
		RC: RC and true toggles turned on
		[Anything else or not specified]: Used in production. Only toggles set to true turned on
		Change by adding
		<add key="ToggleMode" value="ALL" />
		Or
		<add key="ToggleMode" value="RC" />
		Or
		<add key="ToggleMode" value="CUSTOMER" />
		
		Remarked line below must be kept! Used by behaviour tests and cloud installation
		-->
		<!--$(ToggleModeAppSetting)-->
		<add key="UseRelativeConfiguration" value="$(WEB_DEPLOY)" />
		<add key="UseLocalhostIdentifier" value="$(WEB_DEPLOY)" />
		<add key="CustomEndpointHost" value="$(DNS_ALIAS)" />
		<add key="ConfigurationFilesPath" value="$(CONFIGURATION_FILES_PATH)" />
		<add key="HelpPrefix" value="F01%253A"/>
		<add key="HelpDivider" value="_"/>
		<add key="HelpSuffix" value=".html"/>
		<add key="HelpUrlOnline" value="https://wiki.teleopti.com/TeleoptiWFM/Special:MyLanguage/"/>
		<add key="HelpPrefixOnline" value="f01:"/>
		<add key="HelpDividerOnline" value="+"/>
		<add key="HelpSuffixOnline" value=""/>
		<add key="RtaPollingInterval" value="5000"/>
		<!-- Change the following to a non zero value to cache the result of absence time used in calculating absence probability on schedule page -->
		<add key="BudgetGroupAbsenceTimeCacheExpiryInSeconds" value="180" />
		<add key="ManagerLocation" value="$(URL)StardustDashboard/"/>
		<add key="CertificateModulus" value="tcQWMgdpQeCd8+gzB3rYQAehHXF5mBGdyFMkJMEmcQmTlkpg22xLNz/kNYXZ7j2Cuhls+PBORzZkfBsNoL1vErT+N9Es4EEWOt6ntNe7wujqQqktUT/QOWEMJ8zJQM3bn7Oj9H5StBr7DWSRzgEjOc7knDcb4KCQL3ceXqmqwSonPfP1hp+bE8rZuxDISYiZVEkm417YzUHBk3ppV30Q9zvfL9IZX0q/ebCTRnLFockl7yOVucomvo8j4ssFPCAYgASoNvzWq+s5UTzYELl1I7F3hQnFwx0bIpQFmGbZ5BbNczc6rVYtCX5KDMsVaJSUcXBAnqGd20hq/ICkBR658w==" />
		<add key="CertificateExponent" value="AQAB" />
		<add key="CertificateP" value="8r2FFhgc78WZf/uKEjHPyiLL9FkcjbPsdLB/Dd6AEOVuzpVFlBJsai31gyLIUU3zY6gE/NdMZzQ7ejsjhbpC4/ptbJguTpIOGB+7dX+/DEdwZkx8rIlNG32VDIdP6kqpwPzhtGVfNiq8xHaS+SHTQf6JSWQtNKgVbilWgYyEZ9k=" />
		<add key="CertificateQ" value="v7Hm0iP49ReGhVvKdAsDUgcK0olmVGAKwsxsFnXUGkAWydh+T3QaChYkYBS+h5cX4UBlil5FaJKtGq4wduKDkMCN8TNHh3n2k05rh4DxxPmLvhCqkQgvMB/22E+z10VAmjKPq7BnAq/lc2rGJWa1lq3qaeSkcF6agCPQVYd6vKs=" />
		<add key="CertificateDP" value="7mr7dvIEKfVZiX0U5j4Kq611yfBkvUHFs+9PO94Yx3+yUDIJfyCBX+D4Te8x9bmsn2t+SqFlJ9EDwlCn2UdTP/zO0WS/xuhp84PnaccpbPQWEER8CDNrit7UMNQOyD7BcQ5w2fDfjaJ4ejdEsHJqv100luNQC3I0alkr4F6WBjE=" />
		<add key="CertificateDQ" value="nZ2rSlGlm/BR/Ujx9+QuQL3lmiK7btjhQDZREU6krUjQ8/n8MVwnJO/7zLyBxH7pdZ47X0AQFeG0T2G2G6o3v0dz7kTZpX0Uzx4FsA7Hu8vrqMWPWVy/X/SIRGeUWYZpjd/Q3bxXlpAGO5Ypggsnd9NcEOGci4BdzMqlvA1/T60=" />
		<add key="CertificateInverseQ" value="4OVuc98gImxH9yLmvMimnr9zFxw6pwRd++/A7q1Uj8BrCKhzD8rY6QosNZCKlMjWdHNYtAWrDDqxwCRPUYhmdOm+JEkxBL7yelodmongNXUS0J9kf9c+k8fjgEsB02J15QqryyuRvw0Z638BheD9Ry3NN/REO0pdnj2LHxa17V0=" />
		<add key="CertificateD" value="YQOGoS8pc9rSE1OUoOJlN0+bI57kOlD0uO3/NYrN3Lkyx51tMtALGTMFt7d4SNsVwgQ+EGQaM5IJcd/ylx9kgESQBvSjEhJLLiKWukQG2BH+rpOjN2Fq3qU4mqmHpQn6tbNox98Af1aDNnO+Coi652jQxbv4Kh0ot9zJHddK5wuTxIQDLAxyb50f/ReG3UekxZoEOZEtj1oEd+QB/py+hP7Xp010Wfzy82g5Ec3ELjzeNPtijxmO+WExoF5zALIUYd8ClH+ayr2Ab3rD0Dv8VM1Y08npzSs6d5OOAAnG+245koiwkgJoXvZg0EVkcdJxZsMxIGL/OWEl82VnqC6mUQ==" />
		<!--$(BehaviorTestServerAppSetting)-->
		<!--$(HangfireDashboardAppSetting)-->
		<!--$(HangfireDashboardStatisticsAppSetting)-->
		<!--$(HangfireDashboardCountersAppSetting)-->
		<!--$(HangfireJobExpirationSecondsAppSetting)-->
		<!--$(MessagesOnBootAppSetting)-->
		<add key="InitialLoadScheduleProjectionStartDate" value="-31"/>
		<add key="InitialLoadScheduleProjectionEndDate" value="180"/>
		<!--$(CheckNewJobIntervalSeconds)-->
		<add key="GrantBotDirectLineSecret" value="$(GrantBotDirectLineSecret)"/>
		<add key="GrantBotTokenGenerateUrl" value="https://directline.botframework.com/v3/directline/tokens/generate"/>
		<add key="GrantBotApiUrl" value="https://teleoptibottest.azurewebsites.net/t/api/tenant"/>
		
		<add key="AzureTenantId" value="$(AzureTenantId)" />
		<add key="PowerBIClientId" value="$(PowerBIClientId)" />
		<add key="PowerBIGroupId" value="$(PowerBIGroupId)" />
		<add key="PowerBIUsername" value="$(PowerBIUserName)" />
		<add key="PowerBIPassword" value="$(PowerBIPassword)" />
	</appSettings>
	<system.serviceModel>
		<serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true"/>
		<services>
			<service name="Teleopti.Ccc.Web.Areas.Rta.TeleoptiRtaService" behaviorConfiguration="Teleopti.Ccc.Rta.WebService.TeleoptiRtaService">
				<!-- Service Endpoints -->
				<endpoint address="" binding="basicHttpBinding" bindingConfiguration="basicHttpBinding_withSize" contract="Teleopti.Ccc.Rta.WebService.ITeleoptiRtaService">
					<!-- 
						Upon deployment, the following identity element should be removed or replaced to reflect the 
						identity under which the deployed service runs.  If removed, WCF will infer an appropriate identity 
						automatically.
					-->
					<identity>
						<dns value="localhost"/>
					</identity>
				</endpoint>
				<endpoint address="mex" binding="$(SDK_SSL_MEX_BINDING)" contract="IMetadataExchange"/>
			</service>
		</services>
		<bindings>
			<basicHttpBinding>
				<binding name="basicHttpBinding_withSize" maxReceivedMessageSize="1000000" maxBufferSize="1000000">
					<security mode="$(SDK_SSL_SECURITY_MODE)">
						<transport clientCredentialType="None" />
					</security>
				</binding>
			</basicHttpBinding>
		</bindings>
		<behaviors>
			<serviceBehaviors>
				<behavior name="Teleopti.Ccc.Rta.WebService.TeleoptiRtaService">
					<log4net />
					<!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
					<serviceMetadata httpGetEnabled="$(HTTPGETENABLED)" httpsGetEnabled="$(HTTPSGETENABLED)"/>
					<!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
					<serviceDebug includeExceptionDetailInFaults="false"/>
					<serviceThrottling maxConcurrentCalls="1000" maxConcurrentInstances="1000" maxConcurrentSessions="5000000"/>
				</behavior>
			</serviceBehaviors>
		</behaviors>
		<extensions>
			<behaviorExtensions>
				<add name="log4net" type="Teleopti.Ccc.Web.Areas.Rta.Log4NetBehaviorExtensionElement, Teleopti.Ccc.Web" />
			</behaviorExtensions>
		</extensions>
	</system.serviceModel>
	<system.web>
		<httpModules>
			<add name="Log4NetModule" type="Teleopti.Ccc.Web.Core.Logging.Log4NetModule, Teleopti.Ccc.Web" />
			<add name="ErrorLog" type="Elmah.ErrorLogModule, Elmah" />
			<add name="ErrorMail" type="Elmah.ErrorMailModule, Elmah" />
			<add name="ErrorFilter" type="Elmah.ErrorFilterModule, Elmah" />
			<add name="WSFederatedAuthenticationModule" type="Teleopti.Ccc.Web.Core.RelativeWSFederationAuthenticationModule, Teleopti.Ccc.Web, Version=7.0.0.0, Culture=neutral"/>
			<add name="SessionAuthenticationModule" type="System.IdentityModel.Services.SessionAuthenticationModule, System.IdentityModel.Services, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"/>
			<add name="ApplicationInsightsWebTracking" type="Microsoft.ApplicationInsights.Web.ApplicationInsightsHttpModule, Microsoft.AI.Web" />
		</httpModules>
		<compilation targetFramework="4.7.2">
			<assemblies>
				<add assembly="System.Web.Helpers, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
				<add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
				<add assembly="System.Web.Mvc, Version=5.2.3.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
				<add assembly="System.Web.WebPages, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
				<add assembly="Microsoft.VisualBasic" />
				<add assembly="System.IdentityModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
			</assemblies>
		</compilation>
		<authentication mode="None">
			<forms requireSSL="$(HTTPSGETENABLED)"></forms>
		</authentication>
		<sessionState mode="Off"></sessionState>
		<pages maxPageStateFieldLength="2000">
			<namespaces>
				<add namespace="System.Web.Helpers" />
				<add namespace="System.Web.Mvc" />
				<add namespace="System.Web.Mvc.Html" />
				<add namespace="System.Web.Routing" />
				<add namespace="System.Web.WebPages"/>
			</namespaces>
		</pages>
		<globalization culture="auto" uiCulture="auto" />
		<customErrors mode="On" redirectMode="ResponseRewrite" defaultRedirect="~/content/error/error.htm">
			<error statusCode="404" redirect="~/content/error/404.aspx"/>
		</customErrors>
		<httpHandlers>
			<add verb="POST,GET,HEAD" path="elmah.axd" type="Elmah.ErrorLogPageFactory, Elmah" />
		</httpHandlers>
		<!-- #23052 - in order to handle "DbTimeoutForReports"=600, set executionTimeout value slight higher -->
		<httpRuntime  executionTimeout="605" targetFramework="4.7.2" requestValidationType="Teleopti.Ccc.Web.Core.AllowTokenPostRequestValidator" enableVersionHeader="false"/>
		<httpCookies httpOnlyCookies="true" />
		<machineKey validationKey="$(machineKey.validationKey)" decryptionKey="$(machineKey.decryptionKey)" decryption="AES" validation="SHA1" />
	</system.web>
	<system.webServer>
		<validation validateIntegratedModeConfiguration="false"/>
		<modules runAllManagedModulesForAllRequests="false" >
			<!-- borde vara false! fast problem på win 2008 r2-->
			<remove name="WebDAVModule" />
			<remove name="FormsAuthentication"/>
			<remove name="ErrorLog" />
			<add name="ErrorLog" type="Elmah.ErrorLogModule, Elmah" preCondition="managedHandler" />
			<remove name="ErrorMail" />
			<add name="ErrorMail" type="Elmah.ErrorMailModule, Elmah" preCondition="managedHandler" />
			<remove name="ErrorFilter" />
			<add name="ErrorFilter" type="Elmah.ErrorFilterModule, Elmah" preCondition="managedHandler" />
			<remove name="Log4NetModule" />
			<add name="Log4NetModule" type="Teleopti.Ccc.Web.Core.Logging.Log4NetModule, Teleopti.Ccc.Web" preCondition="managedHandler"/>
			<remove name="SessionAuthenticationModule" />
			<add name="SessionAuthenticationModule" type="System.IdentityModel.Services.SessionAuthenticationModule, System.IdentityModel.Services, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" preCondition="managedHandler" />
			<remove name="WSFederationAuthenticationModule" />
			<add name="WSFederationAuthenticationModule" type="Teleopti.Ccc.Web.Core.RelativeWSFederationAuthenticationModule, Teleopti.Ccc.Web, Version=7.0.0.0, Culture=neutral" preCondition="managedHandler"/>
			<remove name="TelemetryCorrelationHttpModule" />
			<add name="TelemetryCorrelationHttpModule" type="Microsoft.AspNet.TelemetryCorrelation.TelemetryCorrelationHttpModule, Microsoft.AspNet.TelemetryCorrelation" preCondition="integratedMode,managedHandler" />
			<remove name="ApplicationInsightsWebTracking" />
			<add name="ApplicationInsightsWebTracking" type="Microsoft.ApplicationInsights.Web.ApplicationInsightsHttpModule, Microsoft.AI.Web" preCondition="managedHandler" />
		</modules>
		<handlers>
			<remove name="WebDAV" />
			<remove name="OPTIONSVerbHandler" />
			<remove name="TRACEVerbHandler" />
			<remove name="ExtensionlessUrlHandler-Integrated-4.0" />
			<add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,DELETE,PUT" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
			<remove name="ExtensionlessUrlHandler-Integrated-4.0-SSO" />
			<add name="ExtensionlessUrlHandler-Integrated-4.0-SSO" path="*OpenId/AskUser*" verb="GET,HEAD,POST" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
			<remove name="Elmah" />
			<add name="Elmah" path="elmah.axd" verb="POST,GET,HEAD" type="Elmah.ErrorLogPageFactory, Elmah" preCondition="integratedMode" />
		</handlers>
		<httpProtocol>
			<customHeaders>
				<clear />
				<add name="X-UA-Compatible" value="IE=edge" />
				<add name="X-Content-Type-Options" value="nosniff" />
				<add name="X-XSS-Protection" value="1; mode=block" />
				<add name="Content-Security-Policy" value="script-src 'self' 'unsafe-inline' 'unsafe-eval'; frame-ancestors 'self' $(CSP_PARENT_URL);" />
				$(HSTS_HEADER)
				<remove name="Server" />
				<remove name="X-Powered-By" />
			</customHeaders>
		</httpProtocol>
		<staticContent>
			<clientCache cacheControlCustom="public, no-cache='Set-Cookie, Set-Cookie2'" cacheControlMode="UseMaxAge" cacheControlMaxAge="0.00:30:00"/>
			<remove fileExtension=".eot" />
			<remove fileExtension=".ttf" />
			<remove fileExtension=".svg" />
			<remove fileExtension=".woff" />
			<remove fileExtension=".woff2" />
			<remove fileExtension=".scss" />
			<remove fileExtension=".webmanifest" />
			<mimeMap fileExtension=".eot" mimeType="application/vnd.ms-fontobject" />
			<mimeMap fileExtension=".ttf" mimeType="application/octet-stream" />
			<mimeMap fileExtension=".svg" mimeType="image/svg+xml" />
			<mimeMap fileExtension=".woff" mimeType="application/font-woff" />
			<mimeMap fileExtension=".woff2" mimeType="application/font-woff2" />
			<mimeMap fileExtension=".scss" mimeType="application/text" />
			<mimeMap fileExtension=".webmanifest" mimeType="application/manifest+json" />
		</staticContent>
	</system.webServer>
	<runtime>
		<assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
			<dependentAssembly>
				<assemblyIdentity name="Common.Logging" publicKeyToken="af08829b84f0328e" culture="neutral" />
				<bindingRedirect oldVersion="0.0.0.0-2.2.0.0" newVersion="2.2.0.0" />
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="Castle.Core" publicKeyToken="407dd0808d44fbdc" culture="neutral" />
				<bindingRedirect oldVersion="0.0.0.0-3.3.0.0" newVersion="3.3.0.0" />
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="Autofac" publicKeyToken="17863af14b0044da" culture="neutral" />
				<bindingRedirect oldVersion="0.0.0.0-4.8.1.0" newVersion="4.8.1.0" />
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="Microsoft.ApplicationInsights" publicKeyToken="31bf3856ad364e35" culture="neutral" />
				<bindingRedirect oldVersion="0.0.0.0-2.4.0.0" newVersion="2.4.0.0" />
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="Autofac.Integration.WebApi" publicKeyToken="17863af14b0044da" culture="neutral" />
				<bindingRedirect oldVersion="0.0.0.0-4.2.0.0" newVersion="4.2.0.0" />
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="Autofac.Integration.Owin" publicKeyToken="17863af14b0044da" culture="neutral" />
				<bindingRedirect oldVersion="0.0.0.0-4.2.0.0" newVersion="4.2.0.0" />
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="Autofac.Integration.WebApi.Owin" publicKeyToken="17863af14b0044da" culture="neutral" />
				<bindingRedirect oldVersion="0.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="WebGrease" publicKeyToken="31bf3856ad364e35" culture="neutral" />
				<bindingRedirect oldVersion="0.0.0.0-1.5.2.14234" newVersion="1.5.2.14234" />
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="log4net" publicKeyToken="669e0ddf0bb1aa2a" culture="neutral" />
				<bindingRedirect oldVersion="0.0.0.0-1.2.15.0" newVersion="1.2.15.0" />
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="Microsoft.Owin" publicKeyToken="31bf3856ad364e35" culture="neutral" />
				<bindingRedirect oldVersion="0.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="Microsoft.AspNet.SignalR.Core" publicKeyToken="31bf3856ad364e35" culture="neutral" />
				<bindingRedirect oldVersion="0.0.0.0-2.3.0.0" newVersion="2.3.0.0" />
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="Newtonsoft.Json" publicKeyToken="30ad4fe6b2a6aeed" culture="neutral" />
				<bindingRedirect oldVersion="0.0.0.0-10.0.0.0" newVersion="10.0.0.0" />
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="Microsoft.AspNet.SignalR.Client" publicKeyToken="31bf3856ad364e35" culture="neutral" />
				<bindingRedirect oldVersion="0.0.0.0-2.3.0.0" newVersion="2.3.0.0" />
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="System.Web.Http" publicKeyToken="31bf3856ad364e35" culture="neutral" />
				<bindingRedirect oldVersion="0.0.0.0-5.2.3.0" newVersion="5.2.3.0" />
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364e35" />
				<bindingRedirect oldVersion="1.0.0.0-3.0.0.0" newVersion="3.0.0.0" />
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35" />
				<bindingRedirect oldVersion="0.0.0.0-3.0.0.0" newVersion="3.0.0.0" />
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
				<bindingRedirect oldVersion="0.0.0.0-5.2.3.0" newVersion="5.2.3.0" />
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="System.Net.Http.Formatting" publicKeyToken="31bf3856ad364e35" />
				<bindingRedirect oldVersion="0.0.0.0-5.2.3.0" newVersion="5.2.3.0" />
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="System.Web.WebPages.Deployment" publicKeyToken="31bf3856ad364e35" culture="neutral" />
				<bindingRedirect oldVersion="0.0.0.0-3.0.0.0" newVersion="3.0.0.0" />
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="System.Web.Razor" publicKeyToken="31bf3856ad364e35" culture="neutral" />
				<bindingRedirect oldVersion="0.0.0.0-3.0.0.0" newVersion="3.0.0.0" />
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="System.Web.WebPages.Razor" publicKeyToken="31bf3856ad364e35" culture="neutral" />
				<bindingRedirect oldVersion="0.0.0.0-3.0.0.0" newVersion="3.0.0.0" />
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="System.Web.Http.Owin" publicKeyToken="31bf3856ad364e35" culture="neutral" />
				<bindingRedirect oldVersion="0.0.0.0-5.2.3.0" newVersion="5.2.3.0" />
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="System.Web.Http.WebHost" publicKeyToken="31bf3856ad364e35" culture="neutral" />
				<bindingRedirect oldVersion="0.0.0.0-5.2.3.0" newVersion="5.2.3.0" />
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="Microsoft.Owin.Security" publicKeyToken="31bf3856ad364e35" culture="neutral" />
				<bindingRedirect oldVersion="0.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="System.Runtime.Serialization.Primitives" publicKeyToken="b03f5f7f11d50a3a" culture="neutral" />
				<bindingRedirect oldVersion="0.0.0.0-4.1.2.0" newVersion="4.1.2.0" />
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="NodaTime" publicKeyToken="4226afe0d9b296d1" culture="neutral" />
				<bindingRedirect oldVersion="0.0.0.0-2.2.2.0" newVersion="2.2.2.0" />
			</dependentAssembly>
			<dependentAssembly>
				<assemblyIdentity name="Antlr3.Runtime" publicKeyToken="eb42632606e9261f" culture="neutral" />
				<bindingRedirect oldVersion="0.0.0.0-3.5.0.2" newVersion="3.5.0.2" />
			</dependentAssembly>
		</assemblyBinding>
	</runtime>
	<system.identityModel>
		<identityConfiguration>
			<audienceUris>
				<add value="http://sample-with-policyengine/" />
				<add value="http://sample-without-policyengine/" />
			</audienceUris>
			<certificateValidation certificateValidationMode="None" />
			<issuerNameRegistry type="System.IdentityModel.Tokens.ConfigurationBasedIssuerNameRegistry, System.IdentityModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089">
				<trustedIssuers>
					<add thumbprint="ec3d114a61a26a0bac439412a52e9acfa470325c" name="AuthBridge.Web" />
				</trustedIssuers>
			</issuerNameRegistry>
			<securityTokenHandlers>
				<remove type="System.IdentityModel.Tokens.SessionSecurityTokenHandler, System.IdentityModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
				<add type="System.IdentityModel.Services.Tokens.MachineKeySessionSecurityTokenHandler, System.IdentityModel.Services, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089">
					<sessionTokenRequirement lifetime="00:30:00"></sessionTokenRequirement>
				</add>
			</securityTokenHandlers>
		</identityConfiguration>
	</system.identityModel>
	<system.identityModel.services>
		<federationConfiguration>
			<wsFederation passiveRedirectEnabled="false" issuer="$(UrlAuthenticationBridge)" realm="http://sample-with-policyengine/" requireHttps="$(HTTPSGETENABLED)" signOutReply="$(URL)" />
			<cookieHandler requireSsl="$(HTTPSGETENABLED)" name="FedAuth45" hideFromScript="true" />
		</federationConfiguration>
	</system.identityModel.services>
	<dotNetOpenAuth>
		<messaging>
			<untrustedWebRequest timeout="00:00:30" readWriteTimeout="00:00:10">
				<whitelistHosts>
					<add name="localhost" />
					<add name="$(HOST_NAME)" />
				</whitelistHosts>
			</untrustedWebRequest>
		</messaging>
		<!-- This is an optional configuration section where aspects of dotnetopenauth can be customized. -->
		<!-- For a complete set of configuration options see http://www.dotnetopenauth.net/developers/code-snippets/configuration-options/ -->
		<openid>
			<provider></provider>
		</openid>
	</dotNetOpenAuth>
</configuration>
