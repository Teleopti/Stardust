<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net" />
  </configSections>
	<appSettings file="customTimeoutSettings.config" >
		<add key="ScaleOutBackplaneUrl" value="$(WEB_BROKER_BACKPLANE)"/>
    <add key="ThrottleMessages" value="true" />
    <add key="MessagesPerSecond" value="80" />
  </appSettings>
  <connectionStrings />
  <system.web>
    <compilation debug="false" targetFramework="4.0" />
    <!--
      The <authentication> section enables configuration 
      of the security authentication mode used by 
      ASP.NET to identify an incoming user. 
    -->
    <authentication mode="None" />
    <!--
       The <customErrors> section enables configuration 
       of what to do if/when an unhandled error occurs 
       during the execution of a request. Specifically, 
       it enables developers to configure html error pages 
       to be displayed in place of a error stack trace.

       <customErrors mode="RemoteOnly" defaultRedirect="GenericErrorPage.htm">
         <error statusCode="403" redirect="NoAccess.htm" />
         <error statusCode="404" redirect="FileNotFound.htm" />
       </customErrors>
    -->
    <httpRuntime maxQueryStringLength="32768" maxRequestLength="32768"/>
  </system.web>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <modules runAllManagedModulesForAllRequests="true" />
    <security>
      <requestFiltering>
        <requestLimits maxQueryString="32768" maxUrl="32768">
        </requestLimits>
      </requestFiltering>
    </security>
  </system.webServer>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
    <dependentAssembly>
      <assemblyIdentity name="Microsoft.Owin.Host.SystemWeb" publicKeyToken="31bf3856ad364e35" culture="neutral" />
      <bindingRedirect oldVersion="0.0.0.0-1.0.0.0" newVersion="1.0.0.0" />
    </dependentAssembly>   
	<dependentAssembly>
		<assemblyIdentity name="Microsoft.AspNet.SignalR.Core" publicKeyToken="31bf3856ad364e35" culture="neutral" />
		<bindingRedirect oldVersion="0.0.0.0-1.2.0.0" newVersion="1.2.0.0" />
	</dependentAssembly>
	<dependentAssembly>
		<assemblyIdentity name="Microsoft.AspNet.SignalR.SystemWeb" publicKeyToken="31bf3856ad364e35" culture="neutral" />
		<bindingRedirect oldVersion="0.0.0.0-1.2.0.0" newVersion="1.2.0.0" />
	</dependentAssembly>
    </assemblyBinding>
  </runtime>
  <log4net>
    <appender name="EventAppender" type="log4net.Appender.EventLogAppender" >
      <applicationName value="TeleoptiWebBroker" />
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%date [%thread] %-5level %logger [%property{NDC}] - %message%newline" />
      </layout>
    </appender>
    <appender name="RollingLogFileAppender" type="log4net.Appender.RollingFileAppender">
      <file value="..\..\Logs\WebBroker.log" />
      <rollingStyle value="Size" />
        <maxSizeRollBackups value="10" />
        <maximumFileSize value="500KB" />
        <staticLogFileName value="true" />
        <appendToFile value="true" />
        <layout type="log4net.Layout.PatternLayout">
          <param name="ConversionPattern" value="%d [%t] %-5p %c %m%n" />
        </layout>
    </appender>
    <root>
      <level value="WARN" />
      <appender-ref ref="EventAppender" />
      <appender-ref ref="RollingLogFileAppender" />
    </root>
	</log4net>
</configuration>